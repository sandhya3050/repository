"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var debug = require('debug')('utils getUrlByRequestOptions');
exports.DEFAULT_PATH = '/';
var DEFAULT_PROTOCOL = 'http:';
/**
 * Creates a `URL` instance from a given `RequestOptions` object.
 */
function getUrlByRequestOptions(options) {
    var _a;
    var path = options.path || exports.DEFAULT_PATH;
    debug('creating URL from options:', options);
    if (!options.protocol) {
        debug('given no protocol, resolving...');
        // Assume HTTPS if cert is set.
        options.protocol = options.cert ? 'https:' : (((_a = options.uri) === null || _a === void 0 ? void 0 : _a.protocol) || DEFAULT_PROTOCOL);
        debug('resolved protocol to:', options.protocol);
    }
    var baseUrl = options.protocol + "//" + (options.hostname || options.host);
    debug('using base URL:', baseUrl);
    var url = options.uri ? new URL(options.uri.href) : new URL(path, baseUrl);
    if (!!options.port) {
        url.port = options.port.toString();
    }
    if (!!options.auth) {
        var _b = options.auth.split(':'), username = _b[0], password = _b[1];
        url.username = username;
        url.password = password;
    }
    debug('created URL:', url);
    return url;
}
exports.getUrlByRequestOptions = getUrlByRequestOptions;
