!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactQuery={},e.React)}(this,(function(e,t){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var n;t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,(n=e.QueryStatus||(e.QueryStatus={})).Idle="idle",n.Loading="loading",n.Error="error",n.Success="success";var i=0,u=function(){return i++},o={},a="undefined"==typeof window;function c(){}var s=console||{error:c,warn:c,log:c};function f(e,t){return"function"==typeof e?e(t):e}function l(e,t){if("function"==typeof t)throw new Error("Cannot stringify non JSON value");return d(t)?Object.keys(t).sort().reduce((function(e,r){return e[r]=t[r],e}),{}):t}function h(e){return JSON.stringify(e,l)}function d(e){return e&&"object"==typeof e&&!Array.isArray(e)}function v(e,t){return e===t||typeof e==typeof t&&("object"==typeof e&&!Object.keys(t).some((function(r){return!v(e[r],t[r])})))}function y(){return"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}function g(e){var t,n,i,u;return d(e[0])?(t=e[0].queryKey,n=e[0].queryFn,i=e[0].config,u=e[1]):d(e[1])?(t=e[0],i=e[1],u=e[2]):(t=e[0],n=e[1],i=e[2],u=e[3]),i=i||{},n&&(i=r({},i,{queryFn:n})),[t,i,u]}function p(e,t,r,n){if(void 0===n&&(n=0),e===t)return!0;if((r||!n)&&e&&t&&"object"==typeof e&&"object"==typeof t){var i,u;if(Array.isArray(e)){if((i=e.length)!=t.length)return!1;for(u=i;0!=u--;)if(!p(e[u],t[u],r,n+1))return!1;return!0}if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();var o=Object.keys(e);if((i=o.length)!==Object.keys(t).length)return!1;for(u=i;0!=u--;)if(!Object.prototype.hasOwnProperty.call(t,o[u]))return!1;for(u=i;0!=u--;){var a=o[u];if(!p(e[a],t[a],r,n+1))return!1}return!0}return e!=e&&t!=t}function S(t){return{status:t,isLoading:t===e.QueryStatus.Loading,isSuccess:t===e.QueryStatus.Success,isError:t===e.QueryStatus.Error,isIdle:t===e.QueryStatus.Idle}}var b={shared:{suspense:!1},queries:{queryKeySerializerFn:function(e){try{var t=Array.isArray(e)?e:[e],r=h(t);return[r,t=JSON.parse(r)]}catch(e){throw new Error("A valid query key is required!")}},enabled:!0,retry:3,retryDelay:function(e){return Math.min(1e3*Math.pow(2,e),3e4)},staleTime:0,cacheTime:3e5,refetchOnWindowFocus:!0,refetchInterval:!1,queryFnParamsFilter:function(e){return e},refetchOnMount:!0,isDataEqual:function(e,t){return p(e,t,!0)},useErrorBoundary:!1},mutations:{throwOnError:!1,useErrorBoundary:!1}},m={current:b};function q(){}var w=function(){function e(e,t){this.id=u(),this.stateUpdateListener=t,this.query=e,this.config={}}var t=e.prototype;return t.clearInterval=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)})),t.updateConfig=function(e){var t=this,r=this.config;if(this.config=e,!a){if((null==r?void 0:r.refetchInterval)===e.refetchInterval)return;this.query.clearIntervals();var n=Math.min.apply(Math,this.query.instances.map((function(e){return e.config.refetchInterval||1/0})));!this.refetchIntervalId&&n>0&&n<1/0&&(this.refetchIntervalId=setInterval((function(){t.query.instances.some((function(e){return e.config.enabled}))&&(y()||t.query.instances.some((function(e){return e.config.refetchIntervalInBackground})))&&t.query.fetch()}),n))}},t.run=function(){try{var e=this;return function(e){if(e&&e.then)return e.then(q)}(function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){return function(e){var t=e();if(t&&t.then)return t.then(q)}((function(){if(e.query.instances.some((function(e){return e.config.enabled}))&&(!e.config.suspense||!e.query.state.isFetched)&&e.query.state.isStale&&(e.config.refetchOnMount||1===e.query.instances.length))return function(e,t){if(!t)return e&&e.then?e.then(q):Promise.resolve()}(e.query.fetch())}))}),(function(e){s.error(e)})))}catch(e){return Promise.reject(e)}},t.unsubscribe=function(e){var t=this;this.query.instances=this.query.instances.filter((function(e){return e.id!==t.id})),this.query.instances.length||(this.clearInterval(),this.query.cancel(),e||a||this.query.scheduleGarbageCollection())},t.onStateUpdate=function(e,t){var r,n,i,u,o,a,c,s,f;t.type===O.Success&&e.isSuccess&&(null==(n=(i=this.config).onSuccess)||n.call(i,e.data),null==(u=(o=this.config).onSettled)||u.call(o,e.data,null));t.type===O.Error&&e.isError&&(null==(a=(c=this.config).onError)||a.call(c,e.error),null==(s=(f=this.config).onSettled)||s.call(f,void 0,e.error));null==(r=this.stateUpdateListener)||r.call(this,e)},e}();function E(){}function F(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function C(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Q(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function M(e,t,r){if(!e.s){if(r instanceof T){if(!r.s)return void(r.o=M.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(M.bind(null,e,t),M.bind(null,e,2));e.s=t,e.v=r;var n=e.o;n&&n(e)}}var O,T=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,i=this.s;if(i){var u=1&i?t:r;if(u){try{M(n,1,u(this.v))}catch(e){M(n,2,e)}return n}return this}return this.o=function(e){try{var i=e.v;1&e.s?M(n,1,t?t(i):i):r?M(n,1,r(i)):M(n,2,i)}catch(e){M(n,2,e)}},n},e}();function I(e){return e instanceof T&&1&e.s}function L(e,t){if(e)throw t;return t}function P(e,t){try{var r=e()}catch(e){return t(!0,e)}return r&&r.then?r.then(t.bind(null,!1),t.bind(null,!0)):t(!1,r)}!function(e){e.Failed="Failed",e.MarkStale="MarkStale",e.Fetch="Fetch",e.Success="Success",e.Error="Error",e.SetState="SetState"}(O||(O={}));var j=function(){function t(t){var n,i,u,o,a,c;if(this.config=t.config,this.queryCache=t.queryCache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.notifyGlobalListeners=t.notifyGlobalListeners,this.instances=[],this.state=(n=t.config,u="function"==typeof n.initialData?n.initialData():n.initialData,o=void 0!==u,a=!n.enabled||("function"==typeof n.initialStale?n.initialStale():null!=(i=n.initialStale)?i:!o),r({},S(c=o?e.QueryStatus.Success:n.enabled?e.QueryStatus.Loading:e.QueryStatus.Idle),{error:null,isFetched:!1,isFetching:c===e.QueryStatus.Loading,failureCount:0,isStale:a,data:u,updatedAt:o?Date.now():0})),t.config.infinite){var s=t.config,f=this.state.data;void 0!==f&&void 0===this.state.canFetchMore&&(this.fetchMoreVariable=s.getFetchMore(f[f.length-1],f),this.state.canFetchMore=Boolean(this.fetchMoreVariable)),this.pageVariables||(this.pageVariables=[[].concat(this.queryKey)])}}var n=t.prototype;return n.dispatch=function(t){var n=function(t,n){switch(n.type){case O.Failed:return r({},t,{failureCount:t.failureCount+1});case O.MarkStale:return r({},t,{isStale:!0});case O.Fetch:var i=void 0!==t.data?e.QueryStatus.Success:e.QueryStatus.Loading;return r({},t,S(i),{isFetching:!0,failureCount:0});case O.Success:return r({},t,S(e.QueryStatus.Success),{data:f(n.updater,t.data),error:null,isStale:n.isStale,isFetched:!0,isFetching:!1,updatedAt:Date.now(),failureCount:0});case O.Error:return r({},t,{failureCount:t.failureCount+1,isFetched:!0,isFetching:!1,isStale:!0},!n.cancelled&&r({},S(e.QueryStatus.Error),{error:n.error,throwInErrorBoundary:!0}));case O.SetState:return f(n.updater,t);default:return t}}(this.state,t);p(this.state,n,!1)||(this.state=n,this.instances.forEach((function(e){return e.onStateUpdate(n,t)})),this.notifyGlobalListeners(this))},n.scheduleStaleTimeout=function(){var e=this;a||(this.clearStaleTimeout(),this.state.isStale||this.config.staleTime!==1/0&&(this.staleTimeout=setTimeout((function(){e.invalidate()}),this.config.staleTime)))},n.invalidate=function(){this.clearStaleTimeout(),this.queryCache.queries[this.queryHash]&&(this.state.isStale||this.dispatch({type:O.MarkStale}))},n.scheduleGarbageCollection=function(){var t=this;this.clearCacheTimeout(),this.queryCache.queries[this.queryHash]&&this.config.cacheTime!==1/0&&(this.cacheTimeout=setTimeout((function(){t.clear()}),void 0===this.state.data&&this.state.status!==e.QueryStatus.Error?0:this.config.cacheTime))},n.refetch=function(){try{var e=this;return function(e){if(e&&e.then)return e.then(E)}(F((function(){return function(e,t){if(!t)return e&&e.then?e.then(E):Promise.resolve()}(e.fetch())}),(function(e){s.error(e)})))}catch(e){return Promise.reject(e)}},n.heal=function(){this.clearCacheTimeout(),this.cancelled=null},n.cancel=function(){this.cancelled=o,this.cancelPromises&&this.cancelPromises(),delete this.promise},n.clearIntervals=function(){this.instances.forEach((function(e){e.clearInterval()}))},n.clearStaleTimeout=function(){this.staleTimeout&&(clearTimeout(this.staleTimeout),this.staleTimeout=void 0)},n.clearCacheTimeout=function(){this.cacheTimeout&&(clearTimeout(this.cacheTimeout),this.cacheTimeout=void 0)},n.clearRetryTimeout=function(){this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=void 0)},n.setState=function(e){this.dispatch({type:O.SetState,updater:e})},n.setData=function(e){var t=0===this.config.staleTime;this.dispatch({type:O.Success,updater:e,isStale:t}),t||this.scheduleStaleTimeout()},n.clear=function(){this.clearStaleTimeout(),this.clearCacheTimeout(),this.clearRetryTimeout(),this.clearIntervals(),this.cancel(),delete this.queryCache.queries[this.queryHash],this.notifyGlobalListeners(this)},n.subscribe=function(e){var t=new w(this,e);return this.instances.push(t),this.heal(),t},n.tryFetchData=function(e,t){try{var r=this;return F((function(){var n=e.apply(void 0,r.config.queryFnParamsFilter(t));return r.cancelPromises=function(){var e;return null==(e=n)||null==e.cancel?void 0:e.cancel()},C(n,(function(e){if(delete r.shouldContinueRetryOnFocus,delete r.cancelPromises,r.cancelled)throw r.cancelled;return e}))}),(function(n){var i,u,o=!1;if(delete r.cancelPromises,r.cancelled)throw r.cancelled;return i=function(e){if(o)return e;throw n},(u=function(){if(!0===r.config.retry||r.state.failureCount<r.config.retry||"function"==typeof r.config.retry&&r.config.retry(r.state.failureCount,n)){if(r.dispatch({type:O.Failed}),!y())return r.shouldContinueRetryOnFocus=!0,o=!0,new Promise(c);delete r.shouldContinueRetryOnFocus;var i=f(r.config.retryDelay,r.state.failureCount);return o=!0,C(new Promise((function(n,u){r.retryTimeout=setTimeout(Q((function(){return r.cancelled?u(r.cancelled):F((function(){return C(r.tryFetchData(e,t),(function(e){if(r.cancelled)return u(r.cancelled);n(e)}))}),(function(e){if(r.cancelled)return u(r.cancelled);u(e)}))})),i)})))}}())&&u.then?u.then(i):i(u)}))}catch(e){return Promise.reject(e)}},n.fetch=function(e){try{var t=this,n=t.config.queryFn;if(!n)return;if(t.promise)return t.promise;if(t.config.infinite){var i=t.config,u=t.state.data,o=null==e?void 0:e.fetchMore,a=n;n=Q((function(){var e,r,n=!1,u=[],o=t.pageVariables?[].concat(t.pageVariables):[],c=[];return e=function(e,t){var r;do{var n=e();if(n&&n.then){if(!I(n)){r=!0;break}n=n.v}var i=t();if(I(i)&&(i=i.v),!i)return n}while(!i.then);var u=new T,o=M.bind(null,u,2);return(r?n.then(a):i.then(c)).then(void 0,o),u;function a(r){for(n=r;I(i=t())&&(i=i.v),i;){if(i.then)return void i.then(c).then(void 0,o);if((n=e())&&n.then){if(!I(n))return void n.then(a).then(void 0,o);n=n.v}}M(u,1,n)}function c(r){if(r){do{if((n=e())&&n.then){if(!I(n))return void n.then(a).then(void 0,o);n=n.v}if(I(r=t())&&(r=r.v),!r)return void M(u,1,n)}while(!r.then);r.then(c).then(void 0,o)}else M(u,1,n)}}((function(){var e=o.shift();return function(e){var t=e();if(t&&t.then)return t.then(E)}((function(){if(u.length){var t=i.getFetchMore(u[u.length-1],u);if(!t)return void(n=!0);var r=[].concat(e.slice(0,-1),[t]),o=u.push;return C(a.apply(void 0,r),(function(e){o.call(u,e),c.push(r)}))}var s=u.push;return C(a.apply(void 0,e),(function(t){s.call(u,t),c.push(e)}))}))}),(function(){return!n&&!!o.length})),r=function(){return t.fetchMoreVariable=i.getFetchMore(u[u.length-1],u),t.state.canFetchMore=Boolean(t.fetchMoreVariable),t.pageVariables=c,u},e&&e.then?e.then(r):r(e)})),o&&(n=Q((function(){for(var e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return P((function(){var e=o.fetchMoreVariable,c=o.previous;t.setState((function(e){return r({},e,{isFetchingMore:c?"previous":"next"})}));var s=[].concat(n,[e]);return t.pageVariables?t.pageVariables[c?"unshift":"push"](s):t.pageVariables=[s],C(a.apply(void 0,s),(function(e){var r;return r=u?c?[e].concat(u):[].concat(u,[e]):[e],t.fetchMoreVariable=i.getFetchMore(e,r),t.state.canFetchMore=Boolean(t.fetchMoreVariable),r}))}),(function(e,n){return t.setState((function(e){return r({},e,{isFetchingMore:!1})})),L(e,n)}))})))}return t.promise=Q((function(){return t.cancelled=null,F((function(){return t.dispatch({type:O.Fetch}),C(t.tryFetchData(n,t.queryKey),(function(e){return t.setData((function(r){return t.config.isDataEqual(r,e)?r:e})),delete t.promise,e}))}),(function(e){if(t.dispatch({type:O.Error,cancelled:e===t.cancelled,error:e}),delete t.promise,e!==t.cancelled)throw e}))}))(),t.promise}catch(e){return Promise.reject(e)}},n.fetchMore=function(e,t){return this.fetch({fetchMore:{fetchMoreVariable:null!=e?e:this.fetchMoreVariable,previous:(null==t?void 0:t.previous)||!1}})},t}();function R(){}function D(e,t){if(!t)return e&&e.then?e.then(R):Promise.resolve()}function k(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}function A(e,t){var r=e();return r&&r.then?r.then(t):t(r)}var V=function(){function e(e){this.config=e||{},this.globalListeners=[],this.configRef=this.config.defaultConfig?{current:{shared:r({},m.current.shared,this.config.defaultConfig.shared),queries:r({},m.current.queries,this.config.defaultConfig.queries),mutations:r({},m.current.mutations,this.config.defaultConfig.mutations)}}:m,this.queries={},this.isFetching=0}var t=e.prototype;return t.notifyGlobalListeners=function(e){var t=this;this.isFetching=Object.values(this.queries).reduce((function(e,t){return t.state.isFetching?e+1:e}),0),this.globalListeners.forEach((function(r){return r(t,e)}))},t.getDefaultConfig=function(){return this.configRef.current},t.subscribe=function(e){var t=this;return this.globalListeners.push(e),function(){t.globalListeners.splice(t.globalListeners.indexOf(e),1)}},t.clear=function(e){Object.values(this.queries).forEach((function(e){return e.clear()})),this.queries={},(null==e?void 0:e.notify)&&this.notifyGlobalListeners()},t.getQueries=function(e,t){if(!0===e)return Object.values(this.queries);var r;if("function"==typeof e)r=e;else{var n=this.configRef.current.queries.queryKeySerializerFn(e),i=n[0],u=n[1];r=function(e){return(null==t?void 0:t.exact)?e.queryHash===i:v(e.queryKey,u)}}return Object.values(this.queries).filter(r)},t.getQuery=function(e){return this.getQueries(e,{exact:!0})[0]},t.getQueryData=function(e){var t;return null==(t=this.getQuery(e))?void 0:t.state.data},t.removeQueries=function(e,t){this.getQueries(e,t).forEach((function(e){return e.clear()}))},t.cancelQueries=function(e,t){this.getQueries(e,t).forEach((function(e){return e.cancel()}))},t.invalidateQueries=function(e,t){try{var r=this,n=t||{},i=n.refetchActive,u=void 0===i||i,o=n.refetchInactive,a=void 0!==o&&o,c=n.throwOnError;return k((function(){return D(Promise.all(r.getQueries(e,t).map((function(e){if(e.instances.length){if(u&&e.instances.some((function(e){return e.config.enabled})))return e.fetch()}else if(a)return e.fetch();return e.invalidate()}))))}),(function(e){if(c)throw e}))}catch(e){return Promise.reject(e)}},t.resetErrorBoundaries=function(){this.getQueries(!0).forEach((function(e){e.state.throwInErrorBoundary=!1}))},t.buildQuery=function(e,t){var n=this;void 0===t&&(t={});var i,u=r({},this.configRef.current.shared,this.configRef.current.queries,t),o=u.queryKeySerializerFn(e),c=o[0],s=o[1];return this.queries[c]&&((i=this.queries[c]).config=u),i||(i=new j({queryCache:this,queryKey:s,queryHash:c,config:u,notifyGlobalListeners:function(e){n.notifyGlobalListeners(e)}}),!a&&i.state.data&&(i.scheduleStaleTimeout(),i.heal(),i.scheduleGarbageCollection()),this.config.frozen||(this.queries[c]=i,a?this.notifyGlobalListeners():setTimeout((function(){n.notifyGlobalListeners()})))),i},t.prefetchQuery=function(){try{for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];d(n[1])&&(n[1].hasOwnProperty("throwOnError")||n[1].hasOwnProperty("force"))&&(n[3]=n[1],n[1]=void 0,n[2]=void 0);var u=g(n),o=u[0],a=u[1],c=u[2],f=r({retry:!1},a);return k((function(){var t=e.buildQuery(o,f);return A((function(){if((null==c?void 0:c.force)||t.state.isStale)return D(t.fetch())}),(function(){return t.state.data}))}),(function(e){if(null==c?void 0:c.throwOnError)throw e;s.error(e)}))}catch(e){return Promise.reject(e)}},t.setQueryData=function(e,t,r){void 0===r&&(r={});var n=this.getQuery(e);n||(n=this.buildQuery(e,r)),n.setData(t)},e}(),B=G({frozen:a}),x=[B];function G(e){return new V(e)}var K,H=function(){y()&&(void 0===navigator.onLine||navigator.onLine)&&x.forEach((function(e){return e.invalidateQueries((function(e){return!!e.instances.length&&(!!e.instances.some((function(e){return e.config.enabled}))&&(!!e.state.isStale&&(e.shouldContinueRetryOnFocus&&delete e.promise,Boolean(e.config.refetchOnWindowFocus))))})).catch(s.error)}))};function z(e){K&&K(),K=e(H)}z((function(e){var t;if(!a&&(null==(t=window)?void 0:t.addEventListener))return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),function(){window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}));var U=t.createContext(B),J=function(){return t.useContext(U)},N=t.createContext(void 0);function W(){var e=J();return t.useContext(N)||e.getDefaultConfig()||m.current}var _;function X(e){var r=t.useRef(e);return r.current=e,t.useCallback((function(){return r.current}),[])}function Y(e){var r=t.useRef(!1);return t[a?"useEffect":"useLayoutEffect"]((function(){return r.current=!0,function(){r.current=!1}}),[]),t.useCallback((function(){return r.current?e.apply(void 0,arguments):void 0}),[e])}function Z(){var e=Y(t.useState()[1]);return t.useCallback((function(){return e({})}),[e])}function $(t,n){var i=n.error,u=n.query,o=u.state;if(t.suspense||t.useErrorBoundary){if(o.status===e.QueryStatus.Error&&o.throwInErrorBoundary)throw i;if(t.suspense&&o.status!==e.QueryStatus.Success&&t.enabled){var a=u.subscribe();throw a.updateConfig(r({},t,{onSettled:function(e,r){a.unsubscribe(!0),null==t.onSettled||t.onSettled(e,r)}})),u.fetch()}}}function ee(e,t,r){return r?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}!function(e){e.Reset="Reset",e.Loading="Loading",e.Resolve="Resolve",e.Reject="Reject"}(_||(_={}));var te=function(){return r({},S(e.QueryStatus.Idle),{data:void 0,error:null})};function re(t,n){switch(n.type){case _.Reset:return te();case _.Loading:return r({},S(e.QueryStatus.Loading),{data:void 0,error:null});case _.Resolve:return r({},S(e.QueryStatus.Success),{data:n.data,error:null});case _.Reject:return r({},S(e.QueryStatus.Error),{data:void 0,error:n.error});default:return t}}function ne(e,r){void 0===r&&(r={});var n=Z(),i=J().buildQuery(e,r),u=i.state,o=t.useRef();t.useEffect((function(){var e=i.subscribe((function(){n()}));return o.current=e,function(){return e.unsubscribe()}}),[i,n]),t.useEffect((function(){var e;null==(e=o.current)||e.updateConfig(r)}));var a=Boolean(r.enabled);t.useEffect((function(){var e;null==(e=o.current)||e.run()}),[a,i]);var c=t.useMemo((function(){return i.clear.bind(i)}),[i]),s=t.useMemo((function(){return i.refetch.bind(i)}),[i]);return{clear:c,error:u.error,failureCount:u.failureCount,isError:u.isError,isFetching:u.isFetching,isIdle:u.isIdle,isLoading:u.isLoading,isStale:u.isStale,isSuccess:u.isSuccess,query:i,refetch:s,status:u.status,updatedAt:u.updatedAt}}function ie(e){var t=W(),n=g(e),i=n[0],u=n[1],o=n[2];return[i,r({},t.shared,t.queries,u),o]}e.ReactQueryCacheProvider=function(e){var r=e.queryCache,n=e.children,i=t.useMemo((function(){return r||G()}),[r]);return t.useEffect((function(){return x.push(i),function(){var e=x.indexOf(i);e>-1&&x.splice(e,1),null==r&&i.clear({notify:!1})}}),[i,r]),t.createElement(U.Provider,{value:i},n)},e.ReactQueryConfigProvider=function(e){var n=e.config,i=e.children,u=W(),o=t.useContext(N),a=t.useMemo((function(){var e=n.shared,t=void 0===e?{}:e,i=n.queries,o=void 0===i?{}:i,a=n.mutations,c=void 0===a?{}:a,s=u.shared,f=void 0===s?{}:s,l=u.queries,h=void 0===l?{}:l,d=u.mutations,v=void 0===d?{}:d;return{shared:r({},f,t),queries:r({},h,o),mutations:r({},v,c)}}),[n,u]);return t.useEffect((function(){return function(){m.current=r({},u||b)}}),[u]),o||(m.current=a),t.createElement(N.Provider,{value:a},i)},e.deepIncludes=v,e.makeQueryCache=G,e.queryCache=B,e.queryCaches=x,e.setConsole=function(e){s=e},e.setFocusHandler=z,e.stableStringify=h,e.useInfiniteQuery=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var u=ie(n),o=u[0],a=u[1];a.infinite=!0;var c=ne(o,a),s=c.query,f=c.query.state;$(a,c);var l=t.useMemo((function(){return s.fetchMore.bind(s)}),[s]);return r({},c,{data:f.data,canFetchMore:f.canFetchMore,fetchMore:l,isFetching:f.isFetching,isFetchingMore:f.isFetchingMore})},e.useIsFetching=function(){var e=J(),r=Z(),n=e.isFetching,i=X(n);return t.useEffect((function(){return e.subscribe((function(e){i()!==e.isFetching&&r()}))}),[i,e,r]),n},e.useMutation=function(e,n){void 0===n&&(n={});var i,o=t.useReducer(re,null,te),a=o[0],c=Y(o[1]),f=X(e),l=W(),h=X(r({},l.shared,l.mutations,n)),d=t.useRef(),v=t.useCallback((i=function(e,t){void 0===t&&(t={});var r=h(),n=u();d.current=n;var i,o=function(){return d.current===n};return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){return c({type:_.Loading}),ee(null==r.onMutate?void 0:r.onMutate(e),(function(n){return i=n,ee(f()(e),(function(n){return o()&&c({type:_.Resolve,data:n}),ee(null==r.onSuccess?void 0:r.onSuccess(n,e),(function(){return ee(null==t.onSuccess?void 0:t.onSuccess(n,e),(function(){return ee(null==r.onSettled?void 0:r.onSettled(n,null,e),(function(){return ee(null==t.onSettled?void 0:t.onSettled(n,null,e),(function(){return n}))}))}))}))}))}))}),(function(n){return s.error(n),ee(null==r.onError?void 0:r.onError(n,e,i),(function(){return ee(null==t.onError?void 0:t.onError(n,e,i),(function(){return ee(null==r.onSettled?void 0:r.onSettled(void 0,n,e,i),(function(){return ee(null==t.onSettled?void 0:t.onSettled(void 0,n,e,i),(function(){var e;if(o()&&c({type:_.Reject,error:n}),null!=(e=t.throwOnError)?e:r.throwOnError)throw n}))}))}))}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(e){return Promise.reject(e)}}),[c,h,f]),y=t.useCallback((function(){c({type:_.Reset})}),[c]);return t.useEffect((function(){var e=h(),t=e.suspense,r=e.useErrorBoundary;if((null!=r?r:t)&&a.error)throw a.error}),[h,a.error]),[v,r({},a,{reset:y})]},e.usePaginatedQuery=function(){for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];var o=ie(i),a=o[0],c=o[1],s=t.useRef();void 0!==s.current&&delete c.initialData;var f=ne(a,c);f.query.config.enabled||(s.current=void 0);var l=f.query.state,h=l.data,d=l.status;t.useEffect((function(){d===e.QueryStatus.Success&&void 0!==h&&(s.current=h)}),[h,d]);var v=h;if(void 0===v&&(v=s.current),void 0!==v){var y=S(e.QueryStatus.Success);Object.assign(f.query.state,y),Object.assign(f,y)}return $(c,f),r({},f,{resolvedData:v,latestData:h})},e.useQuery=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=ie(t),u=i[0],o=i[1],a=ne(u,o);return $(o,a),r({},a,{data:a.query.state.data})},e.useQueryCache=J,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-query.production.min.js.map
