{"version":3,"file":"react-query.development.js","sources":["../src/core/types.ts","../src/core/utils.ts","../src/core/config.ts","../src/core/queryInstance.ts","../src/core/query.ts","../src/core/queryCache.ts","../src/core/setFocusHandler.ts","../src/react/ReactQueryCacheProvider.tsx","../src/react/ReactQueryConfigProvider.tsx","../src/react/utils.ts","../src/react/useIsFetching.ts","../src/react/useMutation.ts","../src/react/useBaseQuery.ts","../src/react/useQueryArgs.ts","../src/react/useQuery.ts","../src/react/usePaginatedQuery.ts","../src/react/useInfiniteQuery.ts"],"sourcesContent":["import { Query, FetchMoreOptions } from './query'\n\nexport type QueryKeyObject =\n  | object\n  | { [key: string]: QueryKey }\n  | { [key: number]: QueryKey }\n\nexport type QueryKeyPrimitive = string | boolean | number | null | undefined\n\nexport type QueryKeyWithoutObjectAndArray = QueryKeyPrimitive\n\nexport type QueryKeyWithoutObject =\n  | QueryKeyWithoutObjectAndArray\n  | readonly QueryKey[]\n\nexport type QueryKeyWithoutArray =\n  | QueryKeyWithoutObjectAndArray\n  | QueryKeyObject\n\nexport type QueryKey = QueryKeyWithoutObject | QueryKeyObject\n\nexport type ArrayQueryKey = QueryKey[]\n\nexport type QueryFunction<TResult> = (\n  ...args: any[]\n) => TResult | Promise<TResult>\n\n// The tuple variants are only to infer types in the public API\nexport type TupleQueryKey = readonly [QueryKey, ...QueryKey[]]\n\nexport type TupleQueryFunction<TResult, TKey extends TupleQueryKey> = (\n  ...args: TKey\n) => TResult | Promise<TResult>\n\nexport type InitialDataFunction<TResult> = () => TResult | undefined\n\nexport type InitialStaleFunction = () => boolean\n\nexport type QueryKeySerializerFunction = (\n  queryKey: QueryKey\n) => [string, QueryKey[]]\n\nexport interface BaseQueryConfig<TResult, TError = unknown> {\n  /**\n   * Set this to `false` to disable automatic refetching when the query mounts or changes query keys.\n   * To refetch the query, use the `refetch` method returned from the `useQuery` instance.\n   */\n  enabled?: boolean | unknown\n  /**\n   * If `false`, failed queries will not retry by default.\n   * If `true`, failed queries will retry infinitely., failureCount: num\n   * If set to an integer number, e.g. 3, failed queries will retry until the failed query count meets that number.\n   * If set to a function `(failureCount, error) => boolean` failed queries will retry until the function returns false.\n   */\n  retry?: boolean | number | ((failureCount: number, error: TError) => boolean)\n  retryDelay?: number | ((retryAttempt: number) => number)\n  staleTime?: number\n  cacheTime?: number\n  refetchInterval?: false | number\n  refetchIntervalInBackground?: boolean\n  refetchOnWindowFocus?: boolean\n  refetchOnMount?: boolean\n  onSuccess?: (data: TResult) => void\n  onError?: (err: TError) => void\n  onSettled?: (data: TResult | undefined, error: TError | null) => void\n  isDataEqual?: (oldData: unknown, newData: unknown) => boolean\n  useErrorBoundary?: boolean\n  queryFn?: QueryFunction<TResult>\n  queryKeySerializerFn?: QueryKeySerializerFunction\n  queryFnParamsFilter?: (args: ArrayQueryKey) => ArrayQueryKey\n  suspense?: boolean\n  initialData?: TResult | InitialDataFunction<TResult>\n  initialStale?: boolean | InitialStaleFunction\n  infinite?: true\n}\n\nexport interface QueryConfig<TResult, TError = unknown>\n  extends BaseQueryConfig<TResult, TError> {}\n\nexport interface PaginatedQueryConfig<TResult, TError = unknown>\n  extends BaseQueryConfig<TResult, TError> {}\n\nexport interface InfiniteQueryConfig<TResult, TError = unknown>\n  extends BaseQueryConfig<TResult[], TError> {\n  getFetchMore: (lastPage: TResult, allPages: TResult[]) => unknown\n}\n\nexport type IsFetchingMoreValue = 'previous' | 'next' | false\n\nexport enum QueryStatus {\n  Idle = 'idle',\n  Loading = 'loading',\n  Error = 'error',\n  Success = 'success',\n}\n\nexport interface QueryResultBase<TResult, TError = unknown> {\n  status: QueryStatus\n  error: TError | null\n  isLoading: boolean\n  isSuccess: boolean\n  isError: boolean\n  isIdle: boolean\n  isFetching: boolean\n  isStale: boolean\n  failureCount: number\n  query: Query<TResult, TError>\n  updatedAt: number\n  refetch: () => Promise<void>\n  clear: () => void\n}\n\nexport interface QueryResult<TResult, TError = unknown>\n  extends QueryResultBase<TResult, TError> {\n  data: TResult | undefined\n}\n\nexport interface PaginatedQueryResult<TResult, TError = unknown>\n  extends QueryResultBase<TResult, TError> {\n  resolvedData: TResult | undefined\n  latestData: TResult | undefined\n}\n\nexport interface InfiniteQueryResult<TResult, TError = unknown>\n  extends QueryResultBase<TResult[], TError> {\n  data: TResult[] | undefined\n  isFetchingMore?: IsFetchingMoreValue\n  canFetchMore: boolean | undefined\n  fetchMore: (\n    fetchMoreVariable?: unknown,\n    options?: FetchMoreOptions\n  ) => Promise<TResult[] | undefined> | undefined\n}\n\nexport interface MutateConfig<\n  TResult,\n  TError = unknown,\n  TVariables = unknown,\n  TSnapshot = unknown\n> {\n  onSuccess?: (data: TResult, variables: TVariables) => Promise<void> | void\n  onError?: (\n    error: TError,\n    variables: TVariables,\n    snapshotValue: TSnapshot\n  ) => Promise<void> | void\n  onSettled?: (\n    data: undefined | TResult,\n    error: TError | null,\n    variables: TVariables,\n    snapshotValue?: TSnapshot\n  ) => Promise<void> | void\n  throwOnError?: boolean\n}\n\nexport interface MutationConfig<\n  TResult,\n  TError = unknown,\n  TVariables = unknown,\n  TSnapshot = unknown\n> extends MutateConfig<TResult, TError, TVariables, TSnapshot> {\n  onMutate?: (variables: TVariables) => Promise<TSnapshot> | TSnapshot\n  useErrorBoundary?: boolean\n  suspense?: boolean\n}\n\nexport type MutationFunction<TResult, TVariables = unknown> = (\n  variables: TVariables\n) => Promise<TResult>\n\nexport type MutateFunction<\n  TResult,\n  TError = unknown,\n  TVariables = unknown,\n  TSnapshot = unknown\n> = (\n  variables?: TVariables,\n  config?: MutateConfig<TResult, TError, TVariables, TSnapshot>\n) => Promise<TResult | undefined>\n\nexport type MutationResultPair<TResult, TError, TVariables, TSnapshot> = [\n  MutateFunction<TResult, TError, TVariables, TSnapshot>,\n  MutationResult<TResult, TError>\n]\n\nexport interface MutationResult<TResult, TError = unknown> {\n  status: QueryStatus\n  data: TResult | undefined\n  error: TError | null\n  isIdle: boolean\n  isLoading: boolean\n  isSuccess: boolean\n  isError: boolean\n  reset: () => void\n}\n\nexport interface ReactQueryConfig<TResult = unknown, TError = unknown> {\n  queries?: ReactQueryQueriesConfig<TResult, TError>\n  shared?: ReactQuerySharedConfig\n  mutations?: ReactQueryMutationsConfig<TResult, TError>\n}\n\nexport interface ReactQuerySharedConfig {\n  suspense?: boolean\n}\n\nexport interface ReactQueryQueriesConfig<TResult, TError>\n  extends BaseQueryConfig<TResult, TError> {}\n\nexport interface ReactQueryMutationsConfig<\n  TResult,\n  TError = unknown,\n  TVariables = unknown,\n  TSnapshot = unknown\n> extends MutationConfig<TResult, TError, TVariables, TSnapshot> {}\n","import { QueryConfig, QueryStatus, QueryKey, QueryFunction } from './types'\n\n// TYPES\n\nexport type DataUpdateFunction<TInput, TOutput> = (input: TInput) => TOutput\n\nexport type Updater<TInput, TOutput> =\n  | TOutput\n  | DataUpdateFunction<TInput, TOutput>\n\ntype ConsoleFunction = (...args: any[]) => void\n\nexport interface ConsoleObject {\n  log: ConsoleFunction\n  warn: ConsoleFunction\n  error: ConsoleFunction\n}\n\n// UTILS\n\nlet _uid = 0\nexport const uid = () => _uid++\nexport const cancelledError = {}\nexport const globalStateListeners = []\nexport const isServer = typeof window === 'undefined'\nexport function noop(): void {\n  return void 0\n}\nexport function identity<T>(d: T): T {\n  return d\n}\nexport let Console: ConsoleObject = console || {\n  error: noop,\n  warn: noop,\n  log: noop,\n}\n\nexport function setConsole(c: ConsoleObject) {\n  Console = c\n}\n\nexport function functionalUpdate<TInput, TOutput>(\n  updater: Updater<TInput, TOutput>,\n  input: TInput\n): TOutput {\n  return typeof updater === 'function'\n    ? (updater as DataUpdateFunction<TInput, TOutput>)(input)\n    : updater\n}\n\nfunction stableStringifyReplacer(_key: string, value: any): unknown {\n  if (typeof value === 'function') {\n    throw new Error('Cannot stringify non JSON value')\n  }\n\n  if (isObject(value)) {\n    return Object.keys(value)\n      .sort()\n      .reduce((result, key) => {\n        result[key] = value[key]\n        return result\n      }, {} as any)\n  }\n\n  return value\n}\n\nexport function stableStringify(value: any): string {\n  return JSON.stringify(value, stableStringifyReplacer)\n}\n\nexport function isObject(a: unknown): boolean {\n  return a && typeof a === 'object' && !Array.isArray(a)\n}\n\nexport function deepIncludes(a: any, b: any): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(key => !deepIncludes(a[key], b[key]))\n  }\n\n  return false\n}\n\nexport function isDocumentVisible(): boolean {\n  // document global can be unavailable in react native\n  if (typeof document === 'undefined') {\n    return true\n  }\n  return [undefined, 'visible', 'prerender'].includes(document.visibilityState)\n}\n\nexport function isOnline(): boolean {\n  return navigator.onLine === undefined || navigator.onLine\n}\n\nexport function getQueryArgs<TResult, TError, TOptions = undefined>(\n  args: any[]\n): [QueryKey, QueryConfig<TResult, TError>, TOptions] {\n  let queryKey: QueryKey\n  let queryFn: QueryFunction<TResult> | undefined\n  let config: QueryConfig<TResult, TError> | undefined\n  let options: TOptions\n\n  if (isObject(args[0])) {\n    queryKey = args[0].queryKey\n    queryFn = args[0].queryFn\n    config = args[0].config\n    options = args[1]\n  } else if (isObject(args[1])) {\n    queryKey = args[0]\n    config = args[1]\n    options = args[2]\n  } else {\n    queryKey = args[0]\n    queryFn = args[1]\n    config = args[2]\n    options = args[3]\n  }\n\n  config = config || {}\n\n  if (queryFn) {\n    config = { ...config, queryFn }\n  }\n\n  return [queryKey, config, options]\n}\n\nexport function deepEqual(a: any, b: any): boolean {\n  return equal(a, b, true)\n}\n\nexport function shallowEqual(a: any, b: any): boolean {\n  return equal(a, b, false)\n}\n\n// This deep-equal is directly based on https://github.com/epoberezkin/fast-deep-equal.\n// The parts for comparing any non-JSON-supported values has been removed\nfunction equal(a: any, b: any, deep: boolean, depth = 0): boolean {\n  if (a === b) return true\n\n  if (\n    (deep || !depth) &&\n    a &&\n    b &&\n    typeof a == 'object' &&\n    typeof b == 'object'\n  ) {\n    let length, i\n    if (Array.isArray(a)) {\n      length = a.length\n      // eslint-disable-next-line eqeqeq\n      if (length != b.length) return false\n      for (i = length; i-- !== 0; )\n        if (!equal(a[i], b[i], deep, depth + 1)) return false\n      return true\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf)\n      return a.valueOf() === b.valueOf()\n\n    const keys = Object.keys(a)\n    length = keys.length\n    if (length !== Object.keys(b).length) return false\n\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\n    for (i = length; i-- !== 0; ) {\n      const key = keys[i]\n\n      if (!equal(a[key], b[key], deep, depth + 1)) return false\n    }\n\n    return true\n  }\n\n  // true if both NaN, false otherwise\n  // eslint-disable-next-line no-self-compare\n  return a !== a && b !== b\n}\n\nexport function getStatusProps<T extends QueryStatus>(status: T) {\n  return {\n    status,\n    isLoading: status === QueryStatus.Loading,\n    isSuccess: status === QueryStatus.Success,\n    isError: status === QueryStatus.Error,\n    isIdle: status === QueryStatus.Idle,\n  }\n}\n","import { stableStringify, identity, deepEqual } from './utils'\nimport {\n  ArrayQueryKey,\n  QueryKey,\n  QueryKeySerializerFunction,\n  ReactQueryConfig,\n} from './types'\n\n// TYPES\n\nexport interface ReactQueryConfigRef {\n  current: ReactQueryConfig\n}\n\n// CONFIG\n\nexport const defaultQueryKeySerializerFn: QueryKeySerializerFunction = (\n  queryKey: QueryKey\n): [string, ArrayQueryKey] => {\n  try {\n    let arrayQueryKey: ArrayQueryKey = Array.isArray(queryKey)\n      ? queryKey\n      : [queryKey]\n    const queryHash = stableStringify(arrayQueryKey)\n    arrayQueryKey = JSON.parse(queryHash)\n    return [queryHash, arrayQueryKey]\n  } catch {\n    throw new Error('A valid query key is required!')\n  }\n}\n\nexport const DEFAULT_CONFIG: ReactQueryConfig = {\n  shared: {\n    suspense: false,\n  },\n  queries: {\n    queryKeySerializerFn: defaultQueryKeySerializerFn,\n    enabled: true,\n    retry: 3,\n    retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n    staleTime: 0,\n    cacheTime: 5 * 60 * 1000,\n    refetchOnWindowFocus: true,\n    refetchInterval: false,\n    queryFnParamsFilter: identity,\n    refetchOnMount: true,\n    isDataEqual: deepEqual,\n    useErrorBoundary: false,\n  },\n  mutations: {\n    throwOnError: false,\n    useErrorBoundary: false,\n  },\n}\n\nexport const defaultConfigRef: ReactQueryConfigRef = {\n  current: DEFAULT_CONFIG,\n}\n","import { uid, isServer, isDocumentVisible, Console } from './utils'\nimport { Query, QueryState, Action, ActionType } from './query'\nimport { BaseQueryConfig } from './types'\n\n// TYPES\n\nexport type OnStateUpdateFunction<TResult, TError> = (\n  state: QueryState<TResult, TError>\n) => void\n\n// CLASS\n\nexport class QueryInstance<TResult, TError> {\n  id: number\n  config: BaseQueryConfig<TResult, TError>\n\n  private query: Query<TResult, TError>\n  private refetchIntervalId?: number\n  private stateUpdateListener?: OnStateUpdateFunction<TResult, TError>\n\n  constructor(\n    query: Query<TResult, TError>,\n    onStateUpdate?: OnStateUpdateFunction<TResult, TError>\n  ) {\n    this.id = uid()\n    this.stateUpdateListener = onStateUpdate\n    this.query = query\n    this.config = {}\n  }\n\n  clearInterval(): void {\n    if (this.refetchIntervalId) {\n      clearInterval(this.refetchIntervalId)\n      this.refetchIntervalId = undefined\n    }\n  }\n\n  updateConfig(config: BaseQueryConfig<TResult, TError>): void {\n    const oldConfig = this.config\n\n    // Update the config\n    this.config = config\n\n    if (!isServer) {\n      if (oldConfig?.refetchInterval === config.refetchInterval) {\n        return\n      }\n\n      this.query.clearIntervals()\n\n      const minInterval = Math.min(\n        ...this.query.instances.map(d => d.config.refetchInterval || Infinity)\n      )\n\n      if (\n        !this.refetchIntervalId &&\n        minInterval > 0 &&\n        minInterval < Infinity\n      ) {\n        this.refetchIntervalId = setInterval(() => {\n          if (\n            this.query.instances.some(d => d.config.enabled) &&\n            (isDocumentVisible() ||\n              this.query.instances.some(\n                d => d.config.refetchIntervalInBackground\n              ))\n          ) {\n            this.query.fetch()\n          }\n        }, minInterval)\n      }\n    }\n  }\n\n  async run(): Promise<void> {\n    try {\n      // Perform the refetch for this query if necessary\n      if (\n        this.query.instances.some(d => d.config.enabled) && // Don't auto refetch if disabled\n        !(this.config.suspense && this.query.state.isFetched) && // Don't refetch if in suspense mode and the data is already fetched\n        this.query.state.isStale && // Only refetch if stale\n        (this.config.refetchOnMount || this.query.instances.length === 1)\n      ) {\n        await this.query.fetch()\n      }\n    } catch (error) {\n      Console.error(error)\n    }\n  }\n\n  unsubscribe(preventGC?: boolean): void {\n    this.query.instances = this.query.instances.filter(d => d.id !== this.id)\n\n    if (!this.query.instances.length) {\n      this.clearInterval()\n      this.query.cancel()\n\n      if (!preventGC && !isServer) {\n        // Schedule garbage collection\n        this.query.scheduleGarbageCollection()\n      }\n    }\n  }\n\n  onStateUpdate(\n    state: QueryState<TResult, TError>,\n    action: Action<TResult, TError>\n  ): void {\n    if (action.type === ActionType.Success && state.isSuccess) {\n      this.config.onSuccess?.(state.data!)\n      this.config.onSettled?.(state.data!, null)\n    }\n\n    if (action.type === ActionType.Error && state.isError) {\n      this.config.onError?.(state.error!)\n      this.config.onSettled?.(undefined, state.error!)\n    }\n\n    this.stateUpdateListener?.(state)\n  }\n}\n","import {\n  isServer,\n  functionalUpdate,\n  cancelledError,\n  isDocumentVisible,\n  noop,\n  Console,\n  getStatusProps,\n  shallowEqual,\n  Updater,\n} from './utils'\nimport { QueryInstance, OnStateUpdateFunction } from './queryInstance'\nimport {\n  ArrayQueryKey,\n  InfiniteQueryConfig,\n  InitialDataFunction,\n  IsFetchingMoreValue,\n  QueryConfig,\n  QueryFunction,\n  QueryStatus,\n} from './types'\nimport { QueryCache } from './queryCache'\n\n// TYPES\n\ninterface QueryInitConfig<TResult, TError> {\n  queryCache: QueryCache\n  queryKey: ArrayQueryKey\n  queryHash: string\n  config: QueryConfig<TResult, TError>\n  notifyGlobalListeners: (query: Query<TResult, TError>) => void\n}\n\nexport interface QueryState<TResult, TError> {\n  canFetchMore?: boolean\n  data?: TResult\n  error: TError | null\n  failureCount: number\n  isError: boolean\n  isFetched: boolean\n  isFetching: boolean\n  isFetchingMore?: IsFetchingMoreValue\n  isIdle: boolean\n  isLoading: boolean\n  isStale: boolean\n  isSuccess: boolean\n  status: QueryStatus\n  throwInErrorBoundary?: boolean\n  updatedAt: number\n}\n\ninterface FetchOptions {\n  fetchMore?: FetchMoreOptions\n}\n\nexport interface FetchMoreOptions {\n  fetchMoreVariable?: unknown\n  previous: boolean\n}\n\nexport enum ActionType {\n  Failed = 'Failed',\n  MarkStale = 'MarkStale',\n  Fetch = 'Fetch',\n  Success = 'Success',\n  Error = 'Error',\n  SetState = 'SetState',\n}\n\ninterface FailedAction {\n  type: ActionType.Failed\n}\n\ninterface MarkStaleAction {\n  type: ActionType.MarkStale\n}\n\ninterface FetchAction {\n  type: ActionType.Fetch\n}\n\ninterface SuccessAction<TResult> {\n  type: ActionType.Success\n  updater: Updater<TResult | undefined, TResult>\n  isStale: boolean\n}\n\ninterface ErrorAction<TError> {\n  type: ActionType.Error\n  cancelled: boolean\n  error: TError\n}\n\ninterface SetStateAction<TResult, TError> {\n  type: ActionType.SetState\n  updater: Updater<QueryState<TResult, TError>, QueryState<TResult, TError>>\n}\n\nexport type Action<TResult, TError> =\n  | ErrorAction<TError>\n  | FailedAction\n  | FetchAction\n  | MarkStaleAction\n  | SetStateAction<TResult, TError>\n  | SuccessAction<TResult>\n\n// CLASS\n\nexport class Query<TResult, TError> {\n  queryCache: QueryCache\n  queryKey: ArrayQueryKey\n  queryHash: string\n  config: QueryConfig<TResult, TError>\n  instances: QueryInstance<TResult, TError>[]\n  state: QueryState<TResult, TError>\n  shouldContinueRetryOnFocus?: boolean\n  promise?: Promise<TResult | undefined>\n\n  private fetchMoreVariable?: unknown\n  private pageVariables?: ArrayQueryKey[]\n  private cacheTimeout?: number\n  private retryTimeout?: number\n  private staleTimeout?: number\n  private cancelPromises?: () => void\n  private cancelled?: typeof cancelledError | null\n  private notifyGlobalListeners: (query: Query<TResult, TError>) => void\n\n  constructor(init: QueryInitConfig<TResult, TError>) {\n    this.config = init.config\n    this.queryCache = init.queryCache\n    this.queryKey = init.queryKey\n    this.queryHash = init.queryHash\n    this.notifyGlobalListeners = init.notifyGlobalListeners\n    this.instances = []\n    this.state = getDefaultState(init.config)\n\n    if (init.config.infinite) {\n      const infiniteConfig = init.config as InfiniteQueryConfig<TResult, TError>\n      const infiniteData = (this.state.data as unknown) as TResult[] | undefined\n\n      if (\n        typeof infiniteData !== 'undefined' &&\n        typeof this.state.canFetchMore === 'undefined'\n      ) {\n        this.fetchMoreVariable = infiniteConfig.getFetchMore(\n          infiniteData[infiniteData.length - 1],\n          infiniteData\n        )\n        this.state.canFetchMore = Boolean(this.fetchMoreVariable)\n      }\n\n      // Here we seed the pageVariables for the query\n      if (!this.pageVariables) {\n        this.pageVariables = [[...this.queryKey]]\n      }\n    }\n  }\n\n  private dispatch(action: Action<TResult, TError>): void {\n    const newState = queryReducer(this.state, action)\n\n    // Only update state if something has changed\n    if (!shallowEqual(this.state, newState)) {\n      this.state = newState\n      this.instances.forEach(d => d.onStateUpdate(newState, action))\n      this.notifyGlobalListeners(this)\n    }\n  }\n\n  scheduleStaleTimeout(): void {\n    if (isServer) {\n      return\n    }\n\n    this.clearStaleTimeout()\n\n    if (this.state.isStale) {\n      return\n    }\n\n    if (this.config.staleTime === Infinity) {\n      return\n    }\n\n    this.staleTimeout = setTimeout(() => {\n      this.invalidate()\n    }, this.config.staleTime)\n  }\n\n  invalidate(): void {\n    this.clearStaleTimeout()\n\n    if (!this.queryCache.queries[this.queryHash]) {\n      return\n    }\n\n    if (this.state.isStale) {\n      return\n    }\n\n    this.dispatch({ type: ActionType.MarkStale })\n  }\n\n  scheduleGarbageCollection(): void {\n    this.clearCacheTimeout()\n\n    if (!this.queryCache.queries[this.queryHash]) {\n      return\n    }\n\n    if (this.config.cacheTime === Infinity) {\n      return\n    }\n\n    this.cacheTimeout = setTimeout(\n      () => {\n        this.clear()\n      },\n      typeof this.state.data === 'undefined' &&\n        this.state.status !== QueryStatus.Error\n        ? 0\n        : this.config.cacheTime\n    )\n  }\n\n  async refetch(): Promise<void> {\n    try {\n      await this.fetch()\n    } catch (error) {\n      Console.error(error)\n    }\n  }\n\n  heal(): void {\n    // Stop the query from being garbage collected\n    this.clearCacheTimeout()\n\n    // Mark the query as not cancelled\n    this.cancelled = null\n  }\n\n  cancel(): void {\n    this.cancelled = cancelledError\n\n    if (this.cancelPromises) {\n      this.cancelPromises()\n    }\n\n    delete this.promise\n  }\n\n  clearIntervals(): void {\n    this.instances.forEach(instance => {\n      instance.clearInterval()\n    })\n  }\n\n  private clearStaleTimeout() {\n    if (this.staleTimeout) {\n      clearTimeout(this.staleTimeout)\n      this.staleTimeout = undefined\n    }\n  }\n\n  private clearCacheTimeout() {\n    if (this.cacheTimeout) {\n      clearTimeout(this.cacheTimeout)\n      this.cacheTimeout = undefined\n    }\n  }\n\n  private clearRetryTimeout() {\n    if (this.retryTimeout) {\n      clearTimeout(this.retryTimeout)\n      this.retryTimeout = undefined\n    }\n  }\n\n  private setState(\n    updater: Updater<QueryState<TResult, TError>, QueryState<TResult, TError>>\n  ): void {\n    this.dispatch({ type: ActionType.SetState, updater })\n  }\n\n  setData(updater: Updater<TResult | undefined, TResult>): void {\n    const isStale = this.config.staleTime === 0\n    // Set data and mark it as cached\n    this.dispatch({\n      type: ActionType.Success,\n      updater,\n      isStale,\n    })\n\n    if (!isStale) {\n      // Schedule a fresh invalidation!\n      this.scheduleStaleTimeout()\n    }\n  }\n\n  clear(): void {\n    this.clearStaleTimeout()\n    this.clearCacheTimeout()\n    this.clearRetryTimeout()\n    this.clearIntervals()\n    this.cancel()\n    delete this.queryCache.queries[this.queryHash]\n    this.notifyGlobalListeners(this)\n  }\n\n  subscribe(\n    onStateUpdate?: OnStateUpdateFunction<TResult, TError>\n  ): QueryInstance<TResult, TError> {\n    const instance = new QueryInstance(this, onStateUpdate)\n    this.instances.push(instance)\n    this.heal()\n    return instance\n  }\n\n  // Set up the core fetcher function\n  private async tryFetchData(\n    fn: QueryFunction<TResult>,\n    args: ArrayQueryKey\n  ): Promise<TResult> {\n    try {\n      // Perform the query\n      const promiseOrValue = fn(...this.config.queryFnParamsFilter!(args))\n\n      this.cancelPromises = () => (promiseOrValue as any)?.cancel?.()\n\n      const data = await promiseOrValue\n      delete this.shouldContinueRetryOnFocus\n\n      delete this.cancelPromises\n      if (this.cancelled) throw this.cancelled\n\n      return data\n    } catch (error) {\n      delete this.cancelPromises\n      if (this.cancelled) throw this.cancelled\n\n      // Do we need to retry the request?\n      if (\n        this.config.retry === true ||\n        this.state.failureCount < this.config.retry! ||\n        (typeof this.config.retry === 'function' &&\n          this.config.retry(this.state.failureCount, error))\n      ) {\n        // If we retry, increase the failureCount\n        this.dispatch({ type: ActionType.Failed })\n\n        // Only retry if the document is visible\n        if (!isDocumentVisible()) {\n          // set this flag to continue retries on focus\n          this.shouldContinueRetryOnFocus = true\n          // Resolve a\n          return new Promise(noop)\n        }\n\n        delete this.shouldContinueRetryOnFocus\n\n        // Determine the retryDelay\n        const delay = functionalUpdate(\n          this.config.retryDelay,\n          this.state.failureCount\n        )\n\n        // Return a new promise with the retry\n        return await new Promise((resolve, reject) => {\n          // Keep track of the retry timeout\n          this.retryTimeout = setTimeout(async () => {\n            if (this.cancelled) return reject(this.cancelled)\n\n            try {\n              const data = await this.tryFetchData(fn, args)\n              if (this.cancelled) return reject(this.cancelled)\n              resolve(data)\n            } catch (error) {\n              if (this.cancelled) return reject(this.cancelled)\n              reject(error)\n            }\n          }, delay)\n        })\n      }\n\n      throw error\n    }\n  }\n\n  async fetch(options?: FetchOptions): Promise<TResult | undefined> {\n    let queryFn = this.config.queryFn\n\n    if (!queryFn) {\n      return\n    }\n\n    // If we are already fetching, return current promise\n    if (this.promise) {\n      return this.promise\n    }\n\n    if (this.config.infinite) {\n      const infiniteConfig = this.config as InfiniteQueryConfig<TResult, TError>\n      const infiniteData = (this.state.data as unknown) as TResult[] | undefined\n      const fetchMore = options?.fetchMore\n\n      const originalQueryFn = queryFn\n\n      queryFn = async () => {\n        const data: TResult[] = []\n        const pageVariables = this.pageVariables ? [...this.pageVariables] : []\n        const rebuiltPageVariables: ArrayQueryKey[] = []\n\n        do {\n          const args = pageVariables.shift()!\n\n          if (!data.length) {\n            // the first page query doesn't need to be rebuilt\n            data.push(await originalQueryFn(...args))\n            rebuiltPageVariables.push(args)\n          } else {\n            // get an up-to-date cursor based on the previous data set\n\n            const nextCursor = infiniteConfig.getFetchMore(\n              data[data.length - 1],\n              data\n            )\n\n            // break early if there's no next cursor\n            // otherwise we'll start from the beginning\n            // which will cause unwanted duplication\n            if (!nextCursor) {\n              break\n            }\n\n            const pageArgs = [\n              // remove the last argument (the previously saved cursor)\n              ...args.slice(0, -1),\n              nextCursor,\n            ] as ArrayQueryKey\n\n            data.push(await originalQueryFn(...pageArgs))\n            rebuiltPageVariables.push(pageArgs)\n          }\n        } while (pageVariables.length)\n\n        this.fetchMoreVariable = infiniteConfig.getFetchMore(\n          data[data.length - 1],\n          data\n        )\n        this.state.canFetchMore = Boolean(this.fetchMoreVariable)\n        this.pageVariables = rebuiltPageVariables\n\n        return (data as unknown) as TResult\n      }\n\n      if (fetchMore) {\n        queryFn = async (...args: ArrayQueryKey) => {\n          try {\n            const { fetchMoreVariable, previous } = fetchMore\n\n            this.setState(old => ({\n              ...old,\n              isFetchingMore: previous ? 'previous' : 'next',\n            }))\n\n            const newArgs = [...args, fetchMoreVariable] as ArrayQueryKey\n\n            if (this.pageVariables) {\n              this.pageVariables[previous ? 'unshift' : 'push'](newArgs)\n            } else {\n              this.pageVariables = [newArgs]\n            }\n\n            const newData = await originalQueryFn(...newArgs)\n\n            let data\n\n            if (!infiniteData) {\n              data = [newData]\n            } else if (previous) {\n              data = [newData, ...infiniteData]\n            } else {\n              data = [...infiniteData, newData]\n            }\n\n            this.fetchMoreVariable = infiniteConfig.getFetchMore(newData, data)\n            this.state.canFetchMore = Boolean(this.fetchMoreVariable)\n\n            return (data as unknown) as TResult\n          } finally {\n            this.setState(old => ({\n              ...old,\n              isFetchingMore: false,\n            }))\n          }\n        }\n      }\n    }\n\n    this.promise = (async () => {\n      // If there are any retries pending for this query, kill them\n      this.cancelled = null\n\n      try {\n        // Set up the query refreshing state\n        this.dispatch({ type: ActionType.Fetch })\n\n        // Try to get the data\n        const data = await this.tryFetchData(queryFn!, this.queryKey)\n\n        this.setData(old => (this.config.isDataEqual!(old, data) ? old! : data))\n\n        delete this.promise\n\n        return data\n      } catch (error) {\n        this.dispatch({\n          type: ActionType.Error,\n          cancelled: error === this.cancelled,\n          error,\n        })\n\n        delete this.promise\n\n        if (error !== this.cancelled) {\n          throw error\n        }\n\n        return\n      }\n    })()\n\n    return this.promise\n  }\n\n  fetchMore(\n    fetchMoreVariable?: unknown,\n    options?: FetchMoreOptions\n  ): Promise<TResult | undefined> {\n    return this.fetch({\n      fetchMore: {\n        fetchMoreVariable: fetchMoreVariable ?? this.fetchMoreVariable,\n        previous: options?.previous || false,\n      },\n    })\n  }\n}\n\nfunction getDefaultState<TResult, TError>(\n  config: QueryConfig<TResult, TError>\n): QueryState<TResult, TError> {\n  const initialData =\n    typeof config.initialData === 'function'\n      ? (config.initialData as InitialDataFunction<TResult>)()\n      : config.initialData\n\n  const hasInitialData = typeof initialData !== 'undefined'\n\n  const isStale =\n    !config.enabled ||\n    (typeof config.initialStale === 'function'\n      ? config.initialStale()\n      : config.initialStale ?? !hasInitialData)\n\n  const initialStatus = hasInitialData\n    ? QueryStatus.Success\n    : config.enabled\n    ? QueryStatus.Loading\n    : QueryStatus.Idle\n\n  return {\n    ...getStatusProps(initialStatus),\n    error: null,\n    isFetched: false,\n    isFetching: initialStatus === QueryStatus.Loading,\n    failureCount: 0,\n    isStale,\n    data: initialData,\n    updatedAt: hasInitialData ? Date.now() : 0,\n  }\n}\n\nexport function queryReducer<TResult, TError>(\n  state: QueryState<TResult, TError>,\n  action: Action<TResult, TError>\n): QueryState<TResult, TError> {\n  switch (action.type) {\n    case ActionType.Failed:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case ActionType.MarkStale:\n      return {\n        ...state,\n        isStale: true,\n      }\n    case ActionType.Fetch:\n      const status =\n        typeof state.data !== 'undefined'\n          ? QueryStatus.Success\n          : QueryStatus.Loading\n      return {\n        ...state,\n        ...getStatusProps(status),\n        isFetching: true,\n        failureCount: 0,\n      }\n    case ActionType.Success:\n      return {\n        ...state,\n        ...getStatusProps(QueryStatus.Success),\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: action.isStale,\n        isFetched: true,\n        isFetching: false,\n        updatedAt: Date.now(),\n        failureCount: 0,\n      }\n    case ActionType.Error:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n        isFetched: true,\n        isFetching: false,\n        isStale: true,\n        ...(!action.cancelled && {\n          ...getStatusProps(QueryStatus.Error),\n          error: action.error,\n          throwInErrorBoundary: true,\n        }),\n      }\n    case ActionType.SetState:\n      return functionalUpdate(action.updater, state)\n    default:\n      return state\n  }\n}\n","import {\n  isServer,\n  getQueryArgs,\n  deepIncludes,\n  Console,\n  isObject,\n  Updater,\n} from './utils'\nimport { defaultConfigRef, ReactQueryConfigRef } from './config'\nimport { Query } from './query'\nimport {\n  QueryConfig,\n  QueryKey,\n  QueryKeyWithoutObject,\n  ReactQueryConfig,\n  QueryKeyWithoutArray,\n  QueryKeyWithoutObjectAndArray,\n  TupleQueryFunction,\n  TupleQueryKey,\n} from './types'\n\n// TYPES\n\ninterface QueryCacheConfig {\n  frozen?: boolean\n  defaultConfig?: ReactQueryConfig\n}\n\ninterface ClearOptions {\n  notify?: boolean\n}\n\ninterface PrefetchQueryOptions {\n  force?: boolean\n  throwOnError?: boolean\n}\n\ninterface InvalidateQueriesOptions extends QueryPredicateOptions {\n  refetchActive?: boolean\n  refetchInactive?: boolean\n  throwOnError?: boolean\n}\n\ninterface QueryPredicateOptions {\n  exact?: boolean\n}\n\ntype QueryPredicate = QueryKey | QueryPredicateFn | true\n\ntype QueryPredicateFn = (query: Query<unknown, unknown>) => boolean\n\nexport interface PrefetchQueryObjectConfig<\n  TResult,\n  TError,\n  TKey extends TupleQueryKey\n> {\n  queryKey: QueryKey\n  queryFn?: TupleQueryFunction<TResult, TKey>\n  config?: QueryConfig<TResult, TError>\n  options?: PrefetchQueryOptions\n}\n\ninterface QueryHashMap {\n  [hash: string]: Query<any, any>\n}\n\ntype QueryCacheListener = (\n  cache: QueryCache,\n  query?: Query<unknown, unknown>\n) => void\n\n// CLASS\n\nexport class QueryCache {\n  queries: QueryHashMap\n  isFetching: number\n\n  private config: QueryCacheConfig\n  private configRef: ReactQueryConfigRef\n  private globalListeners: QueryCacheListener[]\n\n  constructor(config?: QueryCacheConfig) {\n    this.config = config || {}\n\n    // A frozen cache does not add new queries to the cache\n    this.globalListeners = []\n\n    this.configRef = this.config.defaultConfig\n      ? {\n          current: {\n            shared: {\n              ...defaultConfigRef.current.shared,\n              ...this.config.defaultConfig.shared,\n            },\n            queries: {\n              ...defaultConfigRef.current.queries,\n              ...this.config.defaultConfig.queries,\n            },\n            mutations: {\n              ...defaultConfigRef.current.mutations,\n              ...this.config.defaultConfig.mutations,\n            },\n          },\n        }\n      : defaultConfigRef\n\n    this.queries = {}\n    this.isFetching = 0\n  }\n\n  private notifyGlobalListeners(query?: Query<any, any>) {\n    this.isFetching = Object.values(this.queries).reduce(\n      (acc, query) => (query.state.isFetching ? acc + 1 : acc),\n      0\n    )\n\n    this.globalListeners.forEach(d => d(this, query))\n  }\n\n  getDefaultConfig() {\n    return this.configRef.current\n  }\n\n  subscribe(listener: QueryCacheListener): () => void {\n    this.globalListeners.push(listener)\n    return () => {\n      this.globalListeners.splice(this.globalListeners.indexOf(listener), 1)\n    }\n  }\n\n  clear(options?: ClearOptions): void {\n    Object.values(this.queries).forEach(query => query.clear())\n    this.queries = {}\n    if (options?.notify) {\n      this.notifyGlobalListeners()\n    }\n  }\n\n  getQueries<TResult = unknown, TError = unknown>(\n    predicate: QueryPredicate,\n    options?: QueryPredicateOptions\n  ): Query<TResult, TError>[] {\n    if (predicate === true) {\n      return Object.values(this.queries)\n    }\n\n    let predicateFn: QueryPredicateFn\n\n    if (typeof predicate === 'function') {\n      predicateFn = predicate as QueryPredicateFn\n    } else {\n      const [queryHash, queryKey] = this.configRef.current.queries!\n        .queryKeySerializerFn!(predicate)\n\n      predicateFn = d =>\n        options?.exact\n          ? d.queryHash === queryHash\n          : deepIncludes(d.queryKey, queryKey)\n    }\n\n    return Object.values(this.queries).filter(predicateFn)\n  }\n\n  getQuery<TResult, TError = unknown>(\n    predicate: QueryPredicate\n  ): Query<TResult, TError> | undefined {\n    return this.getQueries<TResult, TError>(predicate, { exact: true })[0]\n  }\n\n  getQueryData<TResult>(predicate: QueryPredicate): TResult | undefined {\n    return this.getQuery<TResult>(predicate)?.state.data\n  }\n\n  removeQueries(\n    predicate: QueryPredicate,\n    options?: QueryPredicateOptions\n  ): void {\n    this.getQueries(predicate, options).forEach(query => query.clear())\n  }\n\n  cancelQueries(\n    predicate: QueryPredicate,\n    options?: QueryPredicateOptions\n  ): void {\n    this.getQueries(predicate, options).forEach(query => query.cancel())\n  }\n\n  async invalidateQueries(\n    predicate: QueryPredicate,\n    options?: InvalidateQueriesOptions\n  ): Promise<void> {\n    const { refetchActive = true, refetchInactive = false, throwOnError } =\n      options || {}\n\n    try {\n      await Promise.all(\n        this.getQueries(predicate, options).map(query => {\n          if (query.instances.length) {\n            if (\n              refetchActive &&\n              query.instances.some(instance => instance.config.enabled)\n            ) {\n              return query.fetch()\n            }\n          } else {\n            if (refetchInactive) {\n              return query.fetch()\n            }\n          }\n\n          return query.invalidate()\n        })\n      )\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  resetErrorBoundaries(): void {\n    this.getQueries(true).forEach(query => {\n      query.state.throwInErrorBoundary = false\n    })\n  }\n\n  buildQuery<TResult, TError = unknown>(\n    userQueryKey: QueryKey,\n    queryConfig: QueryConfig<TResult, TError> = {}\n  ): Query<TResult, TError> {\n    const config = {\n      ...this.configRef.current.shared!,\n      ...this.configRef.current.queries!,\n      ...queryConfig,\n    } as QueryConfig<TResult, TError>\n\n    const [queryHash, queryKey] = config.queryKeySerializerFn!(userQueryKey)\n\n    let query\n\n    if (this.queries[queryHash]) {\n      query = this.queries[queryHash] as Query<TResult, TError>\n      query.config = config\n    }\n\n    if (!query) {\n      query = new Query<TResult, TError>({\n        queryCache: this,\n        queryKey,\n        queryHash,\n        config,\n        notifyGlobalListeners: query => {\n          this.notifyGlobalListeners(query)\n        },\n      })\n\n      // If the query started with data, schedule\n      // a stale timeout\n      if (!isServer && query.state.data) {\n        query.scheduleStaleTimeout()\n\n        // Simulate a query healing process\n        query.heal()\n        // Schedule for garbage collection in case\n        // nothing subscribes to this query\n        query.scheduleGarbageCollection()\n      }\n\n      if (!this.config.frozen) {\n        this.queries[queryHash] = query\n\n        if (isServer) {\n          this.notifyGlobalListeners()\n        } else {\n          // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n          setTimeout(() => {\n            this.notifyGlobalListeners()\n          })\n        }\n      }\n    }\n\n    return query\n  }\n\n  // Parameter syntax with optional prefetch options\n  async prefetchQuery<TResult, TError, TKey extends QueryKeyWithoutObject>(\n    queryKey: TKey,\n    options?: PrefetchQueryOptions\n  ): Promise<TResult | undefined>\n\n  // Parameter syntax with config and optional prefetch options\n  async prefetchQuery<TResult, TError, TKey extends QueryKeyWithoutObject>(\n    queryKey: TKey,\n    config: QueryConfig<TResult, TError>,\n    options?: PrefetchQueryOptions\n  ): Promise<TResult | undefined>\n\n  // Parameter syntax with query function and optional prefetch options\n  async prefetchQuery<\n    TResult,\n    TError,\n    TKey extends QueryKeyWithoutObjectAndArray\n  >(\n    queryKey: TKey,\n    queryFn: TupleQueryFunction<TResult, [TKey]>,\n    options?: PrefetchQueryOptions\n  ): Promise<TResult | undefined>\n\n  async prefetchQuery<TResult, TError, TKey extends TupleQueryKey>(\n    queryKey: TKey,\n    queryFn: TupleQueryFunction<TResult, TKey>,\n    options?: PrefetchQueryOptions\n  ): Promise<TResult | undefined>\n\n  // Parameter syntax with query function, config and optional prefetch options\n  async prefetchQuery<\n    TResult,\n    TError,\n    TKey extends QueryKeyWithoutObjectAndArray\n  >(\n    queryKey: TKey,\n    queryFn: TupleQueryFunction<TResult, [TKey]>,\n    queryConfig: QueryConfig<TResult, TError>,\n    options?: PrefetchQueryOptions\n  ): Promise<TResult | undefined>\n\n  async prefetchQuery<TResult, TError, TKey extends TupleQueryKey>(\n    queryKey: TKey,\n    queryFn: TupleQueryFunction<TResult, TKey>,\n    queryConfig: QueryConfig<TResult, TError>,\n    options?: PrefetchQueryOptions\n  ): Promise<TResult | undefined>\n\n  // Object syntax\n  async prefetchQuery<TResult, TError, TKey extends QueryKeyWithoutArray>(\n    config: PrefetchQueryObjectConfig<TResult, TError, [TKey]>\n  ): Promise<TResult | undefined>\n\n  async prefetchQuery<TResult, TError, TKey extends TupleQueryKey>(\n    config: PrefetchQueryObjectConfig<TResult, TError, TKey>\n  ): Promise<TResult | undefined>\n\n  // Implementation\n  async prefetchQuery<TResult, TError>(\n    ...args: any[]\n  ): Promise<TResult | undefined> {\n    if (\n      isObject(args[1]) &&\n      (args[1].hasOwnProperty('throwOnError') ||\n        args[1].hasOwnProperty('force'))\n    ) {\n      args[3] = args[1]\n      args[1] = undefined\n      args[2] = undefined\n    }\n\n    const [queryKey, config, options] = getQueryArgs<\n      TResult,\n      TError,\n      PrefetchQueryOptions | undefined\n    >(args)\n    // https://github.com/tannerlinsley/react-query/issues/652\n    const configWithoutRetry = { retry: false, ...config }\n\n    try {\n      const query = this.buildQuery<TResult, TError>(\n        queryKey,\n        configWithoutRetry\n      )\n      if (options?.force || query.state.isStale) {\n        await query.fetch()\n      }\n      return query.state.data\n    } catch (err) {\n      if (options?.throwOnError) {\n        throw err\n      }\n      Console.error(err)\n      return\n    }\n  }\n\n  setQueryData<TResult, TError = unknown>(\n    queryKey: QueryKey,\n    updater: Updater<TResult | undefined, TResult>,\n    config: QueryConfig<TResult, TError> = {}\n  ) {\n    let query = this.getQuery<TResult, TError>(queryKey)\n\n    if (!query) {\n      query = this.buildQuery<TResult, TError>(queryKey, config)\n    }\n\n    query.setData(updater)\n  }\n}\n\nconst defaultQueryCache = makeQueryCache({ frozen: isServer })\nexport { defaultQueryCache as queryCache }\nexport const queryCaches = [defaultQueryCache]\n\nexport function makeQueryCache(config?: QueryCacheConfig) {\n  return new QueryCache(config)\n}\n","import { isOnline, isDocumentVisible, Console, isServer } from './utils'\nimport { queryCaches } from './queryCache'\n\ntype FocusHandler = () => void\n\nconst visibilityChangeEvent = 'visibilitychange'\nconst focusEvent = 'focus'\n\nconst onWindowFocus: FocusHandler = () => {\n  if (isDocumentVisible() && isOnline()) {\n    queryCaches.forEach(queryCache =>\n      queryCache\n        .invalidateQueries(query => {\n          if (!query.instances.length) {\n            return false\n          }\n\n          if (!query.instances.some(instance => instance.config.enabled)) {\n            return false\n          }\n\n          if (!query.state.isStale) {\n            return false\n          }\n\n          if (query.shouldContinueRetryOnFocus) {\n            // delete promise, so refetching will create new one\n            delete query.promise\n          }\n\n          return Boolean(query.config.refetchOnWindowFocus)\n        })\n        .catch(Console.error)\n    )\n  }\n}\n\nlet removePreviousHandler: (() => void) | void\n\nexport function setFocusHandler(callback: (callback: FocusHandler) => void) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler()\n  }\n  // Sub the new watcher\n  removePreviousHandler = callback(onWindowFocus)\n}\n\nsetFocusHandler((handleFocus: FocusHandler) => {\n  // Listen to visibillitychange and focus\n  if (!isServer && window?.addEventListener) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false)\n    window.addEventListener(focusEvent, handleFocus, false)\n\n    return () => {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus)\n      window.removeEventListener(focusEvent, handleFocus)\n    }\n  }\n  return\n})\n","import React from 'react'\n\nimport {\n  queryCache as defaultQueryCache,\n  queryCaches,\n  makeQueryCache,\n} from '../core'\nimport { QueryCache } from '../core/queryCache'\n\nexport const queryCacheContext = React.createContext(defaultQueryCache)\n\nexport const useQueryCache = () => React.useContext(queryCacheContext)\n\nexport interface ReactQueryCacheProviderProps {\n  queryCache?: QueryCache\n}\n\nexport const ReactQueryCacheProvider: React.FC<ReactQueryCacheProviderProps> = ({\n  queryCache,\n  children,\n}) => {\n  const resolvedQueryCache = React.useMemo(\n    () => queryCache || makeQueryCache(),\n    [queryCache]\n  )\n\n  React.useEffect(() => {\n    queryCaches.push(resolvedQueryCache)\n\n    return () => {\n      // remove the cache from the active list\n      const i = queryCaches.indexOf(resolvedQueryCache)\n      if (i > -1) {\n        queryCaches.splice(i, 1)\n      }\n      // if the resolvedQueryCache was created by us, we need to tear it down\n      if (queryCache == null) {\n        resolvedQueryCache.clear({ notify: false })\n      }\n    }\n  }, [resolvedQueryCache, queryCache])\n\n  return (\n    <queryCacheContext.Provider value={resolvedQueryCache}>\n      {children}\n    </queryCacheContext.Provider>\n  )\n}\n","import React from 'react'\nimport { DEFAULT_CONFIG, defaultConfigRef } from '../core/config'\nimport { ReactQueryConfig } from '../core/types'\nimport { useQueryCache } from './ReactQueryCacheProvider'\n\nconst configContext = React.createContext<ReactQueryConfig | undefined>(\n  undefined\n)\n\nexport function useConfigContext() {\n  const queryCache = useQueryCache()\n  return (\n    React.useContext(configContext) ||\n    queryCache.getDefaultConfig() ||\n    defaultConfigRef.current\n  )\n}\n\nexport interface ReactQueryProviderConfig extends ReactQueryConfig {}\n\nexport interface ReactQueryConfigProviderProps {\n  config: ReactQueryProviderConfig\n}\n\nexport const ReactQueryConfigProvider: React.FC<ReactQueryConfigProviderProps> = ({\n  config,\n  children,\n}) => {\n  const configContextValueOrDefault = useConfigContext()\n  const configContextValue = React.useContext(configContext)\n\n  const newConfig = React.useMemo<ReactQueryConfig>(() => {\n    const { shared = {}, queries = {}, mutations = {} } = config\n    const {\n      shared: contextShared = {},\n      queries: contextQueries = {},\n      mutations: contextMutations = {},\n    } = configContextValueOrDefault\n\n    return {\n      shared: {\n        ...contextShared,\n        ...shared,\n      },\n      queries: {\n        ...contextQueries,\n        ...queries,\n      },\n      mutations: {\n        ...contextMutations,\n        ...mutations,\n      },\n    }\n  }, [config, configContextValueOrDefault])\n\n  React.useEffect(() => {\n    // restore previous config on unmount\n    return () => {\n      defaultConfigRef.current = {\n        ...(configContextValueOrDefault || DEFAULT_CONFIG),\n      }\n    }\n  }, [configContextValueOrDefault])\n\n  // If this is the outermost provider, overwrite the shared default config\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig\n  }\n\n  return (\n    <configContext.Provider value={newConfig}>\n      {children}\n    </configContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { uid, isServer } from '../core/utils'\nimport { QueryResultBase, BaseQueryConfig, QueryStatus } from '../core/types'\n\nexport function useUid(): number {\n  const ref = React.useRef(0)\n\n  if (ref.current === null) {\n    ref.current = uid()\n  }\n\n  return ref.current\n}\n\nexport function useGetLatest<T>(obj: T): () => T {\n  const ref = React.useRef<T>(obj)\n  ref.current = obj\n  return React.useCallback(() => ref.current, [])\n}\n\nexport function useMountedCallback<T extends Function>(callback: T): T {\n  const mounted = React.useRef(false)\n\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](() => {\n    mounted.current = true\n    return () => {\n      mounted.current = false\n    }\n  }, [])\n\n  return (React.useCallback(\n    (...args: any[]) => (mounted.current ? callback(...args) : void 0),\n    [callback]\n  ) as any) as T\n}\n\nexport function useRerenderer() {\n  const rerender = useMountedCallback(React.useState<unknown>()[1])\n  return React.useCallback(() => rerender({}), [rerender])\n}\n\nexport function handleSuspense(\n  config: BaseQueryConfig<any, any>,\n  result: QueryResultBase<any, any>\n) {\n  const { error, query } = result\n  const { state } = query\n\n  if (config.suspense || config.useErrorBoundary) {\n    if (state.status === QueryStatus.Error && state.throwInErrorBoundary) {\n      throw error\n    }\n\n    if (\n      config.suspense &&\n      state.status !== QueryStatus.Success &&\n      config.enabled\n    ) {\n      const instance = query.subscribe()\n\n      instance.updateConfig({\n        ...config,\n        onSettled: (data, error) => {\n          instance.unsubscribe(true)\n          config.onSettled?.(data, error)\n        },\n      })\n\n      throw query.fetch()\n    }\n  }\n}\n","import React from 'react'\n\nimport { useRerenderer, useGetLatest } from './utils'\nimport { useQueryCache } from './ReactQueryCacheProvider'\n\nexport function useIsFetching(): number {\n  const queryCache = useQueryCache()\n  const rerender = useRerenderer()\n  const isFetching = queryCache.isFetching\n\n  const getIsFetching = useGetLatest(isFetching)\n\n  React.useEffect(\n    () =>\n      queryCache.subscribe(newCache => {\n        if (getIsFetching() !== newCache.isFetching) {\n          rerender()\n        }\n      }),\n    [getIsFetching, queryCache, rerender]\n  )\n\n  return isFetching\n}\n","import React from 'react'\n\nimport { useConfigContext } from './ReactQueryConfigProvider'\nimport { useGetLatest, useMountedCallback } from './utils'\nimport { Console, uid, getStatusProps } from '../core/utils'\nimport {\n  QueryStatus,\n  MutationResultPair,\n  MutationFunction,\n  MutationConfig,\n  MutateConfig,\n} from '../core/types'\n\n// TYPES\n\ntype Reducer<S, A> = (prevState: S, action: A) => S\n\ninterface State<TResult, TError> {\n  status: QueryStatus\n  data: TResult | undefined\n  error: TError | null\n  isIdle: boolean\n  isLoading: boolean\n  isSuccess: boolean\n  isError: boolean\n}\n\nenum ActionType {\n  Reset = 'Reset',\n  Loading = 'Loading',\n  Resolve = 'Resolve',\n  Reject = 'Reject',\n}\n\ninterface ResetAction {\n  type: ActionType.Reset\n}\n\ninterface LoadingAction {\n  type: ActionType.Loading\n}\n\ninterface ResolveAction<TResult> {\n  type: ActionType.Resolve\n  data: TResult\n}\n\ninterface RejectAction<TError> {\n  type: ActionType.Reject\n  error: TError\n}\n\ntype Action<TResult, TError> =\n  | ResetAction\n  | LoadingAction\n  | ResolveAction<TResult>\n  | RejectAction<TError>\n\n// HOOK\n\nconst getDefaultState = (): State<any, any> => ({\n  ...getStatusProps(QueryStatus.Idle),\n  data: undefined,\n  error: null,\n})\n\nfunction mutationReducer<TResult, TError>(\n  state: State<TResult, TError>,\n  action: Action<TResult, TError>\n): State<TResult, TError> {\n  switch (action.type) {\n    case ActionType.Reset:\n      return getDefaultState()\n    case ActionType.Loading:\n      return {\n        ...getStatusProps(QueryStatus.Loading),\n        data: undefined,\n        error: null,\n      }\n    case ActionType.Resolve:\n      return {\n        ...getStatusProps(QueryStatus.Success),\n        data: action.data,\n        error: null,\n      }\n    case ActionType.Reject:\n      return {\n        ...getStatusProps(QueryStatus.Error),\n        data: undefined,\n        error: action.error,\n      }\n    default:\n      return state\n  }\n}\n\nexport function useMutation<\n  TResult,\n  TError = unknown,\n  TVariables = undefined,\n  TSnapshot = unknown\n>(\n  mutationFn: MutationFunction<TResult, TVariables>,\n  config: MutationConfig<TResult, TError, TVariables, TSnapshot> = {}\n): MutationResultPair<TResult, TError, TVariables, TSnapshot> {\n  const [state, unsafeDispatch] = React.useReducer(\n    mutationReducer as Reducer<State<TResult, TError>, Action<TResult, TError>>,\n    null,\n    getDefaultState\n  )\n\n  const dispatch = useMountedCallback(unsafeDispatch)\n\n  const getMutationFn = useGetLatest(mutationFn)\n\n  const contextConfig = useConfigContext()\n\n  const getConfig = useGetLatest({\n    ...contextConfig.shared,\n    ...contextConfig.mutations,\n    ...config,\n  })\n\n  const latestMutationRef = React.useRef<number>()\n\n  const mutate = React.useCallback(\n    async (\n      variables?: TVariables,\n      mutateConfig: MutateConfig<TResult, TError, TVariables, TSnapshot> = {}\n    ): Promise<TResult | undefined> => {\n      const config = getConfig()\n\n      const mutationId = uid()\n      latestMutationRef.current = mutationId\n\n      const isLatest = () => latestMutationRef.current === mutationId\n\n      let snapshotValue: TSnapshot | undefined\n\n      try {\n        dispatch({ type: ActionType.Loading })\n        snapshotValue = (await config.onMutate?.(variables!)) as TSnapshot\n\n        const data = await getMutationFn()(variables!)\n\n        if (isLatest()) {\n          dispatch({ type: ActionType.Resolve, data })\n        }\n\n        await config.onSuccess?.(data, variables!)\n        await mutateConfig.onSuccess?.(data, variables!)\n        await config.onSettled?.(data, null, variables!)\n        await mutateConfig.onSettled?.(data, null, variables!)\n\n        return data\n      } catch (error) {\n        Console.error(error)\n        await config.onError?.(error, variables!, snapshotValue!)\n        await mutateConfig.onError?.(error, variables!, snapshotValue!)\n        await config.onSettled?.(\n          undefined,\n          error,\n          variables!,\n          snapshotValue as TSnapshot\n        )\n        await mutateConfig.onSettled?.(\n          undefined,\n          error,\n          variables!,\n          snapshotValue\n        )\n\n        if (isLatest()) {\n          dispatch({ type: ActionType.Reject, error })\n        }\n\n        if (mutateConfig.throwOnError ?? config.throwOnError) {\n          throw error\n        }\n\n        return\n      }\n    },\n    [dispatch, getConfig, getMutationFn]\n  )\n\n  const reset = React.useCallback(() => {\n    dispatch({ type: ActionType.Reset })\n  }, [dispatch])\n\n  React.useEffect(() => {\n    const { suspense, useErrorBoundary } = getConfig()\n\n    if ((useErrorBoundary ?? suspense) && state.error) {\n      throw state.error\n    }\n  }, [getConfig, state.error])\n\n  return [mutate, { ...state, reset }]\n}\n","import React from 'react'\n\nimport { useQueryCache } from './ReactQueryCacheProvider'\nimport { useRerenderer } from './utils'\nimport { QueryInstance } from '../core/queryInstance'\nimport { QueryConfig, QueryKey, QueryResultBase } from '../core/types'\n\nexport function useBaseQuery<TResult, TError>(\n  queryKey: QueryKey,\n  config: QueryConfig<TResult, TError> = {}\n): QueryResultBase<TResult, TError> {\n  // Make a rerender function\n  const rerender = useRerenderer()\n\n  // Get the query cache\n  const queryCache = useQueryCache()\n\n  // Build the query for use\n  const query = queryCache.buildQuery<TResult, TError>(queryKey, config)\n  const state = query.state\n\n  // Create a query instance ref\n  const instanceRef = React.useRef<QueryInstance<TResult, TError>>()\n\n  // Subscribe to the query when the subscribe function changes\n  React.useEffect(() => {\n    const instance = query.subscribe(() => {\n      rerender()\n    })\n\n    instanceRef.current = instance\n\n    // Unsubscribe when things change\n    return () => instance.unsubscribe()\n  }, [query, rerender])\n\n  // Always update the config\n  React.useEffect(() => {\n    instanceRef.current?.updateConfig(config)\n  })\n\n  const enabledBool = Boolean(config.enabled)\n\n  // Run the instance when the query or enabled change\n  React.useEffect(() => {\n    if (enabledBool && query) {\n      // Just for change detection\n    }\n    instanceRef.current?.run()\n  }, [enabledBool, query])\n\n  const clear = React.useMemo(() => query.clear.bind(query), [query])\n  const refetch = React.useMemo(() => query.refetch.bind(query), [query])\n\n  return {\n    clear,\n    error: state.error,\n    failureCount: state.failureCount,\n    isError: state.isError,\n    isFetching: state.isFetching,\n    isIdle: state.isIdle,\n    isLoading: state.isLoading,\n    isStale: state.isStale,\n    isSuccess: state.isSuccess,\n    query,\n    refetch,\n    status: state.status,\n    updatedAt: state.updatedAt,\n  }\n}\n","import { getQueryArgs } from '../core/utils'\nimport { useConfigContext } from './ReactQueryConfigProvider'\nimport { QueryConfig, QueryKey } from '../core/types'\n\nexport function useQueryArgs<TResult, TError, TOptions = undefined>(\n  args: any[]\n): [QueryKey, QueryConfig<TResult, TError>, TOptions] {\n  const configContext = useConfigContext()\n\n  const [queryKey, config, options] = getQueryArgs<TResult, TError, TOptions>(\n    args\n  )\n\n  // Build the final config\n  const configWithContext = {\n    ...configContext.shared,\n    ...configContext.queries,\n    ...config,\n  } as QueryConfig<TResult, TError>\n\n  return [queryKey, configWithContext, options]\n}\n","import { useBaseQuery } from './useBaseQuery'\nimport { handleSuspense } from './utils'\nimport {\n  QueryConfig,\n  QueryKey,\n  QueryKeyWithoutArray,\n  QueryKeyWithoutObject,\n  QueryKeyWithoutObjectAndArray,\n  QueryResult,\n  TupleQueryFunction,\n  TupleQueryKey,\n} from '../core/types'\nimport { useQueryArgs } from './useQueryArgs'\n\n// TYPES\n\nexport interface UseQueryObjectConfig<\n  TResult,\n  TError,\n  TKey extends TupleQueryKey\n> {\n  queryKey: QueryKey\n  queryFn?: TupleQueryFunction<TResult, [TKey]>\n  config?: QueryConfig<TResult, TError>\n}\n\n// HOOK\n\n// Parameter syntax with optional config\nexport function useQuery<TResult, TError, TKey extends QueryKeyWithoutObject>(\n  queryKey: TKey,\n  queryConfig?: QueryConfig<TResult, TError>\n): QueryResult<TResult, TError>\n\n// Parameter syntax with query function and optional config\nexport function useQuery<\n  TResult,\n  TError,\n  TKey extends QueryKeyWithoutObjectAndArray\n>(\n  queryKey: TKey,\n  queryFn: TupleQueryFunction<TResult, [TKey]>,\n  queryConfig?: QueryConfig<TResult, TError>\n): QueryResult<TResult, TError>\n\n// Parameter syntax with query function and optional config\nexport function useQuery<TResult, TError, TKey extends TupleQueryKey>(\n  queryKey: TKey,\n  queryFn: TupleQueryFunction<TResult, TKey>,\n  queryConfig?: QueryConfig<TResult, TError>\n): QueryResult<TResult, TError>\n\n// Object syntax\nexport function useQuery<TResult, TError, TKey extends QueryKeyWithoutArray>(\n  config: UseQueryObjectConfig<TResult, TError, [TKey]>\n): QueryResult<TResult, TError>\n\nexport function useQuery<TResult, TError, TKey extends TupleQueryKey>(\n  config: UseQueryObjectConfig<TResult, TError, TKey>\n): QueryResult<TResult, TError>\n\n// Implementation\nexport function useQuery<TResult, TError>(\n  ...args: any[]\n): QueryResult<TResult, TError> {\n  const [queryKey, config] = useQueryArgs<TResult, TError>(args)\n  const result = useBaseQuery<TResult, TError>(queryKey, config)\n\n  handleSuspense(config, result)\n\n  return {\n    ...result,\n    data: result.query.state.data,\n  }\n}\n","import React from 'react'\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { handleSuspense } from './utils'\nimport { getStatusProps } from '../core/utils'\nimport {\n  PaginatedQueryConfig,\n  PaginatedQueryResult,\n  QueryKey,\n  QueryKeyWithoutArray,\n  QueryKeyWithoutObject,\n  QueryKeyWithoutObjectAndArray,\n  QueryStatus,\n  TupleQueryFunction,\n  TupleQueryKey,\n} from '../core/types'\nimport { useQueryArgs } from './useQueryArgs'\n\n// A paginated query is more like a \"lag\" query, which means\n// as the query key changes, we keep the results from the\n// last query and use them as placeholder data in the next one\n// We DON'T use it as initial data though. That's important\n\n// TYPES\n\nexport interface UsePaginatedQueryObjectConfig<\n  TResult,\n  TError,\n  TKey extends TupleQueryKey\n> {\n  queryKey: QueryKey\n  queryFn?: TupleQueryFunction<TResult, TKey>\n  config?: PaginatedQueryConfig<TResult, TError>\n}\n\n// HOOK\n\n// Parameter syntax with optional config\nexport function usePaginatedQuery<\n  TResult,\n  TError,\n  TKey extends QueryKeyWithoutObject\n>(\n  queryKey: TKey,\n  queryConfig?: PaginatedQueryConfig<TResult, TError>\n): PaginatedQueryResult<TResult, TError>\n\n// Parameter syntax with query function and optional config\nexport function usePaginatedQuery<\n  TResult,\n  TError,\n  TKey extends QueryKeyWithoutObjectAndArray\n>(\n  queryKey: TKey,\n  queryFn: TupleQueryFunction<TResult, [TKey]>,\n  queryConfig?: PaginatedQueryConfig<TResult, TError>\n): PaginatedQueryResult<TResult, TError>\n\nexport function usePaginatedQuery<TResult, TError, TKey extends TupleQueryKey>(\n  queryKey: TKey,\n  queryFn: TupleQueryFunction<TResult, TKey>,\n  queryConfig?: PaginatedQueryConfig<TResult, TError>\n): PaginatedQueryResult<TResult, TError>\n\n// Object syntax\nexport function usePaginatedQuery<\n  TResult,\n  TError,\n  TKey extends QueryKeyWithoutArray\n>(\n  config: UsePaginatedQueryObjectConfig<TResult, TError, [TKey]>\n): PaginatedQueryResult<TResult, TError>\n\nexport function usePaginatedQuery<TResult, TError, TKey extends TupleQueryKey>(\n  config: UsePaginatedQueryObjectConfig<TResult, TError, TKey>\n): PaginatedQueryResult<TResult, TError>\n\n// Implementation\nexport function usePaginatedQuery<TResult, TError>(\n  ...args: any[]\n): PaginatedQueryResult<TResult, TError> {\n  const [queryKey, config] = useQueryArgs<TResult, TError>(args)\n\n  // Keep track of the latest data result\n  const lastDataRef = React.useRef<TResult>()\n\n  // If latestData is there, don't use initialData\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData\n  }\n\n  // Make the query as normal\n  const result = useBaseQuery<TResult, TError>(queryKey, config)\n\n  // If the query is disabled, get rid of the latest data\n  if (!result.query.config.enabled) {\n    lastDataRef.current = undefined\n  }\n\n  // Get the real data and status from the query\n  const { data: latestData, status } = result.query.state\n\n  // If the real query succeeds, and there is data in it,\n  // update the latest data\n  React.useEffect(() => {\n    if (status === QueryStatus.Success && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData\n    }\n  }, [latestData, status])\n\n  // Resolved data should be either the real data we're waiting on\n  // or the latest placeholder data\n  let resolvedData = latestData\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current\n  }\n\n  // If we have any data at all from either, we\n  // need to make sure the status is success, even though\n  // the real query may still be loading\n  if (typeof resolvedData !== 'undefined') {\n    const overrides = getStatusProps(QueryStatus.Success)\n    Object.assign(result.query.state, overrides)\n    Object.assign(result, overrides)\n  }\n\n  handleSuspense(config, result)\n\n  return {\n    ...result,\n    resolvedData,\n    latestData,\n  }\n}\n","import React from 'react'\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { handleSuspense } from './utils'\nimport {\n  InfiniteQueryConfig,\n  InfiniteQueryResult,\n  QueryKey,\n  QueryKeyWithoutArray,\n  QueryKeyWithoutObject,\n  QueryKeyWithoutObjectAndArray,\n  TupleQueryFunction,\n  TupleQueryKey,\n} from '../core/types'\nimport { useQueryArgs } from './useQueryArgs'\n\n// TYPES\n\nexport interface UseInfiniteQueryObjectConfig<\n  TResult,\n  TError,\n  TKey extends TupleQueryKey\n> {\n  queryKey: QueryKey\n  queryFn?: TupleQueryFunction<TResult, TKey>\n  config?: InfiniteQueryConfig<TResult, TError>\n}\n\n// HOOK\n\n// Parameter syntax with optional config\nexport function useInfiniteQuery<\n  TResult,\n  TError,\n  TKey extends QueryKeyWithoutObject\n>(\n  queryKey: TKey,\n  queryConfig?: InfiniteQueryConfig<TResult, TError>\n): InfiniteQueryResult<TResult, TError>\n\n// Parameter syntax with query function and optional config\nexport function useInfiniteQuery<\n  TResult,\n  TError,\n  TKey extends QueryKeyWithoutObjectAndArray\n>(\n  queryKey: TKey,\n  queryFn: TupleQueryFunction<TResult, [TKey]>,\n  queryConfig?: InfiniteQueryConfig<TResult, TError>\n): InfiniteQueryResult<TResult, TError>\n\nexport function useInfiniteQuery<TResult, TError, TKey extends TupleQueryKey>(\n  queryKey: TKey,\n  queryFn: TupleQueryFunction<TResult, TKey>,\n  queryConfig?: InfiniteQueryConfig<TResult, TError>\n): InfiniteQueryResult<TResult, TError>\n\n// Object syntax\nexport function useInfiniteQuery<\n  TResult,\n  TError,\n  TKey extends QueryKeyWithoutArray\n>(\n  config: UseInfiniteQueryObjectConfig<TResult, TError, [TKey]>\n): InfiniteQueryResult<TResult, TError>\n\nexport function useInfiniteQuery<TResult, TError, TKey extends TupleQueryKey>(\n  config: UseInfiniteQueryObjectConfig<TResult, TError, TKey>\n): InfiniteQueryResult<TResult, TError>\n\n// Implementation\nexport function useInfiniteQuery<TResult, TError>(\n  ...args: any[]\n): InfiniteQueryResult<TResult, TError> {\n  const [queryKey, config] = useQueryArgs<TResult[], TError>(args)\n\n  config.infinite = true\n\n  const result = useBaseQuery<TResult[], TError>(queryKey, config)\n  const query = result.query\n  const state = result.query.state\n\n  handleSuspense(config, result)\n\n  const fetchMore = React.useMemo(() => query.fetchMore.bind(query), [query])\n\n  return {\n    ...result,\n    data: state.data,\n    canFetchMore: state.canFetchMore,\n    fetchMore,\n    isFetching: state.isFetching,\n    isFetchingMore: state.isFetchingMore,\n  }\n}\n"],"names":["QueryStatus","_uid","uid","cancelledError","isServer","window","noop","identity","d","Console","console","error","warn","log","setConsole","c","functionalUpdate","updater","input","stableStringifyReplacer","_key","value","Error","isObject","Object","keys","sort","reduce","result","key","stableStringify","JSON","stringify","a","Array","isArray","deepIncludes","b","some","isDocumentVisible","document","undefined","includes","visibilityState","isOnline","navigator","onLine","getQueryArgs","args","queryKey","queryFn","config","options","deepEqual","equal","shallowEqual","deep","depth","length","i","valueOf","prototype","hasOwnProperty","call","getStatusProps","status","isLoading","Loading","isSuccess","Success","isError","isIdle","Idle","defaultQueryKeySerializerFn","arrayQueryKey","queryHash","parse","DEFAULT_CONFIG","shared","suspense","queries","queryKeySerializerFn","enabled","retry","retryDelay","attemptIndex","Math","min","staleTime","cacheTime","refetchOnWindowFocus","refetchInterval","queryFnParamsFilter","refetchOnMount","isDataEqual","useErrorBoundary","mutations","throwOnError","defaultConfigRef","current","direct","then","Promise","resolve","body","recover","e","QueryInstance","query","onStateUpdate","id","stateUpdateListener","clearInterval","refetchIntervalId","updateConfig","oldConfig","clearIntervals","minInterval","instances","map","Infinity","setInterval","refetchIntervalInBackground","fetch","run","state","isFetched","isStale","unsubscribe","preventGC","filter","cancel","scheduleGarbageCollection","action","type","ActionType","onSuccess","data","onSettled","onError","f","arguments","apply","reject","pact","s","v","o","bind","observer","onFulfilled","onRejected","callback","_this","thenable","test","awaitBody","shouldContinue","_resumeAfterBody","_resumeAfterTest","thrown","finalizer","Query","init","queryCache","notifyGlobalListeners","getDefaultState","infinite","infiniteConfig","infiniteData","canFetchMore","fetchMoreVariable","getFetchMore","Boolean","pageVariables","dispatch","newState","queryReducer","forEach","scheduleStaleTimeout","clearStaleTimeout","staleTimeout","setTimeout","invalidate","MarkStale","clearCacheTimeout","cacheTimeout","clear","refetch","heal","cancelled","cancelPromises","promise","instance","clearTimeout","clearRetryTimeout","retryTimeout","setState","SetState","setData","subscribe","push","tryFetchData","fn","promiseOrValue","shouldContinueRetryOnFocus","failureCount","Failed","delay","fetchMore","originalQueryFn","rebuiltPageVariables","shift","nextCursor","pageArgs","slice","previous","old","isFetchingMore","newArgs","newData","Fetch","initialData","hasInitialData","initialStale","initialStatus","isFetching","updatedAt","Date","now","throwInErrorBoundary","QueryCache","globalListeners","configRef","defaultConfig","values","acc","getDefaultConfig","listener","splice","indexOf","notify","getQueries","predicate","predicateFn","exact","getQuery","getQueryData","removeQueries","cancelQueries","invalidateQueries","refetchActive","refetchInactive","all","err","resetErrorBoundaries","buildQuery","userQueryKey","queryConfig","frozen","prefetchQuery","configWithoutRetry","force","setQueryData","defaultQueryCache","makeQueryCache","queryCaches","visibilityChangeEvent","focusEvent","onWindowFocus","catch","removePreviousHandler","setFocusHandler","handleFocus","addEventListener","removeEventListener","queryCacheContext","React","createContext","useQueryCache","useContext","ReactQueryCacheProvider","children","resolvedQueryCache","useMemo","useEffect","configContext","useConfigContext","ReactQueryConfigProvider","configContextValueOrDefault","configContextValue","newConfig","contextShared","contextQueries","contextMutations","useGetLatest","obj","ref","useRef","useCallback","useMountedCallback","mounted","useRerenderer","rerender","useState","handleSuspense","useIsFetching","getIsFetching","newCache","_await","mutationReducer","Reset","Resolve","Reject","useMutation","mutationFn","useReducer","unsafeDispatch","getMutationFn","contextConfig","getConfig","latestMutationRef","mutate","variables","mutateConfig","mutationId","isLatest","snapshotValue","onMutate","reset","useBaseQuery","instanceRef","enabledBool","useQueryArgs","configWithContext","useQuery","usePaginatedQuery","lastDataRef","latestData","resolvedData","overrides","assign","useInfiniteQuery"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;EA2BA;;aA8DYA;EAAAA,EAAAA;EAAAA,EAAAA;EAAAA,EAAAA;EAAAA,EAAAA;KAAAA,wBAAAA;;ECvEZ;EAEA,IAAIC,IAAI,GAAG,CAAX;EACO,IAAMC,GAAG,GAAG,SAANA,GAAM;EAAA,SAAMD,IAAI,EAAV;EAAA,CAAZ;EACA,IAAME,cAAc,GAAG,EAAvB;EAEA,IAAMC,QAAQ,GAAG,OAAOC,MAAP,KAAkB,WAAnC;EACA,SAASC,IAAT,GAAsB;EAC3B,SAAO,KAAK,CAAZ;EACD;EACM,SAASC,QAAT,CAAqBC,CAArB,EAA8B;EACnC,SAAOA,CAAP;EACD;EACM,IAAIC,OAAsB,GAAGC,OAAO,IAAI;EAC7CC,EAAAA,KAAK,EAAEL,IADsC;EAE7CM,EAAAA,IAAI,EAAEN,IAFuC;EAG7CO,EAAAA,GAAG,EAAEP;EAHwC,CAAxC;EAMA,SAASQ,UAAT,CAAoBC,CAApB,EAAsC;EAC3CN,EAAAA,OAAO,GAAGM,CAAV;EACD;EAEM,SAASC,gBAAT,CACLC,OADK,EAELC,KAFK,EAGI;EACT,SAAO,OAAOD,OAAP,KAAmB,UAAnB,GACFA,OAAD,CAAiDC,KAAjD,CADG,GAEHD,OAFJ;EAGD;;EAED,SAASE,uBAAT,CAAiCC,IAAjC,EAA+CC,KAA/C,EAAoE;EAClE,MAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;EAC/B,UAAM,IAAIC,KAAJ,CAAU,iCAAV,CAAN;EACD;;EAED,MAAIC,QAAQ,CAACF,KAAD,CAAZ,EAAqB;EACnB,WAAOG,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EACJK,IADI,GAEJC,MAFI,CAEG,UAACC,MAAD,EAASC,GAAT,EAAiB;EACvBD,MAAAA,MAAM,CAACC,GAAD,CAAN,GAAcR,KAAK,CAACQ,GAAD,CAAnB;EACA,aAAOD,MAAP;EACD,KALI,EAKF,EALE,CAAP;EAMD;;EAED,SAAOP,KAAP;EACD;;EAEM,SAASS,eAAT,CAAyBT,KAAzB,EAA6C;EAClD,SAAOU,IAAI,CAACC,SAAL,CAAeX,KAAf,EAAsBF,uBAAtB,CAAP;EACD;EAEM,SAASI,QAAT,CAAkBU,CAAlB,EAAuC;EAC5C,SAAOA,CAAC,IAAI,OAAOA,CAAP,KAAa,QAAlB,IAA8B,CAACC,KAAK,CAACC,OAAN,CAAcF,CAAd,CAAtC;EACD;EAEM,SAASG,YAAT,CAAsBH,CAAtB,EAA8BI,CAA9B,EAA+C;EACpD,MAAIJ,CAAC,KAAKI,CAAV,EAAa;EACX,WAAO,IAAP;EACD;;EAED,MAAI,OAAOJ,CAAP,KAAa,OAAOI,CAAxB,EAA2B;EACzB,WAAO,KAAP;EACD;;EAED,MAAI,OAAOJ,CAAP,KAAa,QAAjB,EAA2B;EACzB,WAAO,CAACT,MAAM,CAACC,IAAP,CAAYY,CAAZ,EAAeC,IAAf,CAAoB,UAAAT,GAAG;EAAA,aAAI,CAACO,YAAY,CAACH,CAAC,CAACJ,GAAD,CAAF,EAASQ,CAAC,CAACR,GAAD,CAAV,CAAjB;EAAA,KAAvB,CAAR;EACD;;EAED,SAAO,KAAP;EACD;EAEM,SAASU,iBAAT,GAAsC;EAC3C;EACA,MAAI,OAAOC,QAAP,KAAoB,WAAxB,EAAqC;EACnC,WAAO,IAAP;EACD;;EACD,SAAO,CAACC,SAAD,EAAY,SAAZ,EAAuB,WAAvB,EAAoCC,QAApC,CAA6CF,QAAQ,CAACG,eAAtD,CAAP;EACD;EAEM,SAASC,QAAT,GAA6B;EAClC,SAAOC,SAAS,CAACC,MAAV,KAAqBL,SAArB,IAAkCI,SAAS,CAACC,MAAnD;EACD;EAEM,SAASC,YAAT,CACLC,IADK,EAE+C;EACpD,MAAIC,QAAJ;EACA,MAAIC,OAAJ;EACA,MAAIC,MAAJ;EACA,MAAIC,OAAJ;;EAEA,MAAI7B,QAAQ,CAACyB,IAAI,CAAC,CAAD,CAAL,CAAZ,EAAuB;EACrBC,IAAAA,QAAQ,GAAGD,IAAI,CAAC,CAAD,CAAJ,CAAQC,QAAnB;EACAC,IAAAA,OAAO,GAAGF,IAAI,CAAC,CAAD,CAAJ,CAAQE,OAAlB;EACAC,IAAAA,MAAM,GAAGH,IAAI,CAAC,CAAD,CAAJ,CAAQG,MAAjB;EACAC,IAAAA,OAAO,GAAGJ,IAAI,CAAC,CAAD,CAAd;EACD,GALD,MAKO,IAAIzB,QAAQ,CAACyB,IAAI,CAAC,CAAD,CAAL,CAAZ,EAAuB;EAC5BC,IAAAA,QAAQ,GAAGD,IAAI,CAAC,CAAD,CAAf;EACAG,IAAAA,MAAM,GAAGH,IAAI,CAAC,CAAD,CAAb;EACAI,IAAAA,OAAO,GAAGJ,IAAI,CAAC,CAAD,CAAd;EACD,GAJM,MAIA;EACLC,IAAAA,QAAQ,GAAGD,IAAI,CAAC,CAAD,CAAf;EACAE,IAAAA,OAAO,GAAGF,IAAI,CAAC,CAAD,CAAd;EACAG,IAAAA,MAAM,GAAGH,IAAI,CAAC,CAAD,CAAb;EACAI,IAAAA,OAAO,GAAGJ,IAAI,CAAC,CAAD,CAAd;EACD;;EAEDG,EAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;;EAEA,MAAID,OAAJ,EAAa;EACXC,IAAAA,MAAM,gBAAQA,MAAR;EAAgBD,MAAAA,OAAO,EAAPA;EAAhB,MAAN;EACD;;EAED,SAAO,CAACD,QAAD,EAAWE,MAAX,EAAmBC,OAAnB,CAAP;EACD;EAEM,SAASC,SAAT,CAAmBpB,CAAnB,EAA2BI,CAA3B,EAA4C;EACjD,SAAOiB,KAAK,CAACrB,CAAD,EAAII,CAAJ,EAAO,IAAP,CAAZ;EACD;EAEM,SAASkB,YAAT,CAAsBtB,CAAtB,EAA8BI,CAA9B,EAA+C;EACpD,SAAOiB,KAAK,CAACrB,CAAD,EAAII,CAAJ,EAAO,KAAP,CAAZ;EACD;EAGD;;EACA,SAASiB,KAAT,CAAerB,CAAf,EAAuBI,CAAvB,EAA+BmB,IAA/B,EAA8CC,KAA9C,EAAkE;EAAA,MAApBA,KAAoB;EAApBA,IAAAA,KAAoB,GAAZ,CAAY;EAAA;;EAChE,MAAIxB,CAAC,KAAKI,CAAV,EAAa,OAAO,IAAP;;EAEb,MACE,CAACmB,IAAI,IAAI,CAACC,KAAV,KACAxB,CADA,IAEAI,CAFA,IAGA,OAAOJ,CAAP,IAAY,QAHZ,IAIA,OAAOI,CAAP,IAAY,QALd,EAME;EACA,QAAIqB,MAAJ,EAAYC,CAAZ;;EACA,QAAIzB,KAAK,CAACC,OAAN,CAAcF,CAAd,CAAJ,EAAsB;EACpByB,MAAAA,MAAM,GAAGzB,CAAC,CAACyB,MAAX,CADoB;;EAGpB,UAAIA,MAAM,IAAIrB,CAAC,CAACqB,MAAhB,EAAwB,OAAO,KAAP;;EACxB,WAAKC,CAAC,GAAGD,MAAT,EAAiBC,CAAC,OAAO,CAAzB;EACE,YAAI,CAACL,KAAK,CAACrB,CAAC,CAAC0B,CAAD,CAAF,EAAOtB,CAAC,CAACsB,CAAD,CAAR,EAAaH,IAAb,EAAmBC,KAAK,GAAG,CAA3B,CAAV,EAAyC,OAAO,KAAP;EAD3C;;EAEA,aAAO,IAAP;EACD;;EAED,QAAIxB,CAAC,CAAC2B,OAAF,KAAcpC,MAAM,CAACqC,SAAP,CAAiBD,OAAnC,EACE,OAAO3B,CAAC,CAAC2B,OAAF,OAAgBvB,CAAC,CAACuB,OAAF,EAAvB;EAEF,QAAMnC,IAAI,GAAGD,MAAM,CAACC,IAAP,CAAYQ,CAAZ,CAAb;EACAyB,IAAAA,MAAM,GAAGjC,IAAI,CAACiC,MAAd;EACA,QAAIA,MAAM,KAAKlC,MAAM,CAACC,IAAP,CAAYY,CAAZ,EAAeqB,MAA9B,EAAsC,OAAO,KAAP;;EAEtC,SAAKC,CAAC,GAAGD,MAAT,EAAiBC,CAAC,OAAO,CAAzB;EACE,UAAI,CAACnC,MAAM,CAACqC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC1B,CAArC,EAAwCZ,IAAI,CAACkC,CAAD,CAA5C,CAAL,EAAuD,OAAO,KAAP;EADzD;;EAGA,SAAKA,CAAC,GAAGD,MAAT,EAAiBC,CAAC,OAAO,CAAzB,GAA8B;EAC5B,UAAM9B,GAAG,GAAGJ,IAAI,CAACkC,CAAD,CAAhB;EAEA,UAAI,CAACL,KAAK,CAACrB,CAAC,CAACJ,GAAD,CAAF,EAASQ,CAAC,CAACR,GAAD,CAAV,EAAiB2B,IAAjB,EAAuBC,KAAK,GAAG,CAA/B,CAAV,EAA6C,OAAO,KAAP;EAC9C;;EAED,WAAO,IAAP;EACD,GArC+D;EAwChE;;;EACA,SAAOxB,CAAC,KAAKA,CAAN,IAAWI,CAAC,KAAKA,CAAxB;EACD;;EAEM,SAAS2B,cAAT,CAA+CC,MAA/C,EAA0D;EAC/D,SAAO;EACLA,IAAAA,MAAM,EAANA,MADK;EAELC,IAAAA,SAAS,EAAED,MAAM,KAAKjE,mBAAW,CAACmE,OAF7B;EAGLC,IAAAA,SAAS,EAAEH,MAAM,KAAKjE,mBAAW,CAACqE,OAH7B;EAILC,IAAAA,OAAO,EAAEL,MAAM,KAAKjE,mBAAW,CAACsB,KAJ3B;EAKLiD,IAAAA,MAAM,EAAEN,MAAM,KAAKjE,mBAAW,CAACwE;EAL1B,GAAP;EAOD;;ECxLD;EAEO,IAAMC,2BAAuD,GAAG,SAA1DA,2BAA0D,CACrExB,QADqE,EAEzC;EAC5B,MAAI;EACF,QAAIyB,aAA4B,GAAGxC,KAAK,CAACC,OAAN,CAAcc,QAAd,IAC/BA,QAD+B,GAE/B,CAACA,QAAD,CAFJ;EAGA,QAAM0B,SAAS,GAAG7C,eAAe,CAAC4C,aAAD,CAAjC;EACAA,IAAAA,aAAa,GAAG3C,IAAI,CAAC6C,KAAL,CAAWD,SAAX,CAAhB;EACA,WAAO,CAACA,SAAD,EAAYD,aAAZ,CAAP;EACD,GAPD,CAOE,gBAAM;EACN,UAAM,IAAIpD,KAAJ,CAAU,gCAAV,CAAN;EACD;EACF,CAbM;EAeA,IAAMuD,cAAgC,GAAG;EAC9CC,EAAAA,MAAM,EAAE;EACNC,IAAAA,QAAQ,EAAE;EADJ,GADsC;EAI9CC,EAAAA,OAAO,EAAE;EACPC,IAAAA,oBAAoB,EAAER,2BADf;EAEPS,IAAAA,OAAO,EAAE,IAFF;EAGPC,IAAAA,KAAK,EAAE,CAHA;EAIPC,IAAAA,UAAU,EAAE,oBAAAC,YAAY;EAAA,aAAIC,IAAI,CAACC,GAAL,CAAS,gBAAO,CAAP,EAAYF,YAAZ,CAAT,EAAmC,KAAnC,CAAJ;EAAA,KAJjB;EAKPG,IAAAA,SAAS,EAAE,CALJ;EAMPC,IAAAA,SAAS,EAAE,IAAI,EAAJ,GAAS,IANb;EAOPC,IAAAA,oBAAoB,EAAE,IAPf;EAQPC,IAAAA,eAAe,EAAE,KARV;EASPC,IAAAA,mBAAmB,EAAErF,QATd;EAUPsF,IAAAA,cAAc,EAAE,IAVT;EAWPC,IAAAA,WAAW,EAAEzC,SAXN;EAYP0C,IAAAA,gBAAgB,EAAE;EAZX,GAJqC;EAkB9CC,EAAAA,SAAS,EAAE;EACTC,IAAAA,YAAY,EAAE,KADL;EAETF,IAAAA,gBAAgB,EAAE;EAFT;EAlBmC,CAAzC;EAwBA,IAAMG,gBAAqC,GAAG;EACnDC,EAAAA,OAAO,EAAEtB;EAD0C,CAA9C;;EC7CP;EAslBO,kBAAkB;;EAjgBlB,uBAAuBxD,KAAvB,EAA8B+E,MAA9B,EAAsC;EAC5C,MAAI,CAACA,MAAL,EAAa;EACZ,WAAO/E,KAAK,IAAIA,KAAK,CAACgF,IAAf,GAAsBhF,KAAK,CAACgF,IAAN,QAAtB,GAA2CC,OAAO,CAACC,OAAR,EAAlD;EACA;EACD;;EAucM,wBAAwBC,IAAxB,EAA8B;EACpC,MAAI5E,MAAM,GAAG4E,IAAI,EAAjB;;EACA,MAAI5E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,QAAP;EACA;EACD;;EAGM,gBAAgBG,IAAhB,EAAsBC,OAAtB,EAA+B;EACrC,MAAI;EACH,QAAI7E,MAAM,GAAG4E,IAAI,EAAjB;EACA,GAFD,CAEE,OAAME,CAAN,EAAS;EACV,WAAOD,OAAO,CAACC,CAAD,CAAd;EACA;;EACD,MAAI9E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,CAAY,KAAK,CAAjB,EAAoBI,OAApB,CAAP;EACA;;EACD,SAAO7E,MAAP;EACA;;EAjdM,0BAA0BP,KAA1B,EAAiC;EACvC,MAAIA,KAAK,IAAIA,KAAK,CAACgF,IAAnB,EAAyB;EACxB,WAAOhF,KAAK,CAACgF,IAAN,QAAP;EACA;EACD;;MAnGYM,aAAb;EAQE,yBACEC,KADF,EAEEC,aAFF,EAGE;EACA,SAAKC,EAAL,GAAU5G,GAAG,EAAb;EACA,SAAK6G,mBAAL,GAA2BF,aAA3B;EACA,SAAKD,KAAL,GAAaA,KAAb;EACA,SAAKzD,MAAL,GAAc,EAAd;EACD;;EAhBH;;EAAA,SAkBE6D,aAlBF;EAAA;EAAA;EAAA;;EAAA;EAAA;EAAA;;EAAA;EAAA,IAkBE,YAAsB;EACpB,QAAI,KAAKC,iBAAT,EAA4B;EAC1BD,MAAAA,aAAa,CAAC,KAAKC,iBAAN,CAAb;EACA,WAAKA,iBAAL,GAAyBxE,SAAzB;EACD;EACF,GAvBH;;EAAA,SAyBEyE,YAzBF,GAyBE,sBAAa/D,MAAb,EAA6D;EAAA;;EAC3D,QAAMgE,SAAS,GAAG,KAAKhE,MAAvB,CAD2D;;EAI3D,SAAKA,MAAL,GAAcA,MAAd;;EAEA,QAAI,CAAC/C,QAAL,EAAe;EACb,UAAI,CAAA+G,SAAS,QAAT,YAAAA,SAAS,CAAExB,eAAX,MAA+BxC,MAAM,CAACwC,eAA1C,EAA2D;EACzD;EACD;;EAED,WAAKiB,KAAL,CAAWQ,cAAX;EAEA,UAAMC,WAAW,GAAG/B,IAAI,CAACC,GAAL,OAAAD,IAAI,EACnB,KAAKsB,KAAL,CAAWU,SAAX,CAAqBC,GAArB,CAAyB,UAAA/G,CAAC;EAAA,eAAIA,CAAC,CAAC2C,MAAF,CAASwC,eAAT,IAA4B6B,QAAhC;EAAA,OAA1B,CADmB,CAAxB;;EAIA,UACE,CAAC,KAAKP,iBAAN,IACAI,WAAW,GAAG,CADd,IAEAA,WAAW,GAAGG,QAHhB,EAIE;EACA,aAAKP,iBAAL,GAAyBQ,WAAW,CAAC,YAAM;EACzC,cACE,KAAI,CAACb,KAAL,CAAWU,SAAX,CAAqBhF,IAArB,CAA0B,UAAA9B,CAAC;EAAA,mBAAIA,CAAC,CAAC2C,MAAF,CAAS+B,OAAb;EAAA,WAA3B,MACC3C,iBAAiB,MAChB,KAAI,CAACqE,KAAL,CAAWU,SAAX,CAAqBhF,IAArB,CACE,UAAA9B,CAAC;EAAA,mBAAIA,CAAC,CAAC2C,MAAF,CAASuE,2BAAb;EAAA,WADH,CAFF,CADF,EAME;EACA,YAAA,KAAI,CAACd,KAAL,CAAWe,KAAX;EACD;EACF,SAVmC,EAUjCN,WAViC,CAApC;EAWD;EACF;EACF,GA5DH;;EAAA,SA8DQO,GA9DR;EAAA,QA8D6B;EAAA,mBAIrB,IAJqB;;EAAA,iDACrB;EACF;EADE;EAAA,cAGA,OAAKhB,KAAL,CAAWU,SAAX,CAAqBhF,IAArB,CAA0B,UAAA9B,CAAC;EAAA,mBAAIA,CAAC,CAAC2C,MAAF,CAAS+B,OAAb;EAAA,WAA3B;EACA,YAAE,OAAK/B,MAAL,CAAY4B,QAAZ,IAAwB,OAAK6B,KAAL,CAAWiB,KAAX,CAAiBC,SAA3C,CADA;EAEA,iBAAKlB,KAAL,CAAWiB,KAAX,CAAiBE,OAFjB;EAGC,iBAAK5E,MAAL,CAAY0C,cAAZ,IAA8B,OAAKe,KAAL,CAAWU,SAAX,CAAqB5D,MAArB,KAAgC,CAH/D,CAHA;EAAA,iCAQM,OAAKkD,KAAL,CAAWe,KAAX,EARN;EAAA;EAAA;EAUH,OAXwB,YAWhBhH,KAXgB,EAWT;EACdF,QAAAA,OAAO,CAACE,KAAR,CAAcA,KAAd;EACD,OAbwB;EAc1B,KA5EH;EAAA;EAAA;EAAA;;EAAA,SA8EEqH,WA9EF,GA8EE,qBAAYC,SAAZ,EAAuC;EAAA;;EACrC,SAAKrB,KAAL,CAAWU,SAAX,GAAuB,KAAKV,KAAL,CAAWU,SAAX,CAAqBY,MAArB,CAA4B,UAAA1H,CAAC;EAAA,aAAIA,CAAC,CAACsG,EAAF,KAAS,MAAI,CAACA,EAAlB;EAAA,KAA7B,CAAvB;;EAEA,QAAI,CAAC,KAAKF,KAAL,CAAWU,SAAX,CAAqB5D,MAA1B,EAAkC;EAChC,WAAKsD,aAAL;EACA,WAAKJ,KAAL,CAAWuB,MAAX;;EAEA,UAAI,CAACF,SAAD,IAAc,CAAC7H,QAAnB,EAA6B;EAC3B;EACA,aAAKwG,KAAL,CAAWwB,yBAAX;EACD;EACF;EACF,GA1FH;;EAAA,SA4FEvB,aA5FF,GA4FE,uBACEgB,KADF,EAEEQ,MAFF,EAGQ;EAAA;;EACN,QAAIA,MAAM,CAACC,IAAP,KAAgBC,UAAU,CAAClE,OAA3B,IAAsCwD,KAAK,CAACzD,SAAhD,EAA2D;EAAA;;EACzD,oDAAKjB,MAAL,EAAYqF,SAAZ,8DAAwBX,KAAK,CAACY,IAA9B;EACA,qDAAKtF,MAAL,EAAYuF,SAAZ,+DAAwBb,KAAK,CAACY,IAA9B,EAAqC,IAArC;EACD;;EAED,QAAIJ,MAAM,CAACC,IAAP,KAAgBC,UAAU,CAACjH,KAA3B,IAAoCuG,KAAK,CAACvD,OAA9C,EAAuD;EAAA;;EACrD,oDAAKnB,MAAL,EAAYwF,OAAZ,8DAAsBd,KAAK,CAAClH,KAA5B;EACA,sDAAKwC,MAAL,EAAYuF,SAAZ,gEAAwBjG,SAAxB,EAAmCoF,KAAK,CAAClH,KAAzC;EACD;;EAED,kCAAKoG,mBAAL,sDAA2Bc,KAA3B;EACD,GA3GH;;EAAA;EAAA;;EColBO,oBAAkB;;EAjgBlB,yBAAuBxG,KAAvB,EAA8B+E,MAA9B,EAAsC;EAC5C,MAAI,CAACA,MAAL,EAAa;EACZ,WAAO/E,KAAK,IAAIA,KAAK,CAACgF,IAAf,GAAsBhF,KAAK,CAACgF,IAAN,UAAtB,GAA2CC,OAAO,CAACC,OAAR,EAAlD;EACA;EACD;;EA+cM,kBAAgBC,IAAhB,EAAsBC,OAAtB,EAA+B;EACrC,MAAI;EACH,QAAI7E,MAAM,GAAG4E,IAAI,EAAjB;EACA,GAFD,CAEE,OAAME,CAAN,EAAS;EACV,WAAOD,OAAO,CAACC,CAAD,CAAd;EACA;;EACD,MAAI9E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,CAAY,KAAK,CAAjB,EAAoBI,OAApB,CAAP;EACA;;EACD,SAAO7E,MAAP;EACA;;EAjdM,4BAA0BP,KAA1B,EAAiC;EACvC,MAAIA,KAAK,IAAIA,KAAK,CAACgF,IAAnB,EAAyB;EACxB,WAAOhF,KAAK,CAACgF,IAAN,UAAP;EACA;EACD;;EA3BM,gBAAgBhF,KAAhB,EAAuBgF,IAAvB,EAA6BD,MAA7B,EAAqC;EAC3C,MAAIA,MAAJ,EAAY;EACX,WAAOC,IAAI,GAAGA,IAAI,CAAChF,KAAD,CAAP,GAAiBA,KAA5B;EACA;;EACD,MAAI,CAACA,KAAD,IAAU,CAACA,KAAK,CAACgF,IAArB,EAA2B;EAC1BhF,IAAAA,KAAK,GAAGiF,OAAO,CAACC,OAAR,CAAgBlF,KAAhB,CAAR;EACA;;EACD,SAAOgF,IAAI,GAAGhF,KAAK,CAACgF,IAAN,CAAWA,IAAX,CAAH,GAAsBhF,KAAjC;EACA;;EAqcM,iBAAiBmF,IAAjB,EAAuBH,IAAvB,EAA6B;EACnC,MAAIzE,MAAM,GAAG4E,IAAI,EAAjB;;EACA,MAAI5E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,CAAYA,IAAZ,CAAP;EACA;;EACD,SAAOA,IAAI,CAACzE,MAAD,CAAX;EACA;;EAjeM,gBAAgBgH,CAAhB,EAAmB;EACzB,SAAO,YAAW;EACjB,SAAK,IAAI5F,IAAI,GAAG,EAAX,EAAeW,CAAC,GAAG,CAAxB,EAA2BA,CAAC,GAAGkF,SAAS,CAACnF,MAAzC,EAAiDC,CAAC,EAAlD,EAAsD;EACrDX,MAAAA,IAAI,CAACW,CAAD,CAAJ,GAAUkF,SAAS,CAAClF,CAAD,CAAnB;EACA;;EACD,QAAI;EACH,aAAO2C,OAAO,CAACC,OAAR,CAAgBqC,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAc9F,IAAd,CAAhB,CAAP;EACA,KAFD,CAEE,OAAM0D,CAAN,EAAS;EACV,aAAOJ,OAAO,CAACyC,MAAR,CAAerC,CAAf,CAAP;EACA;EACD,GATD;EAUA;;EAydM,0BAAwBF,IAAxB,EAA8B;EACpC,MAAI5E,MAAM,GAAG4E,IAAI,EAAjB;;EACA,MAAI5E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,UAAP;EACA;EACD;;EAxgBM,iBAAiB2C,IAAjB,EAAuBnB,KAAvB,EAA8BxG,KAA9B,EAAqC;EAC3C,MAAI,CAAC2H,IAAI,CAACC,CAAV,EAAa;EACZ,QAAI5H,KAAK,iBAAT,EAA4B;EAC3B,UAAIA,KAAK,CAAC4H,CAAV,EAAa;EACZ,YAAIpB,KAAK,GAAG,CAAZ,EAAe;EACdA,UAAAA,KAAK,GAAGxG,KAAK,CAAC4H,CAAd;EACA;;EACD5H,QAAAA,KAAK,GAAGA,KAAK,CAAC6H,CAAd;EACA,OALD,MAKO;EACN7H,QAAAA,KAAK,CAAC8H,CAAN,GAAU,QAAQC,IAAR,CAAa,IAAb,EAAmBJ,IAAnB,EAAyBnB,KAAzB,CAAV;EACA;EACA;EACD;;EACD,QAAIxG,KAAK,IAAIA,KAAK,CAACgF,IAAnB,EAAyB;EACxBhF,MAAAA,KAAK,CAACgF,IAAN,CAAW,QAAQ+C,IAAR,CAAa,IAAb,EAAmBJ,IAAnB,EAAyBnB,KAAzB,CAAX,EAA4C,QAAQuB,IAAR,CAAa,IAAb,EAAmBJ,IAAnB,EAAyB,CAAzB,CAA5C;EACA;EACA;;EACDA,IAAAA,IAAI,CAACC,CAAL,GAASpB,KAAT;EACAmB,IAAAA,IAAI,CAACE,CAAL,GAAS7H,KAAT;EACA,QAAMgI,QAAQ,GAAGL,IAAI,CAACG,CAAtB;;EACA,QAAIE,QAAJ,EAAc;EACbA,MAAAA,QAAQ,CAACL,IAAD,CAAR;EACA;EACD;EACD;;EA9DM,IAAM,qBAAsB,YAAW;EAC7C,mBAAiB;;EACjB,QAAMnF,SAAN,CAAgBwC,IAAhB,GAAuB,UAASiD,WAAT,EAAsBC,UAAtB,EAAkC;EACxD,QAAM3H,MAAM,GAAG,WAAf;EACA,QAAMiG,KAAK,GAAG,KAAKoB,CAAnB;;EACA,QAAIpB,KAAJ,EAAW;EACV,UAAM2B,QAAQ,GAAG3B,KAAK,GAAG,CAAR,GAAYyB,WAAZ,GAA0BC,UAA3C;;EACA,UAAIC,QAAJ,EAAc;EACb,YAAI;EACH,kBAAQ5H,MAAR,EAAgB,CAAhB,EAAmB4H,QAAQ,CAAC,KAAKN,CAAN,CAA3B;EACA,SAFD,CAEE,OAAOxC,CAAP,EAAU;EACX,kBAAQ9E,MAAR,EAAgB,CAAhB,EAAmB8E,CAAnB;EACA;;EACD,eAAO9E,MAAP;EACA,OAPD,MAOO;EACN,eAAO,IAAP;EACA;EACD;;EACD,SAAKuH,CAAL,GAAS,UAASM,KAAT,EAAgB;EACxB,UAAI;EACH,YAAMpI,KAAK,GAAGoI,KAAK,CAACP,CAApB;;EACA,YAAIO,KAAK,CAACR,CAAN,GAAU,CAAd,EAAiB;EAChB,kBAAQrH,MAAR,EAAgB,CAAhB,EAAmB0H,WAAW,GAAGA,WAAW,CAACjI,KAAD,CAAd,GAAwBA,KAAtD;EACA,SAFD,MAEO,IAAIkI,UAAJ,EAAgB;EACtB,kBAAQ3H,MAAR,EAAgB,CAAhB,EAAmB2H,UAAU,CAAClI,KAAD,CAA7B;EACA,SAFM,MAEA;EACN,kBAAQO,MAAR,EAAgB,CAAhB,EAAmBP,KAAnB;EACA;EACD,OATD,CASE,OAAOqF,CAAP,EAAU;EACX,gBAAQ9E,MAAR,EAAgB,CAAhB,EAAmB8E,CAAnB;EACA;EACD,KAbD;;EAcA,WAAO9E,MAAP;EACA,GA/BD;;EAgCA;EACA,CAnCiC,EAA3B;;EAgEA,wBAAwB8H,QAAxB,EAAkC;EACxC,SAAOA,QAAQ,iBAAR,IAA6BA,QAAQ,CAACT,CAAT,GAAa,CAAjD;EACA;;EAmRM,aAAazC,IAAb,EAAmBmD,IAAnB,EAAyB;EAC/B,MAAIC,SAAJ;;EACA,KAAG;EACF,QAAIhI,MAAM,GAAG4E,IAAI,EAAjB;;EACA,QAAI5E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,UAAI,eAAezE,MAAf,CAAJ,EAA4B;EAC3BA,QAAAA,MAAM,GAAGA,MAAM,CAACsH,CAAhB;EACA,OAFD,MAEO;EACNU,QAAAA,SAAS,GAAG,IAAZ;EACA;EACA;EACD;;EACD,QAAIC,cAAc,GAAGF,IAAI,EAAzB;;EACA,QAAI,eAAeE,cAAf,CAAJ,EAAoC;EACnCA,MAAAA,cAAc,GAAGA,cAAc,CAACX,CAAhC;EACA;;EACD,QAAI,CAACW,cAAL,EAAqB;EACpB,aAAOjI,MAAP;EACA;EACD,GAjBD,QAiBS,CAACiI,cAAc,CAACxD,IAjBzB;;EAkBA,MAAM2C,IAAI,GAAG,WAAb;;EACA,MAAMD,MAAM,GAAG,QAAQK,IAAR,CAAa,IAAb,EAAmBJ,IAAnB,EAAyB,CAAzB,CAAf;;EACA,GAACY,SAAS,GAAGhI,MAAM,CAACyE,IAAP,CAAYyD,gBAAZ,CAAH,GAAmCD,cAAc,CAACxD,IAAf,CAAoB0D,gBAApB,CAA7C,EAAoF1D,IAApF,CAAyF,KAAK,CAA9F,EAAiG0C,MAAjG;EACA,SAAOC,IAAP;;EACA,WAASc,gBAAT,CAA0BzI,KAA1B,EAAiC;EAChCO,IAAAA,MAAM,GAAGP,KAAT;;EACA,aAAS;EACRwI,MAAAA,cAAc,GAAGF,IAAI,EAArB;;EACA,UAAI,eAAeE,cAAf,CAAJ,EAAoC;EACnCA,QAAAA,cAAc,GAAGA,cAAc,CAACX,CAAhC;EACA;;EACD,UAAI,CAACW,cAAL,EAAqB;EACpB;EACA;;EACD,UAAIA,cAAc,CAACxD,IAAnB,EAAyB;EACxBwD,QAAAA,cAAc,CAACxD,IAAf,CAAoB0D,gBAApB,EAAsC1D,IAAtC,CAA2C,KAAK,CAAhD,EAAmD0C,MAAnD;EACA;EACA;;EACDnH,MAAAA,MAAM,GAAG4E,IAAI,EAAb;;EACA,UAAI5E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,YAAI,eAAezE,MAAf,CAAJ,EAA4B;EAC3BA,UAAAA,MAAM,GAAGA,MAAM,CAACsH,CAAhB;EACA,SAFD,MAEO;EACNtH,UAAAA,MAAM,CAACyE,IAAP,CAAYyD,gBAAZ,EAA8BzD,IAA9B,CAAmC,KAAK,CAAxC,EAA2C0C,MAA3C;EACA;EACA;EACD;EACD;;EACD,YAAQC,IAAR,EAAc,CAAd,EAAiBpH,MAAjB;EACA;;EACD,WAASmI,gBAAT,CAA0BF,cAA1B,EAA0C;EACzC,QAAIA,cAAJ,EAAoB;EACnB,SAAG;EACFjI,QAAAA,MAAM,GAAG4E,IAAI,EAAb;;EACA,YAAI5E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,cAAI,eAAezE,MAAf,CAAJ,EAA4B;EAC3BA,YAAAA,MAAM,GAAGA,MAAM,CAACsH,CAAhB;EACA,WAFD,MAEO;EACNtH,YAAAA,MAAM,CAACyE,IAAP,CAAYyD,gBAAZ,EAA8BzD,IAA9B,CAAmC,KAAK,CAAxC,EAA2C0C,MAA3C;EACA;EACA;EACD;;EACDc,QAAAA,cAAc,GAAGF,IAAI,EAArB;;EACA,YAAI,eAAeE,cAAf,CAAJ,EAAoC;EACnCA,UAAAA,cAAc,GAAGA,cAAc,CAACX,CAAhC;EACA;;EACD,YAAI,CAACW,cAAL,EAAqB;EACpB,kBAAQb,IAAR,EAAc,CAAd,EAAiBpH,MAAjB;;EACA;EACA;EACD,OAlBD,QAkBS,CAACiI,cAAc,CAACxD,IAlBzB;;EAmBAwD,MAAAA,cAAc,CAACxD,IAAf,CAAoB0D,gBAApB,EAAsC1D,IAAtC,CAA2C,KAAK,CAAhD,EAAmD0C,MAAnD;EACA,KArBD,MAqBO;EACN,cAAQC,IAAR,EAAc,CAAd,EAAiBpH,MAAjB;EACA;EACD;EACD;;EA5TM,mBAAmBP,KAAnB,EAA0BgF,IAA1B,EAAgC;EACtC,SAAOhF,KAAK,IAAIA,KAAK,CAACgF,IAAf,GAAsBhF,KAAK,CAACgF,IAAN,CAAWA,IAAX,CAAtB,GAAyCA,IAAI,CAAChF,KAAD,CAApD;EACA;;EAifM,kBAAkB2I,MAAlB,EAA0B3I,KAA1B,EAAiC;EACvC,MAAI2I,MAAJ,EACC,MAAM3I,KAAN;EACD,SAAOA,KAAP;EACA;;EA9BM,0BAA0BmF,IAA1B,EAAgCyD,SAAhC,EAA2C;EACjD,MAAI;EACH,QAAIrI,MAAM,GAAG4E,IAAI,EAAjB;EACA,GAFD,CAEE,OAAOE,CAAP,EAAU;EACX,WAAOuD,SAAS,CAAC,IAAD,EAAOvD,CAAP,CAAhB;EACA;;EACD,MAAI9E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,CAAY4D,SAAS,CAACb,IAAV,CAAe,IAAf,EAAqB,KAArB,CAAZ,EAAyCa,SAAS,CAACb,IAAV,CAAe,IAAf,EAAqB,IAArB,CAAzC,CAAP;EACA;;EACD,SAAOa,SAAS,CAAC,KAAD,EAAQrI,MAAR,CAAhB;EACA;;MA7gBW2G,UAAZ;;aAAYA;EAAAA,EAAAA;EAAAA,EAAAA;EAAAA,EAAAA;EAAAA,EAAAA;EAAAA,EAAAA;EAAAA,EAAAA;KAAAA,eAAAA;;EA8CZ;MAEa2B,KAAb;EAmBE,iBAAYC,IAAZ,EAAoD;EAClD,SAAKhH,MAAL,GAAcgH,IAAI,CAAChH,MAAnB;EACA,SAAKiH,UAAL,GAAkBD,IAAI,CAACC,UAAvB;EACA,SAAKnH,QAAL,GAAgBkH,IAAI,CAAClH,QAArB;EACA,SAAK0B,SAAL,GAAiBwF,IAAI,CAACxF,SAAtB;EACA,SAAK0F,qBAAL,GAA6BF,IAAI,CAACE,qBAAlC;EACA,SAAK/C,SAAL,GAAiB,EAAjB;EACA,SAAKO,KAAL,GAAayC,eAAe,CAACH,IAAI,CAAChH,MAAN,CAA5B;;EAEA,QAAIgH,IAAI,CAAChH,MAAL,CAAYoH,QAAhB,EAA0B;EACxB,UAAMC,cAAc,GAAGL,IAAI,CAAChH,MAA5B;EACA,UAAMsH,YAAY,GAAI,KAAK5C,KAAL,CAAWY,IAAjC;;EAEA,UACE,OAAOgC,YAAP,KAAwB,WAAxB,IACA,OAAO,KAAK5C,KAAL,CAAW6C,YAAlB,KAAmC,WAFrC,EAGE;EACA,aAAKC,iBAAL,GAAyBH,cAAc,CAACI,YAAf,CACvBH,YAAY,CAACA,YAAY,CAAC/G,MAAb,GAAsB,CAAvB,CADW,EAEvB+G,YAFuB,CAAzB;EAIA,aAAK5C,KAAL,CAAW6C,YAAX,GAA0BG,OAAO,CAAC,KAAKF,iBAAN,CAAjC;EACD,OAbuB;;;EAgBxB,UAAI,CAAC,KAAKG,aAAV,EAAyB;EACvB,aAAKA,aAAL,GAAqB,WAAK,KAAK7H,QAAV,EAArB;EACD;EACF;EACF;;EAhDH;;EAAA,SAkDU8H,QAlDV,GAkDE,kBAAiB1C,MAAjB,EAAwD;EACtD,QAAM2C,QAAQ,GAAGC,YAAY,CAAC,KAAKpD,KAAN,EAAaQ,MAAb,CAA7B,CADsD;;EAItD,QAAI,CAAC9E,YAAY,CAAC,KAAKsE,KAAN,EAAamD,QAAb,CAAjB,EAAyC;EACvC,WAAKnD,KAAL,GAAamD,QAAb;EACA,WAAK1D,SAAL,CAAe4D,OAAf,CAAuB,UAAA1K,CAAC;EAAA,eAAIA,CAAC,CAACqG,aAAF,CAAgBmE,QAAhB,EAA0B3C,MAA1B,CAAJ;EAAA,OAAxB;EACA,WAAKgC,qBAAL,CAA2B,IAA3B;EACD;EACF,GA3DH;;EAAA,SA6DEc,oBA7DF,GA6DE,gCAA6B;EAAA;;EAC3B,QAAI/K,QAAJ,EAAc;EACZ;EACD;;EAED,SAAKgL,iBAAL;;EAEA,QAAI,KAAKvD,KAAL,CAAWE,OAAf,EAAwB;EACtB;EACD;;EAED,QAAI,KAAK5E,MAAL,CAAYqC,SAAZ,KAA0BgC,QAA9B,EAAwC;EACtC;EACD;;EAED,SAAK6D,YAAL,GAAoBC,UAAU,CAAC,YAAM;EACnC,MAAA,KAAI,CAACC,UAAL;EACD,KAF6B,EAE3B,KAAKpI,MAAL,CAAYqC,SAFe,CAA9B;EAGD,GA/EH;;EAAA,SAiFE+F,UAjFF,GAiFE,sBAAmB;EACjB,SAAKH,iBAAL;;EAEA,QAAI,CAAC,KAAKhB,UAAL,CAAgBpF,OAAhB,CAAwB,KAAKL,SAA7B,CAAL,EAA8C;EAC5C;EACD;;EAED,QAAI,KAAKkD,KAAL,CAAWE,OAAf,EAAwB;EACtB;EACD;;EAED,SAAKgD,QAAL,CAAc;EAAEzC,MAAAA,IAAI,EAAEC,UAAU,CAACiD;EAAnB,KAAd;EACD,GA7FH;;EAAA,SA+FEpD,yBA/FF,GA+FE,qCAAkC;EAAA;;EAChC,SAAKqD,iBAAL;;EAEA,QAAI,CAAC,KAAKrB,UAAL,CAAgBpF,OAAhB,CAAwB,KAAKL,SAA7B,CAAL,EAA8C;EAC5C;EACD;;EAED,QAAI,KAAKxB,MAAL,CAAYsC,SAAZ,KAA0B+B,QAA9B,EAAwC;EACtC;EACD;;EAED,SAAKkE,YAAL,GAAoBJ,UAAU,CAC5B,YAAM;EACJ,MAAA,MAAI,CAACK,KAAL;EACD,KAH2B,EAI5B,OAAO,KAAK9D,KAAL,CAAWY,IAAlB,KAA2B,WAA3B,IACE,KAAKZ,KAAL,CAAW5D,MAAX,KAAsBjE,mBAAW,CAACsB,KADpC,GAEI,CAFJ,GAGI,KAAK6B,MAAL,CAAYsC,SAPY,CAA9B;EASD,GAnHH;;EAAA,SAqHQmG,OArHR;EAAA,QAqHiC;EAAA,mBAErB,IAFqB;;EAAA,qDACzB;EAAA,+BACI,OAAKjE,KAAL,EADJ;EAEH,OAH4B,YAGpBhH,KAHoB,EAGb;EACdF,QAAAA,OAAO,CAACE,KAAR,CAAcA,KAAd;EACD,OAL4B;EAM9B,KA3HH;EAAA;EAAA;EAAA;;EAAA,SA6HEkL,IA7HF,GA6HE,gBAAa;EACX;EACA,SAAKJ,iBAAL,GAFW;;EAKX,SAAKK,SAAL,GAAiB,IAAjB;EACD,GAnIH;;EAAA,SAqIE3D,MArIF,GAqIE,kBAAe;EACb,SAAK2D,SAAL,GAAiB3L,cAAjB;;EAEA,QAAI,KAAK4L,cAAT,EAAyB;EACvB,WAAKA,cAAL;EACD;;EAED,WAAO,KAAKC,OAAZ;EACD,GA7IH;;EAAA,SA+IE5E,cA/IF,GA+IE,0BAAuB;EACrB,SAAKE,SAAL,CAAe4D,OAAf,CAAuB,UAAAe,QAAQ,EAAI;EACjCA,MAAAA,QAAQ,CAACjF,aAAT;EACD,KAFD;EAGD,GAnJH;;EAAA,SAqJUoE,iBArJV,GAqJE,6BAA4B;EAC1B,QAAI,KAAKC,YAAT,EAAuB;EACrBa,MAAAA,YAAY,CAAC,KAAKb,YAAN,CAAZ;EACA,WAAKA,YAAL,GAAoB5I,SAApB;EACD;EACF,GA1JH;;EAAA,SA4JUgJ,iBA5JV,GA4JE,6BAA4B;EAC1B,QAAI,KAAKC,YAAT,EAAuB;EACrBQ,MAAAA,YAAY,CAAC,KAAKR,YAAN,CAAZ;EACA,WAAKA,YAAL,GAAoBjJ,SAApB;EACD;EACF,GAjKH;;EAAA,SAmKU0J,iBAnKV,GAmKE,6BAA4B;EAC1B,QAAI,KAAKC,YAAT,EAAuB;EACrBF,MAAAA,YAAY,CAAC,KAAKE,YAAN,CAAZ;EACA,WAAKA,YAAL,GAAoB3J,SAApB;EACD;EACF,GAxKH;;EAAA,SA0KU4J,QA1KV,GA0KE,kBACEpL,OADF,EAEQ;EACN,SAAK8J,QAAL,CAAc;EAAEzC,MAAAA,IAAI,EAAEC,UAAU,CAAC+D,QAAnB;EAA6BrL,MAAAA,OAAO,EAAPA;EAA7B,KAAd;EACD,GA9KH;;EAAA,SAgLEsL,OAhLF,GAgLE,iBAAQtL,OAAR,EAA8D;EAC5D,QAAM8G,OAAO,GAAG,KAAK5E,MAAL,CAAYqC,SAAZ,KAA0B,CAA1C,CAD4D;;EAG5D,SAAKuF,QAAL,CAAc;EACZzC,MAAAA,IAAI,EAAEC,UAAU,CAAClE,OADL;EAEZpD,MAAAA,OAAO,EAAPA,OAFY;EAGZ8G,MAAAA,OAAO,EAAPA;EAHY,KAAd;;EAMA,QAAI,CAACA,OAAL,EAAc;EACZ;EACA,WAAKoD,oBAAL;EACD;EACF,GA7LH;;EAAA,SA+LEQ,KA/LF,GA+LE,iBAAc;EACZ,SAAKP,iBAAL;EACA,SAAKK,iBAAL;EACA,SAAKU,iBAAL;EACA,SAAK/E,cAAL;EACA,SAAKe,MAAL;EACA,WAAO,KAAKiC,UAAL,CAAgBpF,OAAhB,CAAwB,KAAKL,SAA7B,CAAP;EACA,SAAK0F,qBAAL,CAA2B,IAA3B;EACD,GAvMH;;EAAA,SAyMEmC,SAzMF,GAyME,mBACE3F,aADF,EAEkC;EAChC,QAAMoF,QAAQ,GAAG,IAAItF,aAAJ,CAAkB,IAAlB,EAAwBE,aAAxB,CAAjB;EACA,SAAKS,SAAL,CAAemF,IAAf,CAAoBR,QAApB;EACA,SAAKJ,IAAL;EACA,WAAOI,QAAP;EACD,GAhNH;EAAA;;EAAA,SAmNgBS,YAnNhB,yBAoNIC,EApNJ,EAqNI3J,IArNJ;EAAA,QAsNsB;EAAA,mBAGa,IAHb;;EAAA,kCACd;EACF;EACA,YAAM4J,cAAc,GAAGD,EAAE,MAAF,SAAM,OAAKxJ,MAAL,CAAYyC,mBAAZ,CAAiC5C,IAAjC,CAAN,CAAvB;;EAEA,eAAK+I,cAAL,GAAsB;EAAA;;EAAA,yBAAOa,cAAP,qBAAM,KAAyBzE,MAA/B,oBAAM,KAAyBA,MAAzB,EAAN;EAAA,SAAtB;;EAJE,sBAMiByE,cANjB,YAMInE,IANJ;EAOF,iBAAO,OAAKoE,0BAAZ;EAEA,iBAAO,OAAKd,cAAZ;EACA,cAAI,OAAKD,SAAT,EAAoB,MAAM,OAAKA,SAAX;EAEpB,iBAAOrD,IAAP;EAZE;EAaH,OAdiB,YAcT9H,KAdS,EAcF;EAAA;EACd,eAAO,OAAKoL,cAAZ;EACA,YAAI,OAAKD,SAAT,EAAoB,MAAM,OAAKA,SAAX,CAFN;;EAAA;EAAA,cAMZ,OAAK3I,MAAL,CAAYgC,KAAZ,KAAsB,IAAtB,IACA,OAAK0C,KAAL,CAAWiF,YAAX,GAA0B,OAAK3J,MAAL,CAAYgC,KADtC,IAEC,OAAO,OAAKhC,MAAL,CAAYgC,KAAnB,KAA6B,UAA7B,IACC,OAAKhC,MAAL,CAAYgC,KAAZ,CAAkB,OAAK0C,KAAL,CAAWiF,YAA7B,EAA2CnM,KAA3C,CATU;EAWZ;EACA,mBAAKoK,QAAL,CAAc;EAAEzC,cAAAA,IAAI,EAAEC,UAAU,CAACwE;EAAnB,aAAd,EAZY;;;EAeZ,gBAAI,CAACxK,iBAAiB,EAAtB,EAA0B;EACxB;EACA,qBAAKsK,0BAAL,GAAkC,IAAlC,CAFwB;;EAAA;EAAA,qBAIjB,IAAIvG,OAAJ,CAAYhG,IAAZ,CAJiB;EAKzB;;EAED,mBAAO,OAAKuM,0BAAZ,CAtBY;;EAyBZ,gBAAMG,KAAK,GAAGhM,gBAAgB,CAC5B,OAAKmC,MAAL,CAAYiC,UADgB,EAE5B,OAAKyC,KAAL,CAAWiF,YAFiB,CAA9B,CAzBY;;EAAA;EAAA,0BA+BC,IAAIxG,OAAJ,CAAY,UAACC,OAAD,EAAUwC,MAAV,EAAqB;EAC5C;EACA,qBAAKqD,YAAL,GAAoBd,UAAU,oBAAa;EAAA,uBACrC,OAAKQ,SADgC,GACd/C,MAAM,CAAC,OAAK+C,SAAN,CADQ,wBAGrC;EAAA,gCACiB,OAAKY,YAAL,CAAkBC,EAAlB,EAAsB3J,IAAtB,CADjB,YACIyF,IADJ;EAEF,wBAAI,OAAKqD,SAAT,EAAoB,OAAO/C,MAAM,CAAC,OAAK+C,SAAN,CAAb;EACpBvF,oBAAAA,OAAO,CAACkC,IAAD,CAAP;EAHE;EAIH,iBAPwC,YAOhC9H,KAPgC,EAOzB;EACd,sBAAI,OAAKmL,SAAT,EAAoB,OAAO/C,MAAM,CAAC,OAAK+C,SAAN,CAAb;EACpB/C,kBAAAA,MAAM,CAACpI,KAAD,CAAN;EACD,iBAVwC;EAW1C,eAX6B,GAW3BqM,KAX2B,CAA9B;EAYD,aAdY,CA/BD;EAAA;EAAA;EAAA;EAgDd,gBAAMrM,KAAN;EAhDc;EAiDf,OA/DiB;EAgEnB,KAtRH;EAAA;EAAA;EAAA;;EAAA,SAwRQgH,KAxRR,kBAwRcvE,OAxRd;EAAA,QAwRoE;EAAA,mBAClD,IADkD;;EAChE,UAAIF,OAAO,GAAG,OAAKC,MAAL,CAAYD,OAA1B;;EAEA,UAAI,CAACA,OAAL,EAAc;EACZ;EACD,OAL+D;;;EAQhE,UAAI,OAAK8I,OAAT,EAAkB;EAChB,eAAO,OAAKA,OAAZ;EACD;;EAED,UAAI,OAAK7I,MAAL,CAAYoH,QAAhB,EAA0B;EACxB,YAAMC,cAAc,GAAG,OAAKrH,MAA5B;EACA,YAAMsH,YAAY,GAAI,OAAK5C,KAAL,CAAWY,IAAjC;EACA,YAAMwE,SAAS,GAAG7J,OAAH,oBAAGA,OAAO,CAAE6J,SAA3B;EAEA,YAAMC,eAAe,GAAGhK,OAAxB;EAEAA,QAAAA,OAAO,sBAAe;EAAA;EACpB,cAAMuF,IAAe,GAAG,EAAxB;EACA,cAAMqC,aAAa,GAAG,OAAKA,aAAL,aAAyB,OAAKA,aAA9B,IAA+C,EAArE;EACA,cAAMqC,oBAAqC,GAAG,EAA9C;EAHoB,2CAKjB;EACD,gBAAMnK,IAAI,GAAG8H,aAAa,CAACsC,KAAd,EAAb;EADC;EAAA,kBAGG,CAAC3E,IAAI,CAAC/E,MAHT;EAAA,6BAKC+E,IAAI,CAACgE,IALN;EAIC;EAJD,8BAKiBS,eAAe,MAAf,SAAmBlK,IAAnB,CALjB;EAKC,8BAAAyF,IAAI,mBAAJ;;EACA0E,kBAAAA,oBAAoB,CAACV,IAArB,CAA0BzJ,IAA1B;EAND;EAAA;EAQC;EAEA,oBAAMqK,UAAU,GAAG7C,cAAc,CAACI,YAAf,CACjBnC,IAAI,CAACA,IAAI,CAAC/E,MAAL,GAAc,CAAf,CADa,EAEjB+E,IAFiB,CAAnB,CAVD;EAgBC;EACA;;EACA,oBAAI,CAAC4E,UAAL,EAAiB;EAAA;EAAA;EAEhB;;EAED,oBAAMC,QAAQ,aAETtK,IAAI,CAACuK,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAFS,GAGZF,UAHY,EAAd;EAtBD,6BA4BC5E,IAAI,CAACgE,IA5BN;EAAA,8BA4BiBS,eAAe,MAAf,SAAmBI,QAAnB,CA5BjB;EA4BC,8BAAA7E,IAAI,oBAAJ;;EACA0E,kBAAAA,oBAAoB,CAACV,IAArB,CAA0Ba,QAA1B;EA7BD;EAAA;EAAA;EA+BF,WApCmB;EAAA,oCAoCXxC,aAAa,CAACpH,MApCH;EAAA;EAsCpB,mBAAKiH,iBAAL,GAAyBH,cAAc,CAACI,YAAf,CACvBnC,IAAI,CAACA,IAAI,CAAC/E,MAAL,GAAc,CAAf,CADmB,EAEvB+E,IAFuB,CAAzB;EAIA,mBAAKZ,KAAL,CAAW6C,YAAX,GAA0BG,OAAO,CAAC,OAAKF,iBAAN,CAAjC;EACA,mBAAKG,aAAL,GAAqBqC,oBAArB;EAEA,mBAAQ1E,IAAR;EA7CoB;EA8CrB,SA9CM,CAAP;;EAgDA,YAAIwE,SAAJ,EAAe;EACb/J,UAAAA,OAAO,sBAAqC;EAAA,8CAAxBF,IAAwB;EAAxBA,cAAAA,IAAwB;EAAA;;EAAA,gDACtC;EAAA,kBACM2H,iBADN,GACsCsC,SADtC,CACMtC,iBADN;EAAA,kBACyB6C,QADzB,GACsCP,SADtC,CACyBO,QADzB;;EAGF,qBAAKnB,QAAL,CAAc,UAAAoB,GAAG;EAAA,oCACZA,GADY;EAEfC,kBAAAA,cAAc,EAAEF,QAAQ,GAAG,UAAH,GAAgB;EAFzB;EAAA,eAAjB;;EAKA,kBAAMG,OAAO,aAAO3K,IAAP,GAAa2H,iBAAb,EAAb;;EAEA,kBAAI,OAAKG,aAAT,EAAwB;EACtB,uBAAKA,aAAL,CAAmB0C,QAAQ,GAAG,SAAH,GAAe,MAA1C,EAAkDG,OAAlD;EACD,eAFD,MAEO;EACL,uBAAK7C,aAAL,GAAqB,CAAC6C,OAAD,CAArB;EACD;;EAdC,4BAgBoBT,eAAe,MAAf,SAAmBS,OAAnB,CAhBpB,YAgBIC,OAhBJ;EAkBF,oBAAInF,IAAJ;;EAEA,oBAAI,CAACgC,YAAL,EAAmB;EACjBhC,kBAAAA,IAAI,GAAG,CAACmF,OAAD,CAAP;EACD,iBAFD,MAEO,IAAIJ,QAAJ,EAAc;EACnB/E,kBAAAA,IAAI,IAAImF,OAAJ,SAAgBnD,YAAhB,CAAJ;EACD,iBAFM,MAEA;EACLhC,kBAAAA,IAAI,aAAOgC,YAAP,GAAqBmD,OAArB,EAAJ;EACD;;EAED,uBAAKjD,iBAAL,GAAyBH,cAAc,CAACI,YAAf,CAA4BgD,OAA5B,EAAqCnF,IAArC,CAAzB;EACA,uBAAKZ,KAAL,CAAW6C,YAAX,GAA0BG,OAAO,CAAC,OAAKF,iBAAN,CAAjC;EAEA,uBAAQlC,IAAR;EA/BE;EAgCH,aAjCyC;EAkCxC,qBAAK4D,QAAL,CAAc,UAAAoB,GAAG;EAAA,oCACZA,GADY;EAEfC,kBAAAA,cAAc,EAAE;EAFD;EAAA,eAAjB;;EAlCwC;EAAA;EAuC3C,WAvCM,CAAP;EAwCD;EACF;;EAED,aAAK1B,OAAL,GAAe,mBAAa;EAC1B;EACA,eAAKF,SAAL,GAAiB,IAAjB;EAF0B,oCAItB;EACF;EACA,iBAAKf,QAAL,CAAc;EAAEzC,YAAAA,IAAI,EAAEC,UAAU,CAACsF;EAAnB,WAAd,EAFE;;;EAAA,wBAKiB,OAAKnB,YAAL,CAAkBxJ,OAAlB,EAA4B,OAAKD,QAAjC,CALjB,YAKIwF,IALJ;EAOF,mBAAK8D,OAAL,CAAa,UAAAkB,GAAG;EAAA,qBAAK,OAAKtK,MAAL,CAAY2C,WAAZ,CAAyB2H,GAAzB,EAA8BhF,IAA9B,IAAsCgF,GAAtC,GAA6ChF,IAAlD;EAAA,aAAhB;;EAEA,mBAAO,OAAKuD,OAAZ;EAEA,mBAAOvD,IAAP;EAXE;EAYH,SAhByB,YAgBjB9H,KAhBiB,EAgBV;EACd,iBAAKoK,QAAL,CAAc;EACZzC,YAAAA,IAAI,EAAEC,UAAU,CAACjH,KADL;EAEZwK,YAAAA,SAAS,EAAEnL,KAAK,KAAK,OAAKmL,SAFd;EAGZnL,YAAAA,KAAK,EAALA;EAHY,WAAd;;EAMA,iBAAO,OAAKqL,OAAZ;;EAPc,cASVrL,KAAK,KAAK,OAAKmL,SATL;EAUZ,kBAAMnL,KAAN;EAVY;EAcf,SA9ByB;EA+B3B,OA/Bc,GAAf;EAiCA,aAAO,OAAKqL,OAAZ;EACD,KAzaH;EAAA;EAAA;EAAA;;EAAA,SA2aEiB,SA3aF,GA2aE,mBACEtC,iBADF,EAEEvH,OAFF,EAGgC;EAC9B,WAAO,KAAKuE,KAAL,CAAW;EAChBsF,MAAAA,SAAS,EAAE;EACTtC,QAAAA,iBAAiB,EAAEA,iBAAF,WAAEA,iBAAF,GAAuB,KAAKA,iBADpC;EAET6C,QAAAA,QAAQ,EAAE,CAAApK,OAAO,QAAP,YAAAA,OAAO,CAAEoK,QAAT,KAAqB;EAFtB;EADK,KAAX,CAAP;EAMD,GArbH;;EAAA;EAAA;;EAwbA,SAASlD,eAAT,CACEnH,MADF,EAE+B;EAAA;;EAC7B,MAAM2K,WAAW,GACf,OAAO3K,MAAM,CAAC2K,WAAd,KAA8B,UAA9B,GACK3K,MAAM,CAAC2K,WAAR,EADJ,GAEI3K,MAAM,CAAC2K,WAHb;EAKA,MAAMC,cAAc,GAAG,OAAOD,WAAP,KAAuB,WAA9C;EAEA,MAAM/F,OAAO,GACX,CAAC5E,MAAM,CAAC+B,OAAR,KACC,OAAO/B,MAAM,CAAC6K,YAAd,KAA+B,UAA/B,GACG7K,MAAM,CAAC6K,YAAP,EADH,2BAEG7K,MAAM,CAAC6K,YAFV,mCAE0B,CAACD,cAH5B,CADF;EAMA,MAAME,aAAa,GAAGF,cAAc,GAChC/N,mBAAW,CAACqE,OADoB,GAEhClB,MAAM,CAAC+B,OAAP,GACAlF,mBAAW,CAACmE,OADZ,GAEAnE,mBAAW,CAACwE,IAJhB;EAMA,sBACKR,cAAc,CAACiK,aAAD,CADnB;EAEEtN,IAAAA,KAAK,EAAE,IAFT;EAGEmH,IAAAA,SAAS,EAAE,KAHb;EAIEoG,IAAAA,UAAU,EAAED,aAAa,KAAKjO,mBAAW,CAACmE,OAJ5C;EAKE2I,IAAAA,YAAY,EAAE,CALhB;EAME/E,IAAAA,OAAO,EAAPA,OANF;EAOEU,IAAAA,IAAI,EAAEqF,WAPR;EAQEK,IAAAA,SAAS,EAAEJ,cAAc,GAAGK,IAAI,CAACC,GAAL,EAAH,GAAgB;EAR3C;EAUD;;EAEM,SAASpD,YAAT,CACLpD,KADK,EAELQ,MAFK,EAGwB;EAC7B,UAAQA,MAAM,CAACC,IAAf;EACE,SAAKC,UAAU,CAACwE,MAAhB;EACE,0BACKlF,KADL;EAEEiF,QAAAA,YAAY,EAAEjF,KAAK,CAACiF,YAAN,GAAqB;EAFrC;;EAIF,SAAKvE,UAAU,CAACiD,SAAhB;EACE,0BACK3D,KADL;EAEEE,QAAAA,OAAO,EAAE;EAFX;;EAIF,SAAKQ,UAAU,CAACsF,KAAhB;EACE,UAAM5J,MAAM,GACV,OAAO4D,KAAK,CAACY,IAAb,KAAsB,WAAtB,GACIzI,mBAAW,CAACqE,OADhB,GAEIrE,mBAAW,CAACmE,OAHlB;EAIA,0BACK0D,KADL,EAEK7D,cAAc,CAACC,MAAD,CAFnB;EAGEiK,QAAAA,UAAU,EAAE,IAHd;EAIEpB,QAAAA,YAAY,EAAE;EAJhB;;EAMF,SAAKvE,UAAU,CAAClE,OAAhB;EACE,0BACKwD,KADL,EAEK7D,cAAc,CAAChE,mBAAW,CAACqE,OAAb,CAFnB;EAGEoE,QAAAA,IAAI,EAAEzH,gBAAgB,CAACqH,MAAM,CAACpH,OAAR,EAAiB4G,KAAK,CAACY,IAAvB,CAHxB;EAIE9H,QAAAA,KAAK,EAAE,IAJT;EAKEoH,QAAAA,OAAO,EAAEM,MAAM,CAACN,OALlB;EAMED,QAAAA,SAAS,EAAE,IANb;EAOEoG,QAAAA,UAAU,EAAE,KAPd;EAQEC,QAAAA,SAAS,EAAEC,IAAI,CAACC,GAAL,EARb;EASEvB,QAAAA,YAAY,EAAE;EAThB;;EAWF,SAAKvE,UAAU,CAACjH,KAAhB;EACE,0BACKuG,KADL;EAEEiF,QAAAA,YAAY,EAAEjF,KAAK,CAACiF,YAAN,GAAqB,CAFrC;EAGEhF,QAAAA,SAAS,EAAE,IAHb;EAIEoG,QAAAA,UAAU,EAAE,KAJd;EAKEnG,QAAAA,OAAO,EAAE;EALX,SAMM,CAACM,MAAM,CAACyD,SAAR,iBACC9H,cAAc,CAAChE,mBAAW,CAACsB,KAAb,CADf;EAEFX,QAAAA,KAAK,EAAE0H,MAAM,CAAC1H,KAFZ;EAGF2N,QAAAA,oBAAoB,EAAE;EAHpB,QANN;;EAYF,SAAK/F,UAAU,CAAC+D,QAAhB;EACE,aAAOtL,gBAAgB,CAACqH,MAAM,CAACpH,OAAR,EAAiB4G,KAAjB,CAAvB;;EACF;EACE,aAAOA,KAAP;EAlDJ;EAoDD;;ECvjBD;EAyhBO,oBAAkB;;EAjgBlB,yBAAuBxG,KAAvB,EAA8B+E,MAA9B,EAAsC;EAC5C,MAAI,CAACA,MAAL,EAAa;EACZ,WAAO/E,KAAK,IAAIA,KAAK,CAACgF,IAAf,GAAsBhF,KAAK,CAACgF,IAAN,UAAtB,GAA2CC,OAAO,CAACC,OAAR,EAAlD;EACA;EACD;;EA+cM,kBAAgBC,IAAhB,EAAsBC,OAAtB,EAA+B;EACrC,MAAI;EACH,QAAI7E,MAAM,GAAG4E,IAAI,EAAjB;EACA,GAFD,CAEE,OAAME,CAAN,EAAS;EACV,WAAOD,OAAO,CAACC,CAAD,CAAd;EACA;;EACD,MAAI9E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,CAAY,KAAK,CAAjB,EAAoBI,OAApB,CAAP;EACA;;EACD,SAAO7E,MAAP;EACA;;EA3BM,mBAAiB4E,IAAjB,EAAuBH,IAAvB,EAA6B;EACnC,MAAIzE,MAAM,GAAG4E,IAAI,EAAjB;;EACA,MAAI5E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,CAAYA,IAAZ,CAAP;EACA;;EACD,SAAOA,IAAI,CAACzE,MAAD,CAAX;EACA;;MA9dY2M,UAAb;EAQE,sBAAYpL,MAAZ,EAAuC;EACrC,SAAKA,MAAL,GAAcA,MAAM,IAAI,EAAxB,CADqC;;EAIrC,SAAKqL,eAAL,GAAuB,EAAvB;EAEA,SAAKC,SAAL,GAAiB,KAAKtL,MAAL,CAAYuL,aAAZ,GACb;EACEvI,MAAAA,OAAO,EAAE;EACPrB,QAAAA,MAAM,eACDoB,gBAAgB,CAACC,OAAjB,CAAyBrB,MADxB,EAED,KAAK3B,MAAL,CAAYuL,aAAZ,CAA0B5J,MAFzB,CADC;EAKPE,QAAAA,OAAO,eACFkB,gBAAgB,CAACC,OAAjB,CAAyBnB,OADvB,EAEF,KAAK7B,MAAL,CAAYuL,aAAZ,CAA0B1J,OAFxB,CALA;EASPgB,QAAAA,SAAS,eACJE,gBAAgB,CAACC,OAAjB,CAAyBH,SADrB,EAEJ,KAAK7C,MAAL,CAAYuL,aAAZ,CAA0B1I,SAFtB;EATF;EADX,KADa,GAiBbE,gBAjBJ;EAmBA,SAAKlB,OAAL,GAAe,EAAf;EACA,SAAKkJ,UAAL,GAAkB,CAAlB;EACD;;EAnCH;;EAAA,SAqCU7D,qBArCV,GAqCE,+BAA8BzD,KAA9B,EAAuD;EAAA;;EACrD,SAAKsH,UAAL,GAAkB1M,MAAM,CAACmN,MAAP,CAAc,KAAK3J,OAAnB,EAA4BrD,MAA5B,CAChB,UAACiN,GAAD,EAAMhI,KAAN;EAAA,aAAiBA,KAAK,CAACiB,KAAN,CAAYqG,UAAZ,GAAyBU,GAAG,GAAG,CAA/B,GAAmCA,GAApD;EAAA,KADgB,EAEhB,CAFgB,CAAlB;EAKA,SAAKJ,eAAL,CAAqBtD,OAArB,CAA6B,UAAA1K,CAAC;EAAA,aAAIA,CAAC,CAAC,KAAD,EAAOoG,KAAP,CAAL;EAAA,KAA9B;EACD,GA5CH;;EAAA,SA8CEiI,gBA9CF,GA8CE,4BAAmB;EACjB,WAAO,KAAKJ,SAAL,CAAetI,OAAtB;EACD,GAhDH;;EAAA,SAkDEqG,SAlDF,GAkDE,mBAAUsC,QAAV,EAAoD;EAAA;;EAClD,SAAKN,eAAL,CAAqB/B,IAArB,CAA0BqC,QAA1B;EACA,WAAO,YAAM;EACX,MAAA,MAAI,CAACN,eAAL,CAAqBO,MAArB,CAA4B,MAAI,CAACP,eAAL,CAAqBQ,OAArB,CAA6BF,QAA7B,CAA5B,EAAoE,CAApE;EACD,KAFD;EAGD,GAvDH;;EAAA,SAyDEnD,KAzDF,GAyDE,eAAMvI,OAAN,EAAoC;EAClC5B,IAAAA,MAAM,CAACmN,MAAP,CAAc,KAAK3J,OAAnB,EAA4BkG,OAA5B,CAAoC,UAAAtE,KAAK;EAAA,aAAIA,KAAK,CAAC+E,KAAN,EAAJ;EAAA,KAAzC;EACA,SAAK3G,OAAL,GAAe,EAAf;;EACA,QAAI5B,OAAJ,oBAAIA,OAAO,CAAE6L,MAAb,EAAqB;EACnB,WAAK5E,qBAAL;EACD;EACF,GA/DH;;EAAA,SAiEE6E,UAjEF,GAiEE,oBACEC,SADF,EAEE/L,OAFF,EAG4B;EAC1B,QAAI+L,SAAS,KAAK,IAAlB,EAAwB;EACtB,aAAO3N,MAAM,CAACmN,MAAP,CAAc,KAAK3J,OAAnB,CAAP;EACD;;EAED,QAAIoK,WAAJ;;EAEA,QAAI,OAAOD,SAAP,KAAqB,UAAzB,EAAqC;EACnCC,MAAAA,WAAW,GAAGD,SAAd;EACD,KAFD,MAEO;EAAA,iBACyB,KAAKV,SAAL,CAAetI,OAAf,CAAuBnB,OAAvB,CAC3BC,oBAD2B,CACLkK,SADK,CADzB;EAAA,UACExK,SADF;EAAA,UACa1B,SADb;;EAILmM,MAAAA,WAAW,GAAG,qBAAA5O,CAAC;EAAA,eACb,CAAA4C,OAAO,QAAP,YAAAA,OAAO,CAAEiM,KAAT,IACI7O,CAAC,CAACmE,SAAF,KAAgBA,SADpB,GAEIvC,YAAY,CAAC5B,CAAC,CAACyC,QAAH,EAAaA,SAAb,CAHH;EAAA,OAAf;EAID;;EAED,WAAOzB,MAAM,CAACmN,MAAP,CAAc,KAAK3J,OAAnB,EAA4BkD,MAA5B,CAAmCkH,WAAnC,CAAP;EACD,GAxFH;;EAAA,SA0FEE,QA1FF,GA0FE,kBACEH,SADF,EAEsC;EACpC,WAAO,KAAKD,UAAL,CAAiCC,SAAjC,EAA4C;EAAEE,MAAAA,KAAK,EAAE;EAAT,KAA5C,EAA6D,CAA7D,CAAP;EACD,GA9FH;;EAAA,SAgGEE,YAhGF,GAgGE,sBAAsBJ,SAAtB,EAAsE;EAAA;;EACpE,6BAAO,KAAKG,QAAL,CAAuBH,SAAvB,CAAP,qBAAO,eAAmCtH,KAAnC,CAAyCY,IAAhD;EACD,GAlGH;;EAAA,SAoGE+G,aApGF,GAoGE,uBACEL,SADF,EAEE/L,OAFF,EAGQ;EACN,SAAK8L,UAAL,CAAgBC,SAAhB,EAA2B/L,OAA3B,EAAoC8H,OAApC,CAA4C,UAAAtE,KAAK;EAAA,aAAIA,KAAK,CAAC+E,KAAN,EAAJ;EAAA,KAAjD;EACD,GAzGH;;EAAA,SA2GE8D,aA3GF,GA2GE,uBACEN,SADF,EAEE/L,OAFF,EAGQ;EACN,SAAK8L,UAAL,CAAgBC,SAAhB,EAA2B/L,OAA3B,EAAoC8H,OAApC,CAA4C,UAAAtE,KAAK;EAAA,aAAIA,KAAK,CAACuB,MAAN,EAAJ;EAAA,KAAjD;EACD,GAhHH;;EAAA,SAkHQuH,iBAlHR,8BAmHIP,SAnHJ,EAoHI/L,OApHJ;EAAA,QAqHmB;EAAA,mBAMX,IANW;;EAAA,kBAEbA,OAAO,IAAI,EAFE;EAAA,sCACPuM,aADO;EAAA,UACPA,aADO,oCACS,IADT;EAAA,wCACeC,eADf;EAAA,UACeA,eADf,sCACiC,KADjC;EAAA,UACwC3J,YADxC,SACwCA,YADxC;;EAAA,kCAIX;EAAA,+BACIK,OAAO,CAACuJ,GAAR,CACJ,OAAKX,UAAL,CAAgBC,SAAhB,EAA2B/L,OAA3B,EAAoCmE,GAApC,CAAwC,UAAAX,KAAK,EAAI;EAC/C,cAAIA,KAAK,CAACU,SAAN,CAAgB5D,MAApB,EAA4B;EAC1B,gBACEiM,aAAa,IACb/I,KAAK,CAACU,SAAN,CAAgBhF,IAAhB,CAAqB,UAAA2J,QAAQ;EAAA,qBAAIA,QAAQ,CAAC9I,MAAT,CAAgB+B,OAApB;EAAA,aAA7B,CAFF,EAGE;EACA,qBAAO0B,KAAK,CAACe,KAAN,EAAP;EACD;EACF,WAPD,MAOO;EACL,gBAAIiI,eAAJ,EAAqB;EACnB,qBAAOhJ,KAAK,CAACe,KAAN,EAAP;EACD;EACF;;EAED,iBAAOf,KAAK,CAAC2E,UAAN,EAAP;EACD,SAfD,CADI,CADJ;EAmBH,OAvBc,YAuBNuE,GAvBM,EAuBD;EAAA,YACR7J,YADQ;EAEV,gBAAM6J,GAAN;EAFU;EAIb,OA3Bc;EA4BhB,KAjJH;EAAA;EAAA;EAAA;;EAAA,SAmJEC,oBAnJF,GAmJE,gCAA6B;EAC3B,SAAKb,UAAL,CAAgB,IAAhB,EAAsBhE,OAAtB,CAA8B,UAAAtE,KAAK,EAAI;EACrCA,MAAAA,KAAK,CAACiB,KAAN,CAAYyG,oBAAZ,GAAmC,KAAnC;EACD,KAFD;EAGD,GAvJH;;EAAA,SAyJE0B,UAzJF,GAyJE,oBACEC,YADF,EAEEC,WAFF,EAG0B;EAAA;;EAAA,QADxBA,WACwB;EADxBA,MAAAA,WACwB,GADoB,EACpB;EAAA;;EACxB,QAAM/M,MAAM,gBACP,KAAKsL,SAAL,CAAetI,OAAf,CAAuBrB,MADhB,EAEP,KAAK2J,SAAL,CAAetI,OAAf,CAAuBnB,OAFhB,EAGPkL,WAHO,CAAZ;;EADwB,gBAOM/M,MAAM,CAAC8B,oBAAP,CAA6BgL,YAA7B,CAPN;EAAA,QAOjBtL,SAPiB;EAAA,QAON1B,QAPM;;EASxB,QAAI2D,KAAJ;;EAEA,QAAI,KAAK5B,OAAL,CAAaL,SAAb,CAAJ,EAA6B;EAC3BiC,MAAAA,KAAK,GAAG,KAAK5B,OAAL,CAAaL,SAAb,CAAR;EACAiC,MAAAA,KAAK,CAACzD,MAAN,GAAeA,MAAf;EACD;;EAED,QAAI,CAACyD,KAAL,EAAY;EACVA,MAAAA,KAAK,GAAG,IAAIsD,KAAJ,CAA2B;EACjCE,QAAAA,UAAU,EAAE,IADqB;EAEjCnH,QAAAA,QAAQ,EAARA,QAFiC;EAGjC0B,QAAAA,SAAS,EAATA,SAHiC;EAIjCxB,QAAAA,MAAM,EAANA,MAJiC;EAKjCkH,QAAAA,qBAAqB,EAAE,+BAAAzD,KAAK,EAAI;EAC9B,UAAA,MAAI,CAACyD,qBAAL,CAA2BzD,KAA3B;EACD;EAPgC,OAA3B,CAAR,CADU;EAYV;;EACA,UAAI,CAACxG,QAAD,IAAawG,KAAK,CAACiB,KAAN,CAAYY,IAA7B,EAAmC;EACjC7B,QAAAA,KAAK,CAACuE,oBAAN,GADiC;;EAIjCvE,QAAAA,KAAK,CAACiF,IAAN,GAJiC;EAMjC;;EACAjF,QAAAA,KAAK,CAACwB,yBAAN;EACD;;EAED,UAAI,CAAC,KAAKjF,MAAL,CAAYgN,MAAjB,EAAyB;EACvB,aAAKnL,OAAL,CAAaL,SAAb,IAA0BiC,KAA1B;;EAEA,YAAIxG,QAAJ,EAAc;EACZ,eAAKiK,qBAAL;EACD,SAFD,MAEO;EACL;EACA;EACA;EACAiB,UAAAA,UAAU,CAAC,YAAM;EACf,YAAA,MAAI,CAACjB,qBAAL;EACD,WAFS,CAAV;EAGD;EACF;EACF;;EAED,WAAOzD,KAAP;EACD,GApNH;EAAA;;EAgRE;EAhRF,SAiRQwJ,aAjRR;EAAA,QAmRkC;EAAA,mBAoBd,IApBc;;EAAA,wCAD3BpN,IAC2B;EAD3BA,QAAAA,IAC2B;EAAA;;EAC9B,UACEzB,QAAQ,CAACyB,IAAI,CAAC,CAAD,CAAL,CAAR,KACCA,IAAI,CAAC,CAAD,CAAJ,CAAQc,cAAR,CAAuB,cAAvB,KACCd,IAAI,CAAC,CAAD,CAAJ,CAAQc,cAAR,CAAuB,OAAvB,CAFF,CADF,EAIE;EACAd,QAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUA,IAAI,CAAC,CAAD,CAAd;EACAA,QAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUP,SAAV;EACAO,QAAAA,IAAI,CAAC,CAAD,CAAJ,GAAUP,SAAV;EACD;;EAT6B,0BAWMM,YAAY,CAI9CC,IAJ8C,CAXlB;EAAA,UAWvBC,UAXuB;EAAA,UAWbE,OAXa;EAAA,UAWLC,QAXK;;;EAiB9B,UAAMiN,kBAAkB;EAAKlL,QAAAA,KAAK,EAAE;EAAZ,SAAsBhC,OAAtB,CAAxB;;EAjB8B,kCAmB1B;EACF,YAAMyD,KAAK,GAAG,OAAKoJ,UAAL,CACZ/M,UADY,EAEZoN,kBAFY,CAAd;;EADE;EAAA,cAKE,CAAAjN,QAAO,QAAP,YAAAA,QAAO,CAAEkN,KAAT,KAAkB1J,KAAK,CAACiB,KAAN,CAAYE,OALhC;EAAA,mCAMMnB,KAAK,CAACe,KAAN,EANN;EAAA;EAAA;EAQF,iBAAOf,KAAK,CAACiB,KAAN,CAAYY,IAAnB;EARE;EASH,OA5B6B,YA4BrBqH,GA5BqB,EA4BhB;EACZ,YAAI1M,QAAJ,oBAAIA,QAAO,CAAE6C,YAAb,EAA2B;EACzB,gBAAM6J,GAAN;EACD;;EACDrP,QAAAA,OAAO,CAACE,KAAR,CAAcmP,GAAd;EAED,OAlC6B;EAmC/B,KAtTH;EAAA;EAAA;EAAA;;EAAA,SAwTES,YAxTF,GAwTE,sBACEtN,QADF,EAEEhC,OAFF,EAGEkC,MAHF,EAIE;EAAA,QADAA,MACA;EADAA,MAAAA,MACA,GADuC,EACvC;EAAA;;EACA,QAAIyD,KAAK,GAAG,KAAK0I,QAAL,CAA+BrM,QAA/B,CAAZ;;EAEA,QAAI,CAAC2D,KAAL,EAAY;EACVA,MAAAA,KAAK,GAAG,KAAKoJ,UAAL,CAAiC/M,QAAjC,EAA2CE,MAA3C,CAAR;EACD;;EAEDyD,IAAAA,KAAK,CAAC2F,OAAN,CAActL,OAAd;EACD,GApUH;;EAAA;EAAA;MAuUMuP,iBAAiB,GAAGC,cAAc,CAAC;EAAEN,EAAAA,MAAM,EAAE/P;EAAV,CAAD;MAE3BsQ,WAAW,GAAG,CAACF,iBAAD;EAEpB,SAASC,cAAT,CAAwBtN,MAAxB,EAAmD;EACxD,SAAO,IAAIoL,UAAJ,CAAepL,MAAf,CAAP;EACD;;ECjZD,IAAMwN,qBAAqB,GAAG,kBAA9B;EACA,IAAMC,UAAU,GAAG,OAAnB;;EAEA,IAAMC,aAA2B,GAAG,SAA9BA,aAA8B,GAAM;EACxC,MAAItO,iBAAiB,MAAMK,QAAQ,EAAnC,EAAuC;EACrC8N,IAAAA,WAAW,CAACxF,OAAZ,CAAoB,UAAAd,UAAU;EAAA,aAC5BA,UAAU,CACPsF,iBADH,CACqB,UAAA9I,KAAK,EAAI;EAC1B,YAAI,CAACA,KAAK,CAACU,SAAN,CAAgB5D,MAArB,EAA6B;EAC3B,iBAAO,KAAP;EACD;;EAED,YAAI,CAACkD,KAAK,CAACU,SAAN,CAAgBhF,IAAhB,CAAqB,UAAA2J,QAAQ;EAAA,iBAAIA,QAAQ,CAAC9I,MAAT,CAAgB+B,OAApB;EAAA,SAA7B,CAAL,EAAgE;EAC9D,iBAAO,KAAP;EACD;;EAED,YAAI,CAAC0B,KAAK,CAACiB,KAAN,CAAYE,OAAjB,EAA0B;EACxB,iBAAO,KAAP;EACD;;EAED,YAAInB,KAAK,CAACiG,0BAAV,EAAsC;EACpC;EACA,iBAAOjG,KAAK,CAACoF,OAAb;EACD;;EAED,eAAOnB,OAAO,CAACjE,KAAK,CAACzD,MAAN,CAAauC,oBAAd,CAAd;EACD,OApBH,EAqBGoL,KArBH,CAqBSrQ,OAAO,CAACE,KArBjB,CAD4B;EAAA,KAA9B;EAwBD;EACF,CA3BD;;EA6BA,IAAIoQ,qBAAJ;EAEO,SAASC,eAAT,CAAyBxH,QAAzB,EAAqE;EAC1E;EACA,MAAIuH,qBAAJ,EAA2B;EACzBA,IAAAA,qBAAqB;EACtB,GAJyE;;;EAM1EA,EAAAA,qBAAqB,GAAGvH,QAAQ,CAACqH,aAAD,CAAhC;EACD;EAEDG,eAAe,CAAC,UAACC,WAAD,EAA+B;EAAA;;EAC7C;EACA,MAAI,CAAC7Q,QAAD,gBAAaC,MAAb,qBAAa,QAAQ6Q,gBAArB,CAAJ,EAA2C;EACzC7Q,IAAAA,MAAM,CAAC6Q,gBAAP,CAAwBP,qBAAxB,EAA+CM,WAA/C,EAA4D,KAA5D;EACA5Q,IAAAA,MAAM,CAAC6Q,gBAAP,CAAwBN,UAAxB,EAAoCK,WAApC,EAAiD,KAAjD;EAEA,WAAO,YAAM;EACX;EACA5Q,MAAAA,MAAM,CAAC8Q,mBAAP,CAA2BR,qBAA3B,EAAkDM,WAAlD;EACA5Q,MAAAA,MAAM,CAAC8Q,mBAAP,CAA2BP,UAA3B,EAAuCK,WAAvC;EACD,KAJD;EAKD;;EACD;EACD,CAbc,CAAf;;ECvCO,IAAMG,iBAAiB,GAAGC,KAAK,CAACC,aAAN,CAAoBd,iBAApB,CAA1B;MAEMe,aAAa,GAAG,SAAhBA,aAAgB;EAAA,SAAMF,KAAK,CAACG,UAAN,CAAiBJ,iBAAjB,CAAN;EAAA;MAMhBK,uBAA+D,GAAG,SAAlEA,uBAAkE,OAGzE;EAAA,MAFJrH,UAEI,QAFJA,UAEI;EAAA,MADJsH,QACI,QADJA,QACI;EACJ,MAAMC,kBAAkB,GAAGN,KAAK,CAACO,OAAN,CACzB;EAAA,WAAMxH,UAAU,IAAIqG,cAAc,EAAlC;EAAA,GADyB,EAEzB,CAACrG,UAAD,CAFyB,CAA3B;EAKAiH,EAAAA,KAAK,CAACQ,SAAN,CAAgB,YAAM;EACpBnB,IAAAA,WAAW,CAACjE,IAAZ,CAAiBkF,kBAAjB;EAEA,WAAO,YAAM;EACX;EACA,UAAMhO,CAAC,GAAG+M,WAAW,CAAC1B,OAAZ,CAAoB2C,kBAApB,CAAV;;EACA,UAAIhO,CAAC,GAAG,CAAC,CAAT,EAAY;EACV+M,QAAAA,WAAW,CAAC3B,MAAZ,CAAmBpL,CAAnB,EAAsB,CAAtB;EACD,OALU;;;EAOX,UAAIyG,UAAU,IAAI,IAAlB,EAAwB;EACtBuH,QAAAA,kBAAkB,CAAChG,KAAnB,CAAyB;EAAEsD,UAAAA,MAAM,EAAE;EAAV,SAAzB;EACD;EACF,KAVD;EAWD,GAdD,EAcG,CAAC0C,kBAAD,EAAqBvH,UAArB,CAdH;EAgBA,sBACE,oBAAC,iBAAD,CAAmB,QAAnB;EAA4B,IAAA,KAAK,EAAEuH;EAAnC,KACGD,QADH,CADF;EAKD;;EC1CD,IAAMI,aAAa,GAAGT,KAAK,CAACC,aAAN,CACpB7O,SADoB,CAAtB;EAIO,SAASsP,gBAAT,GAA4B;EACjC,MAAM3H,UAAU,GAAGmH,aAAa,EAAhC;EACA,SACEF,KAAK,CAACG,UAAN,CAAiBM,aAAjB,KACA1H,UAAU,CAACyE,gBAAX,EADA,IAEA3I,gBAAgB,CAACC,OAHnB;EAKD;MAQY6L,wBAAiE,GAAG,SAApEA,wBAAoE,OAG3E;EAAA,MAFJ7O,MAEI,QAFJA,MAEI;EAAA,MADJuO,QACI,QADJA,QACI;EACJ,MAAMO,2BAA2B,GAAGF,gBAAgB,EAApD;EACA,MAAMG,kBAAkB,GAAGb,KAAK,CAACG,UAAN,CAAiBM,aAAjB,CAA3B;EAEA,MAAMK,SAAS,GAAGd,KAAK,CAACO,OAAN,CAAgC,YAAM;EAAA,yBACAzO,MADA,CAC9C2B,MAD8C;EAAA,QAC9CA,MAD8C,+BACrC,EADqC;EAAA,0BACA3B,MADA,CACjC6B,OADiC;EAAA,QACjCA,OADiC,gCACvB,EADuB;EAAA,4BACA7B,MADA,CACnB6C,SADmB;EAAA,QACnBA,SADmB,kCACP,EADO;EAAA,gCAMlDiM,2BANkD,CAGpDnN,MAHoD;EAAA,QAG5CsN,aAH4C,sCAG5B,EAH4B;EAAA,iCAMlDH,2BANkD,CAIpDjN,OAJoD;EAAA,QAI3CqN,cAJ2C,uCAI1B,EAJ0B;EAAA,iCAMlDJ,2BANkD,CAKpDjM,SALoD;EAAA,QAKzCsM,gBALyC,uCAKtB,EALsB;EAQtD,WAAO;EACLxN,MAAAA,MAAM,eACDsN,aADC,EAEDtN,MAFC,CADD;EAKLE,MAAAA,OAAO,eACFqN,cADE,EAEFrN,OAFE,CALF;EASLgB,MAAAA,SAAS,eACJsM,gBADI,EAEJtM,SAFI;EATJ,KAAP;EAcD,GAtBiB,EAsBf,CAAC7C,MAAD,EAAS8O,2BAAT,CAtBe,CAAlB;EAwBAZ,EAAAA,KAAK,CAACQ,SAAN,CAAgB,YAAM;EACpB;EACA,WAAO,YAAM;EACX3L,MAAAA,gBAAgB,CAACC,OAAjB,gBACM8L,2BAA2B,IAAIpN,cADrC;EAGD,KAJD;EAKD,GAPD,EAOG,CAACoN,2BAAD,CAPH,EA5BI;;EAsCJ,MAAI,CAACC,kBAAL,EAAyB;EACvBhM,IAAAA,gBAAgB,CAACC,OAAjB,GAA2BgM,SAA3B;EACD;;EAED,sBACE,oBAAC,aAAD,CAAe,QAAf;EAAwB,IAAA,KAAK,EAAEA;EAA/B,KACGT,QADH,CADF;EAKD;;EC3DM,SAASa,YAAT,CAAyBC,GAAzB,EAA0C;EAC/C,MAAMC,GAAG,GAAGpB,KAAK,CAACqB,MAAN,CAAgBF,GAAhB,CAAZ;EACAC,EAAAA,GAAG,CAACtM,OAAJ,GAAcqM,GAAd;EACA,SAAOnB,KAAK,CAACsB,WAAN,CAAkB;EAAA,WAAMF,GAAG,CAACtM,OAAV;EAAA,GAAlB,EAAqC,EAArC,CAAP;EACD;EAEM,SAASyM,kBAAT,CAAgDpJ,QAAhD,EAAgE;EACrE,MAAMqJ,OAAO,GAAGxB,KAAK,CAACqB,MAAN,CAAa,KAAb,CAAhB;EAEArB,EAAAA,KAAK,CAACjR,QAAQ,GAAG,WAAH,GAAiB,iBAA1B,CAAL,CAAkD,YAAM;EACtDyS,IAAAA,OAAO,CAAC1M,OAAR,GAAkB,IAAlB;EACA,WAAO,YAAM;EACX0M,MAAAA,OAAO,CAAC1M,OAAR,GAAkB,KAAlB;EACD,KAFD;EAGD,GALD,EAKG,EALH;EAOA,SAAQkL,KAAK,CAACsB,WAAN,CACN;EAAA,WAAqBE,OAAO,CAAC1M,OAAR,GAAkBqD,QAAQ,MAAR,mBAAlB,GAAsC,KAAK,CAAhE;EAAA,GADM,EAEN,CAACA,QAAD,CAFM,CAAR;EAID;EAEM,SAASsJ,aAAT,GAAyB;EAC9B,MAAMC,QAAQ,GAAGH,kBAAkB,CAACvB,KAAK,CAAC2B,QAAN,GAA0B,CAA1B,CAAD,CAAnC;EACA,SAAO3B,KAAK,CAACsB,WAAN,CAAkB;EAAA,WAAMI,QAAQ,CAAC,EAAD,CAAd;EAAA,GAAlB,EAAsC,CAACA,QAAD,CAAtC,CAAP;EACD;EAEM,SAASE,cAAT,CACL9P,MADK,EAELvB,MAFK,EAGL;EAAA,MACQjB,KADR,GACyBiB,MADzB,CACQjB,KADR;EAAA,MACeiG,KADf,GACyBhF,MADzB,CACegF,KADf;EAAA,MAEQiB,KAFR,GAEkBjB,KAFlB,CAEQiB,KAFR;;EAIA,MAAI1E,MAAM,CAAC4B,QAAP,IAAmB5B,MAAM,CAAC4C,gBAA9B,EAAgD;EAC9C,QAAI8B,KAAK,CAAC5D,MAAN,KAAiBjE,mBAAW,CAACsB,KAA7B,IAAsCuG,KAAK,CAACyG,oBAAhD,EAAsE;EACpE,YAAM3N,KAAN;EACD;;EAED,QACEwC,MAAM,CAAC4B,QAAP,IACA8C,KAAK,CAAC5D,MAAN,KAAiBjE,mBAAW,CAACqE,OAD7B,IAEAlB,MAAM,CAAC+B,OAHT,EAIE;EACA,UAAM+G,QAAQ,GAAGrF,KAAK,CAAC4F,SAAN,EAAjB;EAEAP,MAAAA,QAAQ,CAAC/E,YAAT,cACK/D,MADL;EAEEuF,QAAAA,SAAS,EAAE,mBAACD,IAAD,EAAO9H,KAAP,EAAiB;EAC1BsL,UAAAA,QAAQ,CAACjE,WAAT,CAAqB,IAArB;EACA7E,UAAAA,MAAM,CAACuF,SAAP,oBAAAvF,MAAM,CAACuF,SAAP,CAAmBD,IAAnB,EAAyB9H,KAAzB;EACD;EALH;EAQA,YAAMiG,KAAK,CAACe,KAAN,EAAN;EACD;EACF;EACF;;ECnEM,SAASuL,aAAT,GAAiC;EACtC,MAAM9I,UAAU,GAAGmH,aAAa,EAAhC;EACA,MAAMwB,QAAQ,GAAGD,aAAa,EAA9B;EACA,MAAM5E,UAAU,GAAG9D,UAAU,CAAC8D,UAA9B;EAEA,MAAMiF,aAAa,GAAGZ,YAAY,CAACrE,UAAD,CAAlC;EAEAmD,EAAAA,KAAK,CAACQ,SAAN,CACE;EAAA,WACEzH,UAAU,CAACoC,SAAX,CAAqB,UAAA4G,QAAQ,EAAI;EAC/B,UAAID,aAAa,OAAOC,QAAQ,CAAClF,UAAjC,EAA6C;EAC3C6E,QAAAA,QAAQ;EACT;EACF,KAJD,CADF;EAAA,GADF,EAOE,CAACI,aAAD,EAAgB/I,UAAhB,EAA4B2I,QAA5B,CAPF;EAUA,SAAO7E,UAAP;EACD;;EC6DM,SAASmF,QAAT,CAAgBhS,KAAhB,EAAuBgF,IAAvB,EAA6BD,MAA7B,EAAqC;EAC3C,MAAIA,MAAJ,EAAY;EACX,WAAOC,IAAI,GAAGA,IAAI,CAAChF,KAAD,CAAP,GAAiBA,KAA5B;EACA;;EACD,MAAI,CAACA,KAAD,IAAU,CAACA,KAAK,CAACgF,IAArB,EAA2B;EAC1BhF,IAAAA,KAAK,GAAGiF,OAAO,CAACC,OAAR,CAAgBlF,KAAhB,CAAR;EACA;;EACD,SAAOgF,IAAI,GAAGhF,KAAK,CAACgF,IAAN,CAAWA,IAAX,CAAH,GAAsBhF,KAAjC;EACA;;MAjEIkH;;EAuhBE,kBAAgB/B,IAAhB,EAAsBC,OAAtB,EAA+B;EACrC,MAAI;EACH,QAAI7E,MAAM,GAAG4E,IAAI,EAAjB;EACA,GAFD,CAEE,OAAME,CAAN,EAAS;EACV,WAAOD,OAAO,CAACC,CAAD,CAAd;EACA;;EACD,MAAI9E,MAAM,IAAIA,MAAM,CAACyE,IAArB,EAA2B;EAC1B,WAAOzE,MAAM,CAACyE,IAAP,CAAY,KAAK,CAAjB,EAAoBI,OAApB,CAAP;EACA;;EACD,SAAO7E,MAAP;EACA;;EAtfM,kBAAgBgH,CAAhB,EAAmB;EACzB,SAAO,YAAW;EACjB,SAAK,IAAI5F,IAAI,GAAG,EAAX,EAAeW,CAAC,GAAG,CAAxB,EAA2BA,CAAC,GAAGkF,SAAS,CAACnF,MAAzC,EAAiDC,CAAC,EAAlD,EAAsD;EACrDX,MAAAA,IAAI,CAACW,CAAD,CAAJ,GAAUkF,SAAS,CAAClF,CAAD,CAAnB;EACA;;EACD,QAAI;EACH,aAAO2C,OAAO,CAACC,OAAR,CAAgBqC,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAc9F,IAAd,CAAhB,CAAP;EACA,KAFD,CAEE,OAAM0D,CAAN,EAAS;EACV,aAAOJ,OAAO,CAACyC,MAAR,CAAerC,CAAf,CAAP;EACA;EACD,GATD;EAUA;;aAtDI6B;EAAAA,EAAAA;EAAAA,EAAAA;EAAAA,EAAAA;EAAAA,EAAAA;KAAAA,iBAAAA;;EA+BL;EAEA,IAAM+B,iBAAe,GAAG,SAAlBA,eAAkB;EAAA,sBACnBtG,cAAc,CAAChE,mBAAW,CAACwE,IAAb,CADK;EAEtBiE,IAAAA,IAAI,EAAEhG,SAFgB;EAGtB9B,IAAAA,KAAK,EAAE;EAHe;EAAA,CAAxB;;EAMA,SAAS2S,eAAT,CACEzL,KADF,EAEEQ,MAFF,EAG0B;EACxB,UAAQA,MAAM,CAACC,IAAf;EACE,SAAKC,YAAU,CAACgL,KAAhB;EACE,aAAOjJ,iBAAe,EAAtB;;EACF,SAAK/B,YAAU,CAACpE,OAAhB;EACE,0BACKH,cAAc,CAAChE,mBAAW,CAACmE,OAAb,CADnB;EAEEsE,QAAAA,IAAI,EAAEhG,SAFR;EAGE9B,QAAAA,KAAK,EAAE;EAHT;;EAKF,SAAK4H,YAAU,CAACiL,OAAhB;EACE,0BACKxP,cAAc,CAAChE,mBAAW,CAACqE,OAAb,CADnB;EAEEoE,QAAAA,IAAI,EAAEJ,MAAM,CAACI,IAFf;EAGE9H,QAAAA,KAAK,EAAE;EAHT;;EAKF,SAAK4H,YAAU,CAACkL,MAAhB;EACE,0BACKzP,cAAc,CAAChE,mBAAW,CAACsB,KAAb,CADnB;EAEEmH,QAAAA,IAAI,EAAEhG,SAFR;EAGE9B,QAAAA,KAAK,EAAE0H,MAAM,CAAC1H;EAHhB;;EAKF;EACE,aAAOkH,KAAP;EAtBJ;EAwBD;;EAEM,SAAS6L,WAAT,CAMLC,UANK,EAOLxQ,MAPK,EAQuD;EAAA,MAD5DA,MAC4D;EAD5DA,IAAAA,MAC4D,GADK,EACL;EAAA;;EAAA,0BAC5BkO,KAAK,CAACuC,UAAN,CAC9BN,eAD8B,EAE9B,IAF8B,EAG9BhJ,iBAH8B,CAD4B;EAAA,MACrDzC,KADqD;EAAA,MAC9CgM,cAD8C;;EAO5D,MAAM9I,QAAQ,GAAG6H,kBAAkB,CAACiB,cAAD,CAAnC;EAEA,MAAMC,aAAa,GAAGvB,YAAY,CAACoB,UAAD,CAAlC;EAEA,MAAMI,aAAa,GAAGhC,gBAAgB,EAAtC;EAEA,MAAMiC,SAAS,GAAGzB,YAAY,cACzBwB,aAAa,CAACjP,MADW,EAEzBiP,aAAa,CAAC/N,SAFW,EAGzB7C,MAHyB,EAA9B;EAMA,MAAM8Q,iBAAiB,GAAG5C,KAAK,CAACqB,MAAN,EAA1B;EAEA,MAAMwB,MAAM,GAAG7C,KAAK,CAACsB,WAAN,oBAEXwB,SAFW,EAGXC,YAHW,EAIsB;EAAA,QADjCA,YACiC;EADjCA,MAAAA,YACiC,GADoC,EACpC;EAAA;;EACjC,QAAMjR,MAAM,GAAG6Q,SAAS,EAAxB;EAEA,QAAMK,UAAU,GAAGnU,GAAG,EAAtB;EACA+T,IAAAA,iBAAiB,CAAC9N,OAAlB,GAA4BkO,UAA5B;;EAEA,QAAMC,QAAQ,GAAG,SAAXA,QAAW;EAAA,aAAML,iBAAiB,CAAC9N,OAAlB,KAA8BkO,UAApC;EAAA,KAAjB;;EAEA,QAAIE,aAAJ;EARiC,gCAU7B;EACFxJ,MAAAA,QAAQ,CAAC;EAAEzC,QAAAA,IAAI,EAAEC,YAAU,CAACpE;EAAnB,OAAD,CAAR;EADE,sBAEqBhB,MAAM,CAACqR,QAF5B,oBAEqBrR,MAAM,CAACqR,QAAP,CAAkBL,SAAlB,CAFrB;EAEFI,QAAAA,aAAa,mBAAb;EAFE,wBAIiBT,aAAa,GAAGK,SAAH,CAJ9B,YAII1L,IAJJ;EAMF,cAAI6L,QAAQ,EAAZ,EAAgB;EACdvJ,YAAAA,QAAQ,CAAC;EAAEzC,cAAAA,IAAI,EAAEC,YAAU,CAACiL,OAAnB;EAA4B/K,cAAAA,IAAI,EAAJA;EAA5B,aAAD,CAAR;EACD;;EARC,0BAUItF,MAAM,CAACqF,SAVX,oBAUIrF,MAAM,CAACqF,SAAP,CAAmBC,IAAnB,EAAyB0L,SAAzB,CAVJ;EAAA,4BAWIC,YAAY,CAAC5L,SAXjB,oBAWI4L,YAAY,CAAC5L,SAAb,CAAyBC,IAAzB,EAA+B0L,SAA/B,CAXJ;EAAA,8BAYIhR,MAAM,CAACuF,SAZX,oBAYIvF,MAAM,CAACuF,SAAP,CAAmBD,IAAnB,EAAyB,IAAzB,EAA+B0L,SAA/B,CAZJ;EAAA,gCAaIC,YAAY,CAAC1L,SAbjB,oBAaI0L,YAAY,CAAC1L,SAAb,CAAyBD,IAAzB,EAA+B,IAA/B,EAAqC0L,SAArC,CAbJ;EAeF,yBAAO1L,IAAP;EAfE;EAAA;EAAA;EAAA;EAAA;EAAA;EAgBH,KA1BgC,YA0BxB9H,KA1BwB,EA0BjB;EACdF,MAAAA,OAAO,CAACE,KAAR,CAAcA,KAAd;EADc,sBAERwC,MAAM,CAACwF,OAFC,oBAERxF,MAAM,CAACwF,OAAP,CAAiBhI,KAAjB,EAAwBwT,SAAxB,EAAoCI,aAApC,CAFQ;EAAA,wBAGRH,YAAY,CAACzL,OAHL,oBAGRyL,YAAY,CAACzL,OAAb,CAAuBhI,KAAvB,EAA8BwT,SAA9B,EAA0CI,aAA1C,CAHQ;EAAA,0BAIRpR,MAAM,CAACuF,SAJC,oBAIRvF,MAAM,CAACuF,SAAP,CACJjG,SADI,EAEJ9B,KAFI,EAGJwT,SAHI,EAIJI,aAJI,CAJQ;EAAA,4BAURH,YAAY,CAAC1L,SAVL,oBAUR0L,YAAY,CAAC1L,SAAb,CACJjG,SADI,EAEJ9B,KAFI,EAGJwT,SAHI,EAIJI,aAJI,CAVQ;EAAA;;EAiBd,kBAAID,QAAQ,EAAZ,EAAgB;EACdvJ,gBAAAA,QAAQ,CAAC;EAAEzC,kBAAAA,IAAI,EAAEC,YAAU,CAACkL,MAAnB;EAA2B9S,kBAAAA,KAAK,EAALA;EAA3B,iBAAD,CAAR;EACD;;EAnBa,2CAqBVyT,YAAY,CAACnO,YArBH,oCAqBmB9C,MAAM,CAAC8C,YArB1B;EAsBZ,sBAAMtF,KAAN;EAtBY;EAAA;EAAA;EAAA;EAAA;EA0Bf,KApDgC;EAqDlC,GAzDY,GA0Db,CAACoK,QAAD,EAAWiJ,SAAX,EAAsBF,aAAtB,CA1Da,CAAf;EA6DA,MAAMW,KAAK,GAAGpD,KAAK,CAACsB,WAAN,CAAkB,YAAM;EACpC5H,IAAAA,QAAQ,CAAC;EAAEzC,MAAAA,IAAI,EAAEC,YAAU,CAACgL;EAAnB,KAAD,CAAR;EACD,GAFa,EAEX,CAACxI,QAAD,CAFW,CAAd;EAIAsG,EAAAA,KAAK,CAACQ,SAAN,CAAgB,YAAM;EAAA,qBACmBmC,SAAS,EAD5B;EAAA,QACZjP,QADY,cACZA,QADY;EAAA,QACFgB,gBADE,cACFA,gBADE;;EAGpB,QAAI,CAACA,gBAAD,WAACA,gBAAD,GAAqBhB,QAArB,KAAkC8C,KAAK,CAAClH,KAA5C,EAAmD;EACjD,YAAMkH,KAAK,CAAClH,KAAZ;EACD;EACF,GAND,EAMG,CAACqT,SAAD,EAAYnM,KAAK,CAAClH,KAAlB,CANH;EAQA,SAAO,CAACuT,MAAD,eAAcrM,KAAd;EAAqB4M,IAAAA,KAAK,EAALA;EAArB,KAAP;EACD;;EChMM,SAASC,YAAT,CACLzR,QADK,EAELE,MAFK,EAG6B;EAAA,MADlCA,MACkC;EADlCA,IAAAA,MACkC,GADK,EACL;EAAA;;EAClC;EACA,MAAM4P,QAAQ,GAAGD,aAAa,EAA9B,CAFkC;;EAKlC,MAAM1I,UAAU,GAAGmH,aAAa,EAAhC,CALkC;;EAQlC,MAAM3K,KAAK,GAAGwD,UAAU,CAAC4F,UAAX,CAAuC/M,QAAvC,EAAiDE,MAAjD,CAAd;EACA,MAAM0E,KAAK,GAAGjB,KAAK,CAACiB,KAApB,CATkC;;EAYlC,MAAM8M,WAAW,GAAGtD,KAAK,CAACqB,MAAN,EAApB,CAZkC;;EAelCrB,EAAAA,KAAK,CAACQ,SAAN,CAAgB,YAAM;EACpB,QAAM5F,QAAQ,GAAGrF,KAAK,CAAC4F,SAAN,CAAgB,YAAM;EACrCuG,MAAAA,QAAQ;EACT,KAFgB,CAAjB;EAIA4B,IAAAA,WAAW,CAACxO,OAAZ,GAAsB8F,QAAtB,CALoB;;EAQpB,WAAO;EAAA,aAAMA,QAAQ,CAACjE,WAAT,EAAN;EAAA,KAAP;EACD,GATD,EASG,CAACpB,KAAD,EAAQmM,QAAR,CATH,EAfkC;;EA2BlC1B,EAAAA,KAAK,CAACQ,SAAN,CAAgB,YAAM;EAAA;;EACpB,4BAAA8C,WAAW,CAACxO,OAAZ,0CAAqBe,YAArB,CAAkC/D,MAAlC;EACD,GAFD;EAIA,MAAMyR,WAAW,GAAG/J,OAAO,CAAC1H,MAAM,CAAC+B,OAAR,CAA3B,CA/BkC;;EAkClCmM,EAAAA,KAAK,CAACQ,SAAN,CAAgB,YAAM;EAAA;;EAIpB,6BAAA8C,WAAW,CAACxO,OAAZ,2CAAqByB,GAArB;EACD,GALD,EAKG,CAACgN,WAAD,EAAchO,KAAd,CALH;EAOA,MAAM+E,KAAK,GAAG0F,KAAK,CAACO,OAAN,CAAc;EAAA,WAAMhL,KAAK,CAAC+E,KAAN,CAAYvC,IAAZ,CAAiBxC,KAAjB,CAAN;EAAA,GAAd,EAA6C,CAACA,KAAD,CAA7C,CAAd;EACA,MAAMgF,OAAO,GAAGyF,KAAK,CAACO,OAAN,CAAc;EAAA,WAAMhL,KAAK,CAACgF,OAAN,CAAcxC,IAAd,CAAmBxC,KAAnB,CAAN;EAAA,GAAd,EAA+C,CAACA,KAAD,CAA/C,CAAhB;EAEA,SAAO;EACL+E,IAAAA,KAAK,EAALA,KADK;EAELhL,IAAAA,KAAK,EAAEkH,KAAK,CAAClH,KAFR;EAGLmM,IAAAA,YAAY,EAAEjF,KAAK,CAACiF,YAHf;EAILxI,IAAAA,OAAO,EAAEuD,KAAK,CAACvD,OAJV;EAKL4J,IAAAA,UAAU,EAAErG,KAAK,CAACqG,UALb;EAML3J,IAAAA,MAAM,EAAEsD,KAAK,CAACtD,MANT;EAOLL,IAAAA,SAAS,EAAE2D,KAAK,CAAC3D,SAPZ;EAQL6D,IAAAA,OAAO,EAAEF,KAAK,CAACE,OARV;EASL3D,IAAAA,SAAS,EAAEyD,KAAK,CAACzD,SATZ;EAULwC,IAAAA,KAAK,EAALA,KAVK;EAWLgF,IAAAA,OAAO,EAAPA,OAXK;EAYL3H,IAAAA,MAAM,EAAE4D,KAAK,CAAC5D,MAZT;EAaLkK,IAAAA,SAAS,EAAEtG,KAAK,CAACsG;EAbZ,GAAP;EAeD;;ECjEM,SAAS0G,YAAT,CACL7R,IADK,EAE+C;EACpD,MAAM8O,aAAa,GAAGC,gBAAgB,EAAtC;;EADoD,sBAGhBhP,YAAY,CAC9CC,IAD8C,CAHI;EAAA,MAG7CC,QAH6C;EAAA,MAGnCE,MAHmC;EAAA,MAG3BC,OAH2B;;;EAQpD,MAAM0R,iBAAiB,gBAClBhD,aAAa,CAAChN,MADI,EAElBgN,aAAa,CAAC9M,OAFI,EAGlB7B,MAHkB,CAAvB;;EAMA,SAAO,CAACF,QAAD,EAAW6R,iBAAX,EAA8B1R,OAA9B,CAAP;EACD;;ECwCD;EACO,SAAS2R,QAAT,GAEyB;EAAA,oCAD3B/R,IAC2B;EAD3BA,IAAAA,IAC2B;EAAA;;EAAA,sBACH6R,YAAY,CAAkB7R,IAAlB,CADT;EAAA,MACvBC,QADuB;EAAA,MACbE,MADa;;EAE9B,MAAMvB,MAAM,GAAG8S,YAAY,CAAkBzR,QAAlB,EAA4BE,MAA5B,CAA3B;EAEA8P,EAAAA,cAAc,CAAC9P,MAAD,EAASvB,MAAT,CAAd;EAEA,sBACKA,MADL;EAEE6G,IAAAA,IAAI,EAAE7G,MAAM,CAACgF,KAAP,CAAaiB,KAAb,CAAmBY;EAF3B;EAID;;ECvDD;EACA;EACA;EAEA;;EAsDA;EACO,SAASuM,iBAAT,GAEkC;EAAA,oCADpChS,IACoC;EADpCA,IAAAA,IACoC;EAAA;;EAAA,sBACZ6R,YAAY,CAAkB7R,IAAlB,CADA;EAAA,MAChCC,QADgC;EAAA,MACtBE,MADsB;;;EAIvC,MAAM8R,WAAW,GAAG5D,KAAK,CAACqB,MAAN,EAApB,CAJuC;;EAOvC,MAAI,OAAOuC,WAAW,CAAC9O,OAAnB,KAA+B,WAAnC,EAAgD;EAC9C,WAAOhD,MAAM,CAAC2K,WAAd;EACD,GATsC;;;EAYvC,MAAMlM,MAAM,GAAG8S,YAAY,CAAkBzR,QAAlB,EAA4BE,MAA5B,CAA3B,CAZuC;;EAevC,MAAI,CAACvB,MAAM,CAACgF,KAAP,CAAazD,MAAb,CAAoB+B,OAAzB,EAAkC;EAChC+P,IAAAA,WAAW,CAAC9O,OAAZ,GAAsB1D,SAAtB;EACD,GAjBsC;;;EAAA,4BAoBFb,MAAM,CAACgF,KAAP,CAAaiB,KApBX;EAAA,MAoBzBqN,UApByB,uBAoB/BzM,IApB+B;EAAA,MAoBbxE,MApBa,uBAoBbA,MApBa;EAuBvC;;EACAoN,EAAAA,KAAK,CAACQ,SAAN,CAAgB,YAAM;EACpB,QAAI5N,MAAM,KAAKjE,mBAAW,CAACqE,OAAvB,IAAkC,OAAO6Q,UAAP,KAAsB,WAA5D,EAAyE;EACvED,MAAAA,WAAW,CAAC9O,OAAZ,GAAsB+O,UAAtB;EACD;EACF,GAJD,EAIG,CAACA,UAAD,EAAajR,MAAb,CAJH,EAxBuC;EA+BvC;;EACA,MAAIkR,YAAY,GAAGD,UAAnB;;EACA,MAAI,OAAOC,YAAP,KAAwB,WAA5B,EAAyC;EACvCA,IAAAA,YAAY,GAAGF,WAAW,CAAC9O,OAA3B;EACD,GAnCsC;EAsCvC;EACA;;;EACA,MAAI,OAAOgP,YAAP,KAAwB,WAA5B,EAAyC;EACvC,QAAMC,SAAS,GAAGpR,cAAc,CAAChE,mBAAW,CAACqE,OAAb,CAAhC;EACA7C,IAAAA,MAAM,CAAC6T,MAAP,CAAczT,MAAM,CAACgF,KAAP,CAAaiB,KAA3B,EAAkCuN,SAAlC;EACA5T,IAAAA,MAAM,CAAC6T,MAAP,CAAczT,MAAd,EAAsBwT,SAAtB;EACD;;EAEDnC,EAAAA,cAAc,CAAC9P,MAAD,EAASvB,MAAT,CAAd;EAEA,sBACKA,MADL;EAEEuT,IAAAA,YAAY,EAAZA,YAFF;EAGED,IAAAA,UAAU,EAAVA;EAHF;EAKD;;EC/DD;EACO,SAASI,gBAAT,GAEiC;EAAA,oCADnCtS,IACmC;EADnCA,IAAAA,IACmC;EAAA;;EAAA,sBACX6R,YAAY,CAAoB7R,IAApB,CADD;EAAA,MAC/BC,QAD+B;EAAA,MACrBE,MADqB;;EAGtCA,EAAAA,MAAM,CAACoH,QAAP,GAAkB,IAAlB;EAEA,MAAM3I,MAAM,GAAG8S,YAAY,CAAoBzR,QAApB,EAA8BE,MAA9B,CAA3B;EACA,MAAMyD,KAAK,GAAGhF,MAAM,CAACgF,KAArB;EACA,MAAMiB,KAAK,GAAGjG,MAAM,CAACgF,KAAP,CAAaiB,KAA3B;EAEAoL,EAAAA,cAAc,CAAC9P,MAAD,EAASvB,MAAT,CAAd;EAEA,MAAMqL,SAAS,GAAGoE,KAAK,CAACO,OAAN,CAAc;EAAA,WAAMhL,KAAK,CAACqG,SAAN,CAAgB7D,IAAhB,CAAqBxC,KAArB,CAAN;EAAA,GAAd,EAAiD,CAACA,KAAD,CAAjD,CAAlB;EAEA,sBACKhF,MADL;EAEE6G,IAAAA,IAAI,EAAEZ,KAAK,CAACY,IAFd;EAGEiC,IAAAA,YAAY,EAAE7C,KAAK,CAAC6C,YAHtB;EAIEuC,IAAAA,SAAS,EAATA,SAJF;EAKEiB,IAAAA,UAAU,EAAErG,KAAK,CAACqG,UALpB;EAMER,IAAAA,cAAc,EAAE7F,KAAK,CAAC6F;EANxB;EAQD;;;;;;;;;;;;;;;;;;;;;;;;;;"}